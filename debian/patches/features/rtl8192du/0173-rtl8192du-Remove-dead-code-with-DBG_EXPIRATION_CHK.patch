From 6d2408db57c8fd43067be30b2ecc72c5cde29fd5 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Fri, 30 Aug 2013 11:23:19 -0500
Subject: [PATCH 173/210] rtl8192du: Remove dead code with DBG_EXPIRATION_CHK

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ap.c       | 21 ---------------------
 core/rtw_mlme_ext.c | 29 +----------------------------
 2 files changed, 1 insertion(+), 49 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_ap.c
+++ b/drivers/staging/rtl8192du/core/rtw_ap.c
@@ -273,14 +273,6 @@ void rtw_remove_bcn_ie(struct rtw_adapte
 static u8 chk_sta_is_alive(struct sta_info *psta)
 {
 	u8 ret = false;
-	#ifdef DBG_EXPIRATION_CHK
-	DBG_8192D("sta:%pM, rssi:%d, rx:"STA_PKTS_FMT", expire_to:%u, %s%ssq_len:%u\n",
-		  psta->hwaddr, psta->rssi_stat.UndecoratedSmoothedPWDB,
-		  STA_RX_PKTS_DIFF_ARG(psta), psta->expire_to,
-		  psta->state&WIFI_SLEEP_STATE ? "PS, " : "",
-		  psta->state&WIFI_STA_ALIVE_CHK_STATE ? "SAC, " : "",
-		  psta->sleepq_len);
-	#endif
 
 	if ((psta->sta_stats.last_rx_data_pkts + psta->sta_stats.last_rx_ctrl_pkts) == (psta->sta_stats.rx_data_pkts + psta->sta_stats.rx_ctrl_pkts))
 		;
@@ -307,13 +299,6 @@ void	expire_timeout_chk(struct rtw_adapt
 	phead = &pstapriv->auth_list;
 	plist = get_next(phead);
 
-	/* check auth_queue */
-	#ifdef DBG_EXPIRATION_CHK
-	if (!rtw_end_of_queue_search(phead, plist)) {
-		DBG_8192D(FUNC_NDEV_FMT" auth_list, cnt:%u\n"
-			, FUNC_NDEV_ARG(padapter->pnetdev), pstapriv->auth_list_cnt);
-	}
-	#endif
 	while (!rtw_end_of_queue_search(phead, plist)) {
 		psta = LIST_CONTAINOR(plist, struct sta_info, auth_list);
 		plist = get_next(plist);
@@ -351,12 +336,6 @@ void	expire_timeout_chk(struct rtw_adapt
 	plist = get_next(phead);
 
 	/* check asoc_queue */
-	#ifdef DBG_EXPIRATION_CHK
-	if (!rtw_end_of_queue_search(phead, plist)) {
-		DBG_8192D(FUNC_NDEV_FMT" asoc_list, cnt:%u\n"
-			, FUNC_NDEV_ARG(padapter->pnetdev), pstapriv->asoc_list_cnt);
-	}
-	#endif
 	while (!rtw_end_of_queue_search(phead, plist)) {
 		psta = LIST_CONTAINOR(plist, struct sta_info, asoc_list);
 		plist = get_next(plist);
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -10254,22 +10254,6 @@ static u8 chk_ap_is_alive(struct rtw_ada
 	struct mlme_ext_priv *pmlmeext = &adapt->mlmeextpriv;
 	struct mlme_ext_info *pmlmeinfo = &(pmlmeext->mlmext_info);
 
-#ifdef DBG_EXPIRATION_CHK
-	DBG_8192D(FUNC_ADPT_FMT " rx:" STA_PKTS_FMT
-		  ", beacon:%llu, probersp_to_self:%llu" ", retry:%u\n",
-		  FUNC_ADPT_ARG(adapt)
-		  , STA_RX_PKTS_DIFF_ARG(psta)
-		  ,
-		  psta->sta_stats.rx_beacon_pkts -
-		  psta->sta_stats.last_rx_beacon_pkts,
-		  psta->sta_stats.rx_probersp_pkts -
-		  psta->sta_stats.last_rx_probersp_pkts, pmlmeext->retry);
-
-	DBG_8192D(FUNC_ADPT_FMT " tx_pkts:%llu, link_count:%u\n",
-		  FUNC_ADPT_ARG(adapt)
-		  , adapt->xmitpriv.tx_pkts, pmlmeinfo->link_count);
-#endif
-
 	if ((sta_rx_data_pkts(psta) == sta_last_rx_data_pkts(psta)) &&
 	    sta_rx_beacon_pkts(psta) == sta_last_rx_beacon_pkts(psta) &&
 	    sta_rx_probersp_pkts(psta) == sta_last_rx_probersp_pkts(psta))
@@ -10373,11 +10357,6 @@ void linked_status_chk(struct rtw_adapte
 			{
 				if (rx_chk != _SUCCESS) {
 					if (pmlmeext->retry == 0) {
-#ifdef DBG_EXPIRATION_CHK
-						DBG_8192D
-						    ("issue_probereq to trigger probersp, retry=%d\n",
-						     pmlmeext->retry);
-#endif
 						issue_probereq(adapt,
 							       &pmlmeinfo->
 							       network.Ssid,
@@ -10400,13 +10379,7 @@ void linked_status_chk(struct rtw_adapte
 				}
 
 				if (tx_chk != _SUCCESS && pmlmeinfo->link_count++ == 0xf) {
-#ifdef DBG_EXPIRATION_CHK
-					DBG_8192D("%s issue_nulldata 0\n",
-						  __func__);
-#endif
-					tx_chk =
-					    issue_nulldata(adapt, NULL, 0, 1,
-							   0);
+					tx_chk = issue_nulldata(adapt, NULL, 0, 1, 0);
 				}
 			}
 
