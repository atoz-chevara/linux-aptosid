From 6b536b3c2db97d3f65f32444f95551c8a4eeb4dc Mon Sep 17 00:00:00 2001
From: Stefan Lippers-Hollmann <s.l-h@gmx.de>
Date: Sat, 22 Mar 2014 03:03:32 +0100
Subject: [PATCH 434/456] rtl8192du: replace _cancel_workitem_sync() with
 cancel_work_sync()

Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
---
 hal/rtl8192du_led.c     | 6 +-----
 include/osdep_service.h | 5 -----
 2 files changed, 1 insertion(+), 10 deletions(-)

--- a/drivers/staging/rtl8192du/hal/rtl8192du_led.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192du_led.c
@@ -100,11 +100,7 @@ static void InitLed871x(struct rtw_adapt
 /*  */
 static void DeInitLed871x(struct LED_871X *pled)
 {
-	/* call _cancel_workitem_sync(&(pled->BlinkWorkItem)) */
-    /* before _cancel_timer_ex(&(pled->blinktimer)) to */
-    /* avoid led timer restarting when driver is removed */
-
-	_cancel_workitem_sync(&(pled->BlinkWorkItem));
+	cancel_work_sync(&(pled->BlinkWorkItem));
 	_cancel_timer_ex(&(pled->blinktimer));
 	/*  We should reset blink_in_prog if we cancel the LedControlTimer, 2005.03.10, by rcnjko. */
 	ResetLedStatus(pled);
--- a/drivers/staging/rtl8192du/include/osdep_service.h
+++ b/drivers/staging/rtl8192du/include/osdep_service.h
@@ -94,11 +94,6 @@ static inline void _cancel_timer(struct
 #define RTW_TIMER_HDL_NAME(name) rtw_##name##_timer_hdl
 #define RTW_DECLARE_TIMER_HDL(name) void RTW_TIMER_HDL_NAME(name)(RTW_TIMER_HDL_ARGS)
 
-static inline void _cancel_workitem_sync(struct work_struct *pwork)
-{
-	cancel_work_sync(pwork);
-}
-
 /*  */
 /*  Global Mutex: can only be used at PASSIVE level. */
 /*  */
