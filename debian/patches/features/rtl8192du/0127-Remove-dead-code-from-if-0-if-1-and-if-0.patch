From 0f012edd63b01286cb9cb934adf9b7393b179466 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sat, 4 May 2013 21:38:34 -0500
Subject: [PATCH 127/390] Remove dead code from "#if 0", "#if 1", and "if (0)"

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_cmd.c          |   3 -
 core/rtw_ioctl_set.c    |  29 ++-------
 core/rtw_iol.c          |  21 +------
 core/rtw_mlme.c         |   7 ---
 core/rtw_mlme_ext.c     | 110 ++++++++++----------------------
 core/rtw_pwrctrl.c      |   5 --
 core/rtw_recv.c         |   5 --
 core/rtw_xmit.c         |  68 +++-----------------
 hal/rtl8192d_hal_init.c |  59 ++----------------
 hal/rtl8192d_mp.c       | 100 +----------------------------
 hal/rtl8192d_phycfg.c   | 115 ++++++----------------------------
 hal/rtl8192du_xmit.c    |  10 ---
 hal/usb_halinit.c       | 163 +++++++++++++++++++-----------------------------
 include/rtw_mp_ioctl.h  |  10 ---
 os_dep/ioctl_cfg80211.c |  18 ------
 os_dep/ioctl_linux.c    |  56 +++++------------
 os_dep/os_intfs.c       |   6 +-
 os_dep/osdep_service.c  |   4 --
 os_dep/recv_linux.c     |  18 ------
 os_dep/usb_intf.c       |  70 ++-------------------
 os_dep/usb_ops_linux.c  |  35 +----------
 os_dep/xmit_linux.c     |   9 +--
 22 files changed, 156 insertions(+), 765 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_cmd.c
+++ b/drivers/staging/rtl8192du/core/rtw_cmd.c
@@ -639,9 +639,6 @@ _func_enter_;
 			if (ssid[i].SsidLength) {
 				memcpy(&psurveyPara->ssid[i], &ssid[i], sizeof(struct ndis_802_11_ssid));
 				psurveyPara->ssid_num++;
-				if (0)
-				DBG_8192D(FUNC_ADPT_FMT" ssid:(%s, %d)\n", FUNC_ADPT_ARG(padapter),
-					  psurveyPara->ssid[i].Ssid, psurveyPara->ssid[i].SsidLength);
 			}
 		}
 	}
--- a/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
+++ b/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
@@ -159,37 +159,16 @@ _func_enter_;
 
 				RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("***Error=> rtw_select_and_join_from_scanned_queue FAIL under STA_Mode***\n "));
 
-			}
-			else
-			{
+			} else {
 				// can't associate ; reset under-linking
 				_clr_fwstate_(pmlmepriv, _FW_UNDER_LINKING);
 
-#if 0
-				if ((check_fwstate(pmlmepriv, WIFI_STATION_STATE) == true))
-				{
-					if (_rtw_memcmp(pmlmepriv->cur_network.network.Ssid.Ssid, pmlmepriv->assoc_ssid.Ssid, pmlmepriv->assoc_ssid.SsidLength))
-					{
-						// for funk to do roaming
-						// funk will reconnect, but funk will not sitesurvey before reconnect
-						RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("for funk to do roaming"));
-						if (pmlmepriv->sitesurveyctrl.traffic_busy==false)
-							rtw_sitesurvey_cmd(padapter, &pmlmepriv->assoc_ssid, 1, NULL, 0);
-					}
-
-				}
-#endif
-
 				//when set_ssid/set_bssid for rtw_do_join(), but there are no desired bss in scanning queue
 				//we try to issue sitesurvey firstly
-				if (pmlmepriv->LinkDetectInfo.bBusyTraffic==false
-					|| rtw_to_roaming(padapter) > 0
-				)
-				{
-					//DBG_8192D("rtw_do_join() when   no desired bss in scanning queue\n");
-					if (_SUCCESS!=(ret=rtw_sitesurvey_cmd(padapter, &pmlmepriv->assoc_ssid, 1, NULL, 0))) {
+				if (pmlmepriv->LinkDetectInfo.bBusyTraffic==false ||
+				    rtw_to_roaming(padapter) > 0) {
+					if (_SUCCESS!=(ret=rtw_sitesurvey_cmd(padapter, &pmlmepriv->assoc_ssid, 1, NULL, 0)))
 						RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_err_,("do_join(): site survey return error\n."));
-					}
 				}
 
 
--- a/drivers/staging/rtl8192du/core/rtw_iol.c
+++ b/drivers/staging/rtl8192du/core/rtw_iol.c
@@ -28,15 +28,12 @@ struct xmit_frame	*rtw_IOL_accquire_xmit
 	struct pkt_attrib	*pattrib;
 	struct xmit_priv	*pxmitpriv = &(adapter->xmitpriv);
 
-#if 1
-	if ((xmit_frame = rtw_alloc_xmitframe(pxmitpriv)) == NULL)
-	{
+	if ((xmit_frame = rtw_alloc_xmitframe(pxmitpriv)) == NULL) {
 		DBG_871X("%s rtw_alloc_xmitframe return null\n", __func__);
 		goto exit;
 	}
 
-	if ((xmitbuf = rtw_alloc_xmitbuf(pxmitpriv)) == NULL)
-	{
+	if ((xmitbuf = rtw_alloc_xmitbuf(pxmitpriv)) == NULL) {
 		DBG_871X("%s rtw_alloc_xmitbuf return null\n", __func__);
 		rtw_free_xmitframe(pxmitpriv, xmit_frame);
 		xmit_frame=NULL;
@@ -52,20 +49,6 @@ struct xmit_frame	*rtw_IOL_accquire_xmit
 	update_mgntframe_attrib(adapter, pattrib);
 	pattrib->qsel = 0x10;
 	pattrib->pktlen = pattrib->last_txcmdsz = 0;
-
-#else
-	if ((xmit_frame = alloc_mgtxmitframe(pxmitpriv)) == NULL)
-	{
-		DBG_871X("%s alloc_mgtxmitframe return null\n", __func__);
-	}
-	else {
-		pattrib = &xmit_frame->attrib;
-		update_mgntframe_attrib(adapter, pattrib);
-		pattrib->qsel = 0x10;
-		pattrib->pktlen = pattrib->last_txcmdsz = 0;
-	}
-#endif
-
 exit:
 	return xmit_frame;
 }
--- a/drivers/staging/rtl8192du/core/rtw_mlme.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme.c
@@ -2275,8 +2275,6 @@ inline void rtw_clear_scan_deny(struct r
 {
 	struct mlme_priv *mlmepriv = &adapter->mlmepriv;
 	ATOMIC_SET(&mlmepriv->set_scan_deny, 0);
-	if (0)
-	DBG_8192D(FUNC_ADPT_FMT"\n", FUNC_ADPT_ARG(adapter));
 }
 
 void rtw_set_scan_deny_timer_hdl(struct rtw_adapter *adapter)
@@ -2290,9 +2288,6 @@ void rtw_set_scan_deny(struct rtw_adapte
 #ifdef CONFIG_CONCURRENT_MODE
 	struct mlme_priv *b_mlmepriv;
 #endif
-
-	if (0)
-	DBG_8192D(FUNC_ADPT_FMT"\n", FUNC_ADPT_ARG(adapter));
 	ATOMIC_SET(&mlmepriv->set_scan_deny, 1);
 	_set_timer(&mlmepriv->set_scan_deny_timer, ms);
 
@@ -2300,8 +2295,6 @@ void rtw_set_scan_deny(struct rtw_adapte
 	if (!adapter->pbuddy_adapter)
 		return;
 
-	if (0)
-	DBG_8192D(FUNC_ADPT_FMT"\n", FUNC_ADPT_ARG(adapter->pbuddy_adapter));
 	b_mlmepriv = &adapter->pbuddy_adapter->mlmepriv;
 	ATOMIC_SET(&b_mlmepriv->set_scan_deny, 1);
 	_set_timer(&b_mlmepriv->set_scan_deny_timer, ms);
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -655,7 +655,6 @@ void mgt_dispatcher(struct rtw_adapter *
 	}
 	ptable += index;
 
-#if 1
 	if (psta != NULL)
 	{
 		if (GetRetry(pframe))
@@ -669,14 +668,6 @@ void mgt_dispatcher(struct rtw_adapter *
 		}
 		psta->RxMgmtFrameSeqNum = precv_frame->u.hdr.attrib.seq_num;
 	}
-#else
-
-	if (GetRetry(pframe))
-	{
-		//RT_TRACE(_module_rtl871x_mlme_c_,_drv_err_,("drop due to decache!\n"));
-		//return;
-	}
-#endif
 
 #ifdef CONFIG_AP_MODE
 	switch (GetFrameSubType(pframe))
@@ -7075,9 +7066,7 @@ void issue_assocreq(struct rtw_adapter *
 
 	//supported rate & extended supported rate
 
-#if 1	// Check if the AP's supported rates are also supported by STA.
 	get_rate_set(padapter, sta_bssrate, &sta_bssrate_len);
-	//DBG_8192D("sta_bssrate_len=%d\n", sta_bssrate_len);
 
 	if (pmlmeext->cur_channel == 14)// for JAPAN, channel 14 can only uses B Mode(CCK)
 	{
@@ -7123,17 +7112,6 @@ void issue_assocreq(struct rtw_adapter *
 	bssrate_len = index;
 	DBG_8192D("bssrate_len = %d\n", bssrate_len);
 
-#else	// Check if the AP's supported rates are also supported by STA.
-	for (bssrate_len = 0; bssrate_len < NUMRATES; bssrate_len++) {
-		if (pmlmeinfo->network.SupportedRates[bssrate_len] == 0) break;
-
-		if (pmlmeinfo->network.SupportedRates[bssrate_len] == 0x2C) // Avoid the proprietary data rate (22Mbps) of Handlink WSG-4000 AP
-			break;
-
-		bssrate[bssrate_len] = pmlmeinfo->network.SupportedRates[bssrate_len];
-	}
-#endif	// Check if the AP's supported rates are also supported by STA.
-
 	if (bssrate_len == 0) {
 		rtw_free_xmitbuf(pxmitpriv, pmgntframe->pxmitbuf);
 		rtw_free_xmitframe(pxmitpriv, pmgntframe);
@@ -7216,55 +7194,47 @@ void issue_assocreq(struct rtw_adapter *
 			pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= 0x000c;
 
 			rtw_hal_get_hwreg(padapter, HW_VAR_RF_TYPE, (u8 *)(&rf_type));
-			//switch (pregpriv->rf_config)
-			switch (rf_type)
-			{
-				case RF_1T1R:
+			switch (rf_type) {
+			case RF_1T1R:
+
+				if (pregpriv->rx_stbc)
+					pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0100);/* RX STBC One spatial stream */
+
+				memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_1R, 16);
+				break;
 
+			case RF_2T2R:
+			case RF_1T2R:
+			default:
+				if (pregpriv->special_rf_path) {
 					if (pregpriv->rx_stbc)
 						pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0100);//RX STBC One spatial stream
-
 					memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_1R, 16);
 					break;
+				}
 
-				case RF_2T2R:
-				case RF_1T2R:
-				default:
-
-
-					if (pregpriv->special_rf_path)
-					{
-						if (pregpriv->rx_stbc)
-							pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0100);//RX STBC One spatial stream
-						memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_1R, 16);
-						break;
-					}
-
-					if ((pregpriv->rx_stbc == 0x3) ||//enable for 2.4/5 GHz
-						((pmlmeext->cur_wireless_mode & WIRELESS_11_24N) && (pregpriv->rx_stbc == 0x1)) || //enable for 2.4GHz
-						((pmlmeext->cur_wireless_mode & WIRELESS_11_5N) && (pregpriv->rx_stbc == 0x2)) || //enable for 5GHz
-						(pregpriv->wifi_spec==1))
-					{
-						DBG_8192D("declare supporting RX STBC\n");
-						pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0200);//RX STBC two spatial stream
-					}
-					#ifdef CONFIG_DISABLE_MCS13TO15
-					if (pmlmeext->cur_bwmode == HT_CHANNEL_WIDTH_40 && (pregpriv->wifi_spec!=1))
-						memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_2R_MCS13TO15_OFF, 16);
-					else
-					memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_2R, 16);
-					#else //CONFIG_DISABLE_MCS13TO15
+				if ((pregpriv->rx_stbc == 0x3) ||//enable for 2.4/5 GHz
+				    ((pmlmeext->cur_wireless_mode & WIRELESS_11_24N) && (pregpriv->rx_stbc == 0x1)) || //enable for 2.4GHz
+				    ((pmlmeext->cur_wireless_mode & WIRELESS_11_5N) && (pregpriv->rx_stbc == 0x2)) || //enable for 5GHz
+				    (pregpriv->wifi_spec==1)) {
+					DBG_8192D("declare supporting RX STBC\n");
+					pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0200);//RX STBC two spatial stream
+				}
+				#ifdef CONFIG_DISABLE_MCS13TO15
+				if (pmlmeext->cur_bwmode == HT_CHANNEL_WIDTH_40 && (pregpriv->wifi_spec!=1))
+					memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_2R_MCS13TO15_OFF, 16);
+				else
 					memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_2R, 16);
-					#endif //CONFIG_DISABLE_MCS13TO15
-					break;
+				#else //CONFIG_DISABLE_MCS13TO15
+				memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_2R, 16);
+				#endif //CONFIG_DISABLE_MCS13TO15
+				break;
 			}
 #ifdef RTL8192C_RECONFIG_TO_1T1R
-			{
-				if (pregpriv->rx_stbc)
-					pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0100);//RX STBC One spatial stream
+			if (pregpriv->rx_stbc)
+				pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info |= cpu_to_le16(0x0100);//RX STBC One spatial stream
 
-				memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_1R, 16);
-			}
+			memcpy(pmlmeinfo->HT_caps.u.HT_cap_element.MCS_rate, MCS_rate_1R, 16);
 #endif
 			pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info = cpu_to_le16(pmlmeinfo->HT_caps.u.HT_cap_element.HT_caps_info);
 			pframe = rtw_set_ie(pframe, _HT_CAPABILITY_IE_, ie_len , (u8 *)(&(pmlmeinfo->HT_caps)), &(pattrib->pktlen));
@@ -8404,22 +8374,8 @@ void site_survey(struct rtw_adapter *pad
 		}
 	}
 
-	if (0)
-	DBG_8192D(FUNC_ADPT_FMT" ch:%u(cnt:%u,idx:%d) at %dms, %c%c%c\n"
-		, FUNC_ADPT_ARG(padapter)
-		, survey_channel
-		, pwdinfo->find_phase_state_exchange_cnt, pmlmeext->sitesurvey_res.channel_idx
-		, rtw_get_passing_time_ms(padapter->mlmepriv.scan_start_time)
-		, ScanType?'A':'P', pmlmeext->sitesurvey_res.scan_mode?'A':'P'
-		, pmlmeext->sitesurvey_res.ssid[0].SsidLength?'S':' '
-	);
-
-	if (survey_channel != 0)
-	{
+	if (survey_channel != 0) {
 		//PAUSE 4-AC Queue when site_survey
-		//rtw_hal_get_hwreg(padapter, HW_VAR_TXPAUSE, (u8 *)(&val8));
-		//val8 |= 0x0f;
-		//rtw_hal_set_hwreg(padapter, HW_VAR_TXPAUSE, (u8 *)(&val8));
 #ifdef CONFIG_CONCURRENT_MODE
 #ifdef CONFIG_STA_MODE_SCAN_UNDER_AP_MODE
 		if ((padapter->pbuddy_adapter->mlmeextpriv.mlmext_info.state&0x03) == WIFI_FW_AP_STATE)
@@ -10607,8 +10563,6 @@ int rtw_scan_ch_decision(struct rtw_adap
 	/* acquire channels from in */
 	j = 0;
 	for (i=0;i<in_num;i++) {
-		if (0)
-		DBG_8192D(FUNC_ADPT_FMT" "CHAN_FMT"\n", FUNC_ADPT_ARG(padapter), CHAN_ARG(&in[i]));
 		if (in[i].hw_value && !(in[i].flags & RTW_IEEE80211_CHAN_DISABLED)
 			&& (set_idx=rtw_ch_set_search_ch(pmlmeext->channel_set, in[i].hw_value)) >=0
 		)
--- a/drivers/staging/rtl8192du/core/rtw_pwrctrl.c
+++ b/drivers/staging/rtl8192du/core/rtw_pwrctrl.c
@@ -1131,12 +1131,7 @@ void rtw_resume_in_workqueue(struct pwrc
 {
 	// accquire system's suspend lock preventing from falliing asleep while resume in workqueue
 	rtw_lock_suspend();
-
-	#if 1
 	queue_work(pwrpriv->rtw_workqueue, &pwrpriv->resume_work);
-	#else
-	_set_workitem(&pwrpriv->resume_work);
-	#endif
 }
 #endif //CONFIG_RESUME_IN_WORKQUEUE
 
--- a/drivers/staging/rtl8192du/core/rtw_recv.c
+++ b/drivers/staging/rtl8192du/core/rtw_recv.c
@@ -2326,12 +2326,7 @@ int amsdu_to_msdu(struct rtw_adapter *pa
 					//DEBUG_ERR("RX DROP: nat25_handle_frame fail!\n");
 					//return FAIL;
 
-#if 1
 					// bypass this frame to upper layer!!
-#else
-					dev_kfree_skb_any(sub_skb);
-					continue;
-#endif
 				}
 			}
 #endif	// CONFIG_BR_EXT
--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -385,14 +385,10 @@ static void update_attrib_vcs_info(struc
 	// (2) If there are more than one frag in  this MSDU, only the first frag uses protection frame.
 	//		Other fragments are protected by previous fragment.
 	//		So we only need to check the length of first fragment.
-	if (pmlmeext->cur_wireless_mode < WIRELESS_11_24N  || padapter->registrypriv.wifi_spec)
-	{
-		if (sz > padapter->registrypriv.rts_thresh)
-		{
+	if (pmlmeext->cur_wireless_mode < WIRELESS_11_24N  || padapter->registrypriv.wifi_spec) {
+		if (sz > padapter->registrypriv.rts_thresh) {
 			pattrib->vcs_mode = RTS_CTS;
-		}
-		else
-		{
+		} else {
 			if (psta->rtsen)
 				pattrib->vcs_mode = RTS_CTS;
 			else if (psta->cts2self)
@@ -400,27 +396,8 @@ static void update_attrib_vcs_info(struc
 			else
 				pattrib->vcs_mode = NONE_VCS;
 		}
-	}
-	else
-	{
-		while (true)
-		{
-#if 0 //Todo
-			//check IOT action
-			if (pHTInfo->IOTAction & HT_IOT_ACT_FORCED_CTS2SELF)
-			{
-				pattrib->vcs_mode = CTS_TO_SELF;
-				pattrib->rts_rate = MGN_24M;
-				break;
-			}
-			else if (pHTInfo->IOTAction & (HT_IOT_ACT_FORCED_RTS|HT_IOT_ACT_PURE_N_MODE))
-			{
-				pattrib->vcs_mode = RTS_CTS;
-				pattrib->rts_rate = MGN_24M;
-				break;
-			}
-#endif
-
+	} else {
+		while (true) {
 			//IOT action
 			if ((pmlmeinfo->assoc_AP_vendor == atherosAP) && (pattrib->ampdu_en==true) &&
 				(padapter->securitypriv.dot11PrivacyAlgrthm == _AES_))
@@ -431,8 +408,7 @@ static void update_attrib_vcs_info(struc
 
 
 			//check ERP protection
-			if (psta->rtsen || psta->cts2self)
-			{
+			if (psta->rtsen || psta->cts2self) {
 				if (psta->rtsen)
 					pattrib->vcs_mode = RTS_CTS;
 				else if (psta->cts2self)
@@ -442,12 +418,10 @@ static void update_attrib_vcs_info(struc
 			}
 
 			//check HT op mode
-			if (pattrib->ht_en)
-			{
+			if (pattrib->ht_en) {
 				u8 HTOpMode = pmlmeinfo->HT_protection;
 				if ((pmlmeext->cur_bwmode && (HTOpMode == 2 || HTOpMode == 3)) ||
-					(!pmlmeext->cur_bwmode && HTOpMode == 3))
-				{
+				    (!pmlmeext->cur_bwmode && HTOpMode == 3)) {
 					pattrib->vcs_mode = RTS_CTS;
 					break;
 				}
@@ -2586,31 +2560,10 @@ int rtw_br_client_tx(struct rtw_adapter
 				*((unsigned short *)(skb->data+MACADDRLEN*2+2)) = vlan_hdr;
 			}
 		}
-#if 0
-		else {
-			if (*((unsigned short *)(skb->data+MACADDRLEN*2)) == __constant_htons(ETH_P_8021Q)) {
-				is_vlan_tag = 1;
-			}
-
-			if (is_vlan_tag) {
-				if (ICMPV6_MCAST_MAC(skb->data) && ICMPV6_PROTO1A_VALN(skb->data)) {
-                                        memcpy(skb->data+MACADDRLEN, GET_MY_HWADDR(padapter), MACADDRLEN);
-				}
-			} else
-			{
-				if (ICMPV6_MCAST_MAC(skb->data) && ICMPV6_PROTO1A(skb->data)) {
-                                        memcpy(skb->data+MACADDRLEN, GET_MY_HWADDR(padapter), MACADDRLEN);
-				}
-			}
-		}
-#endif	// 0
-
 		// check if SA is equal to our MAC
 		if (memcmp(skb->data+MACADDRLEN, GET_MY_HWADDR(padapter), MACADDRLEN)) {
-			//priv->ext_stats.tx_drops++;
 			ERR_8192D("TX DROP: untransformed frame SA:%02X%02X%02X%02X%02X%02X!\n",
 				skb->data[6],skb->data[7],skb->data[8],skb->data[9],skb->data[10],skb->data[11]);
-			//goto free_and_stop;
 			return -1;
 		}
 	}
@@ -2625,11 +2578,6 @@ static void do_queue_select(struct rtw_a
 	qsel = pattrib->priority;
 	RT_TRACE(_module_rtl871x_xmit_c_,_drv_info_,("### do_queue_select priority=%d ,qsel = %d\n",pattrib->priority ,qsel));
 
-#ifdef CONFIG_CONCURRENT_MODE
-//	if (check_fwstate(&padapter->mlmepriv, WIFI_AP_STATE) == true)
-//		qsel = 7;//
-#endif
-
 	pattrib->qsel = qsel;
 }
 
--- a/drivers/staging/rtl8192du/hal/rtl8192d_hal_init.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_hal_init.c
@@ -47,29 +47,11 @@ _IsFWDownloaded(
 	return ((rtw_read32(Adapter, REG_MCUFWDL) & MCUFWDL_RDY) ? true : false);
 }
 
-static void
-_FWDownloadEnable(
-	struct rtw_adapter *		Adapter,
-	bool			enable
-	)
+static void _FWDownloadEnable(struct rtw_adapter *Adapter, bool enable)
 {
-#if 0
-	u32	value32 = rtw_read32(Adapter, REG_MCUFWDL);
-
-	if (enable) {
-		value32 |= MCUFWDL_EN;
-	}
-	else {
-		value32 &= ~MCUFWDL_EN;
-	}
-
-	rtw_write32(Adapter, REG_MCUFWDL, value32);
-
-#else
 	u8	tmp;
 
-	if (enable)
-	{
+	if (enable) {
 		#ifdef DBG_SHOW_MCUFWDL_BEFORE_51_ENABLE
 		{
 			u8 val;
@@ -88,28 +70,16 @@ _FWDownloadEnable(
 		// 8051 reset
 		tmp = rtw_read8(Adapter, REG_MCUFWDL+2);
 		rtw_write8(Adapter, REG_MCUFWDL+2, tmp&0xf7);
-	}
-	else
-	{
+	} else {
 		// MCU firmware download enable.
 		tmp = rtw_read8(Adapter, REG_MCUFWDL);
 		rtw_write8(Adapter, REG_MCUFWDL, tmp&0xfe);
-
-		// Reserved for fw extension.   0x81[7] is used for mac0 status ,so don't write this reg here
-		//rtw_write8(Adapter, REG_MCUFWDL+1, 0x00);
 	}
-#endif
 }
 
-static int
-_BlockWrite_92d(
-		struct rtw_adapter *		Adapter,
-		void *			buffer,
-		u32				size
-	)
+static int _BlockWrite_92d(struct rtw_adapter *Adapter, void *buffer, u32 size)
 {
 	int ret = _SUCCESS;
-
 	u32			blockSize8 = sizeof(u64);
 	u32			blocksize4 = sizeof(u32);
 	u32			blockSize = 64;
@@ -127,13 +97,11 @@ _BlockWrite_92d(
 			goto exit;
 	}
 
-
 	if (remain8) {
 		offset = blockCount * blockSize;
 
 		blockCount8=remain8/blockSize8;
 		remain4=remain8%blockSize8;
-		//RT_TRACE(COMP_INIT,DBG_LOUD,("remain4 size %x blockcount %x blockCount8 %x\n",remain4,blockCount,blockCount8));
 		for (i = 0 ; i < blockCount8 ; i++) {
 			ret = rtw_writeN(Adapter, (FW_8192D_START_ADDRESS + offset+i*blockSize8), 8,(bufferPtr + offset+i*blockSize8));
 
@@ -428,13 +396,6 @@ int FirmwareDownload92D(
 			}
 			break;
 		case FW_SOURCE_HEADER_FILE:
-#if 0
-			if (ImgArrayLength > FW_8192C_SIZE) {
-				rtStatus = _FAIL;
-				//RT_TRACE(COMP_INIT, DBG_SERIOUS, ("Firmware size exceed 0x%X. Check it.\n", FW_8192C_SIZE));
-				goto Exit;
-			}
-#endif
 			pFirmware->szFwBuffer = FwImage;
 			pFirmware->ulFwLength = FwImageLen;
 #ifdef CONFIG_WOWLAN
@@ -1013,24 +974,12 @@ rtl8192d_ReadTxPowerInfo(
 		}
 	}
 
-#if 1
 	//this is suggested by Mimic, every 4 steps to redo IQK, every 7 steps to redo LCK
 	pdmpriv->Delta_IQK = 4;
 	pdmpriv->Delta_LCK = 7;
-#else
-	//temporarily close 92D re-IQK&LCK by thermal meter,advised by allen.2010-11-03
-	pHalData->Delta_IQK = 0;
-	pHalData->Delta_LCK = 0;
-#endif
-
 	if (pHalData->EEPROMC9 == 0xFF)
 		pHalData->EEPROMC9 = 0x00;
 
-	//RTPRINT(FINIT, INIT_TxPower, ("EEPROMRegulatory = 0x%x\n", pHalData->EEPROMRegulatory));
-	//RTPRINT(FINIT, INIT_TxPower, ("ThermalMeter = 0x%x\n", pHalData->EEPROMThermalMeter));
-	//RTPRINT(FINIT, INIT_TxPower, ("CrystalCap = 0x%x\n", pHalData->CrystalCap));
-	//RTPRINT(FINIT, INIT_TxPower, ("Delta_IQK = 0x%x Delta_LCK = 0x%x\n", pHalData->Delta_IQK, pHalData->Delta_LCK));
-
 	for (rfPath = 0 ; rfPath < RF_PATH_MAX ; rfPath++) {
 		for (ch = 0 ; ch < CHANNEL_MAX_NUMBER ; ch++) {
 			group = Hal_GetChnlGroupfromArray((u8)ch);
--- a/drivers/staging/rtl8192du/hal/rtl8192d_mp.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_mp.c
@@ -182,30 +182,18 @@ void Hal_SetAntenna(PADAPTER pAdapter)
 			chgTx = 1;
 
 			// From SD3 Willis suggestion !!! Set RF B as standby
-			//if (IS_HARDWARE_TYPE_8192S(pAdapter))
-			{
 			PHY_SetBBReg(pAdapter, rFPGA0_XA_HSSIParameter2, 0xe, 2);
 			PHY_SetBBReg(pAdapter, rFPGA0_XB_HSSIParameter2, 0xe, 2);
 
 			// Disable Power save
 			//cosa r_ant_select_ofdm_val = 0x3321333;
-#if 0
-			// 2008/10/31 MH From SD3 Willi's suggestion. We must read RFA 2T table.
-			if ((pHalData->VersionID == VERSION_8192S_ACUT)) // For RTL8192SU A-Cut only, by Roger, 2008.11.07.
-			{
-				mpt_RFConfigFromPreParaArrary(pAdapter, 1, RF_PATH_A);
-			}
-#endif
 			// 2009/01/08 MH From Sd3 Willis. We need to enable RFA/B by SW control
-			if (pHalData->rf_type == RF_2T2R)
-			{
+			if (pHalData->rf_type == RF_2T2R) {
 				PHY_SetBBReg(pAdapter, rFPGA0_XAB_RFInterfaceSW, BIT10, 0);
 				PHY_SetBBReg(pAdapter, rFPGA0_XAB_RFInterfaceSW, BIT26, 0);
-//				PHY_SetBBReg(pAdapter, rFPGA0_XB_RFInterfaceOE, BIT10, 0);
 				PHY_SetBBReg(pAdapter, rFPGA0_XAB_RFParameter, BIT1, 1);
 				PHY_SetBBReg(pAdapter, rFPGA0_XAB_RFParameter, BIT17, 1);
 			}
-			}
 			break;
 
 		default:
@@ -464,17 +452,9 @@ u8 Hal_ReadRFThermalMeter(PADAPTER pAdap
 
 void Hal_GetThermalMeter(PADAPTER pAdapter, u8 *value)
 {
-#if 0
-	fw_cmd(pAdapter, IOCMD_GET_THERMAL_METER);
-	rtw_msleep_os(1000);
-	fw_cmd_data(pAdapter, value, 1);
-	*value &= 0xFF;
-#else
-
 	Hal_TriggerRFThermalMeter(pAdapter);
 	rtw_msleep_os(1000);
 	*value = Hal_ReadRFThermalMeter(pAdapter);
-#endif
 }
 
 void Hal_SetTxPower (PADAPTER pAdapter)
@@ -1051,7 +1031,6 @@ void
 
 		for (i = 0; i < RF_REG_NUM_for_C_CUT_5G; i++)
 		{
-#if 1
 			if (i == 0 && (pHalData->MacPhyMode92D == DUALMAC_DUALPHY))
 			{
 				PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, bRFRegOffsetMask, 0xE439D);
@@ -1074,16 +1053,6 @@ void
 			{
 				PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, bRFRegOffsetMask, RF_REG_Param_for_C_CUT_5G[index][i]);
 			}
-#else
-			if (i == 0 && (pHalData->MacPhyMode92D == DUALMAC_DUALPHY))
-				PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_5G[i], RF_REG_MASK_for_C_CUT_5G[i], 0xE439D);
-			else
-				PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_5G[i], RF_REG_MASK_for_C_CUT_5G[i], RF_REG_Param_for_C_CUT_5G[index][i]);
-#endif
-			//RT_TRACE(COMP_RF, DBG_TRACE, ("phy_SwitchRfSetting8192D offset 0x%x value 0x%x path %d index %d readback 0x%x\n",
-			//	RF_REG_for_C_CUT_5G[i], RF_REG_Param_for_C_CUT_5G[index][i], path,	index,
-			//	PHY_QueryRFReg(Adapter,  path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, bRFRegOffsetMask)));
-
 		}
 
 		if (pHalData->MacPhyMode92D == DUALMAC_DUALPHY && pHalData->interfaceIndex == 1)
@@ -1183,25 +1152,16 @@ void
 
 		for (i = 0; i < RF_REG_NUM_for_C_CUT_2G; i++)
 		{
-#if 1
 #if SWLCK == 1
 			if (RF_REG_for_C_CUT_2G[i] == RF_SYN_G7)
 				PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask, (RF_REG_Param_for_C_CUT_2G[index][i] | BIT17));
 			else
 #endif
 			PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask, RF_REG_Param_for_C_CUT_2G[index][i]);
-#else
-			PHY_SetRFReg(Adapter, path, RF_REG_for_C_CUT_2G[i], RF_REG_MASK_for_C_CUT_2G[i], RF_REG_Param_for_C_CUT_2G[index][i]);
-#endif
-			//RT_TRACE(COMP_RF, DBG_TRACE, ("phy_SwitchRfSetting8192D offset 0x%x value 0x%x mak 0x%x path %d index %d readback 0x%x\n",
-			//	RF_REG_for_C_CUT_2G[i], RF_REG_Param_for_C_CUT_2G[index][i], RF_REG_MASK_for_C_CUT_2G[i], path,  index,
-			//	PHY_QueryRFReg(Adapter,  path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask)));
 		}
 
 #if SWLCK == 1
 		//for SWLCK
-		//RT_DISP(FINIT, INIT_IQK, ("ver 3 set RF-B, 2G, 0x28 = 0x%x !!\n", RF_REG_SYN_G4_for_C_CUT_2G | (u4tmp << 11)));
-
 		PHY_SetRFReg(Adapter, path, RF_SYN_G4|MaskforPhySet, bRFRegOffsetMask, RF_REG_SYN_G4_for_C_CUT_2G | (u4tmp << 11));
 #endif
 
@@ -1238,35 +1198,6 @@ void Hal_mpt_SwitchRfSetting(PADAPTER pA
     bool             bInteralPA = false;
     u32				value = 0;
     phy_SwitchRfSetting8192D(pAdapter,ChannelToSw);
-#if 0
-	if (((ulRateIdx == MPT_RATE_1M || ulRateIdx == MPT_RATE_6M || ulRateIdx == MPT_RATE_MCS0 ||
-        ulRateIdx == MPT_RATE_MCS8) && ulbandwidth == HT_CHANNEL_WIDTH_20 &&
-        (ChannelToSw == 1 || ChannelToSw == 11)) ||
-        ((ulRateIdx == MPT_RATE_MCS0 ||ulRateIdx == MPT_RATE_MCS8) &&
-        ulbandwidth == HT_CHANNEL_WIDTH_40 &&
-        (ChannelToSw == 3 || ChannelToSw == 9)))
-
-    {
-        value = 0x294a5;
-    }
-    else
-    {
-        value = 0x18c63;
-    }
-
-
-    for (eRFPath = 0; eRFPath <pHalData->NumTotalRFPath; eRFPath++)
-    {
-        if (pHalData->MacPhyMode92D == DUALMAC_DUALPHY &&
-            pHalData->interfaceIndex == 1)      //MAC 1 5G
-            bInteralPA = pHalData->InternalPA5G[1];
-        else
-            bInteralPA = pHalData->InternalPA5G[eRFPath];
-
-        if (!bInteralPA ||  pHalData->CurrentBandType92D==BAND_ON_2_4G)
-		_write_rfreg(pAdapter, (RF_RADIO_PATH_E)eRFPath, 0x03, bRFRegOffsetMask, value);
-    }
- #endif
 }
 
 void Hal_SetBandwidth(PADAPTER pAdapter)
@@ -1365,12 +1296,6 @@ void MPT_CCKTxPowerAdjust(PADAPTER Adapt
 
 void Hal_SetChannel(PADAPTER pAdapter)
 {
-#if 0
-	struct mp_priv *pmp = &pAdapter->mppriv;
-
-//	SelectChannel(pAdapter, pmp->channel);
-	set_channel_bwmode(pAdapter, pmp->channel, pmp->channel_offset, pmp->bandwidth);
-#else
 	u8		eRFPath;
 
 	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(pAdapter);
@@ -1401,8 +1326,6 @@ void Hal_SetChannel(PADAPTER pAdapter)
 		pHalData->dmpriv.bCCKinCH14 = false;
 		MPT_CCKTxPowerAdjust(pAdapter, pHalData->dmpriv.bCCKinCH14);
 	}
-
-#endif
 }
 
 
@@ -1561,28 +1484,7 @@ void Hal_SetCCKContinuousTx(PADAPTER pAd
 		write_bbreg(pAdapter, rOFDM1_LSTF, bOFDMSingleCarrier, bDisable);
 		write_bbreg(pAdapter, rOFDM1_LSTF, bOFDMSingleTone, bDisable);
 		//Set CCK Tx Test Rate
-		#if 0
-		switch (pAdapter->mppriv.rateidx)
-		{
-			case 2:
-				cckrate = 0;
-				break;
-			case 4:
-				cckrate = 1;
-				break;
-			case 11:
-				cckrate = 2;
-				break;
-			case 22:
-				cckrate = 3;
-				break;
-			default:
-				cckrate = 0;
-				break;
-		}
-		#else
 		cckrate  = pAdapter->mppriv.rateidx;
-		#endif
 		write_bbreg(pAdapter, rCCK0_System, bCCKTxRate, cckrate);
 		write_bbreg(pAdapter, rCCK0_System, bCCKBBMode, 0x2);	//transmit mode
 		write_bbreg(pAdapter, rCCK0_System, bCCKScramble, bEnable); //turn on scramble setting
--- a/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
@@ -2799,7 +2799,6 @@ PHY_RestoreRFENV(
 
 		for (i = 0; i < RF_REG_NUM_for_C_CUT_5G; i++)
 		{
-#if 1
 			if (i == 0 && (pHalData->MacPhyMode92D == DUALMAC_DUALPHY))
 			{
 				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, bRFRegOffsetMask, 0xE439D);
@@ -2817,36 +2816,19 @@ PHY_RestoreRFENV(
 				u4tmp2= RF_REG_Param_for_C_CUT_5G[index][i];
 				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, 0xFF8FF, u4tmp2);
 #endif
-			}
-			else
-			{
+			} else {
 				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_5G[i]|MaskforPhySet, bRFRegOffsetMask, RF_REG_Param_for_C_CUT_5G[index][i]);
 			}
-#else
-			if (i == 0 && (pHalData->MacPhyMode92D == DUALMAC_DUALPHY))
-				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_5G[i], RF_REG_MASK_for_C_CUT_5G[i], 0xE439D);
-			else
-				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_5G[i], RF_REG_MASK_for_C_CUT_5G[i], RF_REG_Param_for_C_CUT_5G[index][i]);
-#endif
-			//RT_TRACE(COMP_RF, DBG_TRACE, ("phy_SwitchRfSetting offset 0x%x value 0x%x path %d index %d readback 0x%x\n",
-			//	RF_REG_for_C_CUT_5G[i], RF_REG_Param_for_C_CUT_5G[index][i], path,  index,
-			//	PHY_QueryRFReg(Adapter, (enum RF_RADIO_PATH_E) path, RF_REG_for_C_CUT_5G[i]|MaskforPhyAccess, bRFRegOffsetMask)));
 		}
-		if (pHalData->MacPhyMode92D == DUALMAC_DUALPHY && pHalData->interfaceIndex == 1)
-		{
+		if (pHalData->MacPhyMode92D == DUALMAC_DUALPHY && pHalData->interfaceIndex == 1) {
 			if (bNeedPowerDownRadio)
-			{
 				PHY_RestoreRFENV(Adapter, path,MaskforPhySet, &u4RegValue);
-			}
 			rtl8192d_PHY_PowerDownAnotherPHY(Adapter, false);
 		}
 
-		if (Regb30 && pHalData->interfaceIndex == 0)
-		{
+		if (Regb30 && pHalData->interfaceIndex == 0) {
 			if (bNeedPowerDownRadio)
-			{
 				PHY_RestoreRFENV(Adapter, path,MaskforPhySet, &u4RegValue);
-			}
 			rtl8192d_PHY_PowerDownAnotherPHY(Adapter, true);
 		}
 
@@ -2928,24 +2910,16 @@ PHY_RestoreRFENV(
 
 		for (i = 0; i < RF_REG_NUM_for_C_CUT_2G; i++)
 		{
-#if 1
 #if SWLCK == 1
 			if (RF_REG_for_C_CUT_2G[i] == RF_SYN_G7)
 				PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask, (RF_REG_Param_for_C_CUT_2G[index][i] | BIT17));
 			else
 #endif
 			PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask, RF_REG_Param_for_C_CUT_2G[index][i]);
-#else
-			PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_REG_for_C_CUT_2G[i], RF_REG_MASK_for_C_CUT_2G[i], RF_REG_Param_for_C_CUT_2G[index][i]);
-#endif
-			//RT_TRACE(COMP_RF, DBG_TRACE, ("phy_SwitchRfSetting offset 0x%x value 0x%x mak 0x%x path %d index %d readback 0x%x\n",
-			//	RF_REG_for_C_CUT_2G[i], RF_REG_Param_for_C_CUT_2G[index][i], RF_REG_MASK_for_C_CUT_2G[i], path,  index,
-			//	PHY_QueryRFReg(Adapter, (enum RF_RADIO_PATH_E) path, RF_REG_for_C_CUT_2G[i]|MaskforPhySet, bRFRegOffsetMask)));
 		}
 
 #if SWLCK == 1
 		//for SWLCK
-		//RTPRINT(FINIT, INIT_IQK, ("cosa ver 3 set RF-B, 2G, 0x28 = 0x%x !!\n", RF_REG_SYN_G4_for_C_CUT_2G | (u4tmp << 11)));
 
 		PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)path, RF_SYN_G4|MaskforPhySet, bRFRegOffsetMask, RF_REG_SYN_G4_for_C_CUT_2G | (u4tmp << 11));
 #endif
@@ -3267,9 +3241,6 @@ static void _PHY_SwChnl8192D(struct rtw_
 		param2 = channel;
 		for (eRFPath = 0; eRFPath <pHalData->NumTotalRFPath; eRFPath++)
 		{
-#if 1
-			//pHalData->RfRegChnlVal[eRFPath] = PHY_QueryRFReg(Adapter, (enum RF_RADIO_PATH_E)eRFPath, RF_CHNLBW, bRFRegOffsetMask);
-			// & 0xFFFFFC00 just for 2.4G. So for 5G band,bit[9:8]= 1. we change this setting for 5G. by wl
 			pHalData->RfRegChnlVal[eRFPath] = ((pHalData->RfRegChnlVal[eRFPath] & 0xffffff00) | param2);
 			if (pHalData->CurrentBandType92D == BAND_ON_5G)
 			{
@@ -3288,10 +3259,6 @@ static void _PHY_SwChnl8192D(struct rtw_
 				pHalData->RfRegChnlVal[eRFPath] &= ~(BIT8|BIT16|BIT18);
 			}
 			PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)eRFPath, param1, bRFRegOffsetMask, pHalData->RfRegChnlVal[eRFPath]);
-#else
-			PHY_SetRFReg(Adapter, (enum RF_RADIO_PATH_E)eRFPath, param1, bRFRegOffsetMask, param2);
-#endif
-
 			phy_ReloadIMRSetting(Adapter, channel, eRFPath);
 		}
 
@@ -5294,14 +5261,12 @@ phy_IQCalibrate_5G_Normal(
 		else
 			phy_ReloadADDARegisters(pAdapter, IQK_BB_REG, pdmpriv->IQK_BB_backup, IQK_BB_REG_NUM_92D-1);
 
-#if 1
 		//path A IQ path to DP block
 		PHY_SetBBReg(pAdapter, rPdp_AntA, bMaskDWord, 0x010170b8);
 
 		//path B IQ path to DP block
 		if (is2T)
 			PHY_SetBBReg(pAdapter, rPdp_AntB, bMaskDWord, 0x010170b8);
-#endif
 
 		// Reload MAC parameters
 		phy_ReloadMACRegisters(pAdapter, IQK_MAC_REG, pdmpriv->IQK_MAC_backup);
@@ -5313,13 +5278,7 @@ phy_IQCalibrate_5G_Normal(
 
 		// Reload ADDA power saving parameters
 		phy_ReloadADDARegisters(pAdapter, ADDA_REG, pdmpriv->ADDA_backup, IQK_ADDA_REG_NUM);
-
-		//load 0xe30 IQC default value
-		//PHY_SetBBReg(pAdapter, 0xe30, bMaskDWord, 0x01008c00);
-		//PHY_SetBBReg(pAdapter, 0xe34, bMaskDWord, 0x01008c00);
-
 	}
-	//RTPRINT(FINIT, INIT_IQK, ("_PHY_IQCalibrate_5G_Normal() <==\n"));
 }
 
 #if SWLCK != 1
@@ -5469,7 +5428,6 @@ phy_CalcCurvIndex(
 				pre_channel = channel;
 		}
 
-#if 1
 		bBase = false;
 
 		for (j = start_base; j < end_base; j++)
@@ -5483,14 +5441,7 @@ phy_CalcCurvIndex(
 			}
 			else if (channel < Base_chnl[j] || j == end_base-1)
 			{
-#if 1
 				base_index = CurveIndex[GetRightChnlPlace(pre_channel)-1];
-#else
-				if (j > start_base && channel < Base_chnl[j])
-					base_index = CurveIndex[GetRightChnlPlace(Base_chnl[j-1])-1];
-				else
-					base_index = CurveIndex[GetRightChnlPlace(Base_chnl[j])-1];
-#endif
 
 				if (base_index > 5)
 					base_index -= 5;	//search -5~5, not every 128
@@ -5500,10 +5451,8 @@ phy_CalcCurvIndex(
 				break;
 			}
 		}
-#endif
 
 		CurveIndex[i] = 0;
-#if 1
 		for (j=base_index; j<base_index+search_bound; j++)
 		{
 			u4tmp = get_abs(TargetChnl[channel-1], CurveCountVal[j]);
@@ -5514,12 +5463,8 @@ phy_CalcCurvIndex(
 				smallestABSVal = u4tmp;
 			}
 		}
-#endif
 
 		smallestABSVal = 0xffffffff;
-		//if (i == 0)
-		//	RTPRINT(FINIT, INIT_IQK,("cosa, CurveIndex[%d] = %d channel %d\n", i, CurveIndex[i], index));
-		//RTPRINT(FINIT, INIT_IQK,("CurveIndex[%d] = 0x%x channel %d base_index 0x%x\n", i, CurveIndex[i], channel, base_index));
 	}
 }
 
@@ -5992,40 +5937,30 @@ phy_APCalibrate(
 			delta_offset = 12;
 
 		//AP calibration
-		for (index = 0; index < APK_BB_REG_NUM; index++)
-		{
+		for (index = 0; index < APK_BB_REG_NUM; index++) {
 			if (index != 1)	//only DO PA11+PAD01001, AP RF setting
 				continue;
 
 			tmpReg = APK_RF_init_value[path][index];
-#if 1
-			if (!pdmpriv->bAPKThermalMeterIgnore)
-			{
+			if (!pdmpriv->bAPKThermalMeterIgnore) {
 				BB_offset = (tmpReg & 0xF0000) >> 16;
 
 				if (!(tmpReg & BIT15)) //sign bit 0
-				{
 					BB_offset = -BB_offset;
-				}
 
 				delta_V = APK_delta_mapping[index][delta_offset];
 
 				BB_offset += delta_V;
 
-				//RTPRINT(FINIT, INIT_IQK, ("PHY_APCalibrate() APK index %d tmpReg 0x%x delta_V %d delta_offset %d\n", index, tmpReg, delta_V, delta_offset));
 
-				if (BB_offset < 0)
-				{
+				if (BB_offset < 0) {
 					tmpReg = tmpReg & (~BIT15);
 					BB_offset = -BB_offset;
-				}
-				else
-				{
+				} else {
 					tmpReg = tmpReg | BIT15;
 				}
 				tmpReg = (tmpReg & 0xFFF0FFFF) | (BB_offset << 16);
 			}
-#endif
 
 				PHY_SetRFReg(pAdapter, (enum RF_RADIO_PATH_E)path, RF_IPA_A, bRFRegOffsetMask, 0x8992e);
 			PHY_SetRFReg(pAdapter, (enum RF_RADIO_PATH_E)path, RF_AC, bRFRegOffsetMask, APK_RF_value_0[path][index]);
@@ -6033,20 +5968,17 @@ phy_APCalibrate(
 
 			// PA11+PAD01111, one shot
 			i = 0;
-			do
-			{
+			do {
 				PHY_SetBBReg(pAdapter, rFPGA0_IQK, bMaskDWord, 0x80000000);
-				{
-					PHY_SetBBReg(pAdapter, APK_offset[path], bMaskDWord, APK_value[0]);
-					rtw_mdelay_os(3);
-					PHY_SetBBReg(pAdapter, APK_offset[path], bMaskDWord, APK_value[1]);
+				PHY_SetBBReg(pAdapter, APK_offset[path], bMaskDWord, APK_value[0]);
+				rtw_mdelay_os(3);
+				PHY_SetBBReg(pAdapter, APK_offset[path], bMaskDWord, APK_value[1]);
 
-					rtw_mdelay_os(20);
-				}
+				rtw_mdelay_os(20);
 				PHY_SetBBReg(pAdapter, rFPGA0_IQK, bMaskDWord, 0x00000000);
 
 				if (path == RF_PATH_A)
-					tmpReg = PHY_QueryBBReg(pAdapter, rAPK, 0x03E00000);
+				tmpReg = PHY_QueryBBReg(pAdapter, rAPK, 0x03E00000);
 				else
 					tmpReg = PHY_QueryBBReg(pAdapter, rAPK, 0xF8000000);
 				//RTPRINT(FINIT, INIT_IQK, ("PHY_APCalibrate() offset 0xbd8[25:21] %x\n", tmpReg));
@@ -6626,35 +6558,24 @@ PHY_UpdateBBRFConfiguration8192D(
 
 		}
 
-#if 1
-		if ((pHalData->interfaceIndex == 0 && pHalData->BandSet92D == BAND_ON_2_4G)
-			|| (pHalData->interfaceIndex == 1 && pHalData->BandSet92D == BAND_ON_5G))
-		{
+		if ((pHalData->interfaceIndex == 0 && pHalData->BandSet92D == BAND_ON_2_4G) ||
+		    (pHalData->interfaceIndex == 1 && pHalData->BandSet92D == BAND_ON_5G)) {
 			//Set right channel on RF reg0x18 for another mac.
 			if (pHalData->interfaceIndex == 0) //set MAC1 default channel if MAC1 not up.
 			{
-				if (!(rtw_read8(Adapter, REG_MAC1)&MAC1_ON))
-				{
+				if (!(rtw_read8(Adapter, REG_MAC1)&MAC1_ON)) {
 					rtl8192d_PHY_EnableAnotherPHY(Adapter, true);
 					PHY_SetRFReg(Adapter, RF_PATH_A, RF_CHNLBW|MAC0_ACCESS_PHY1, bRFRegOffsetMask, 0x97524); //set channel 36
-					//DBG_8192D("PHY_UpdateBBRFConfiguration8192D(),MAC0 set MAC1 RF0x18:%x.\n",PHY_QueryRFReg(Adapter,RF_PATH_A,RF_CHNLBW|MAC0_ACCESS_PHY1,bRFRegOffsetMask));
 					rtl8192d_PHY_PowerDownAnotherPHY(Adapter, true);
 				}
-			}
-			else
-			if (pHalData->interfaceIndex == 1)//set MAC0 default channel
-			{
-				if (!(rtw_read8(Adapter, REG_MAC0)&MAC0_ON))
-				{
+			} else if (pHalData->interfaceIndex == 1) { //set MAC0 default channel
+				if (!(rtw_read8(Adapter, REG_MAC0)&MAC0_ON)) {
 					rtl8192d_PHY_EnableAnotherPHY(Adapter, false);
 					PHY_SetRFReg(Adapter, RF_PATH_A, RF_CHNLBW|MAC1_ACCESS_PHY0, bRFRegOffsetMask, 0x87401); // set channel 1
-					//DBG_8192D("PHY_UpdateBBRFConfiguration8192D(),MAC1 set MAC0 RF0x18:%x.\n",PHY_QueryRFReg(Adapter,RF_PATH_A,RF_CHNLBW|MAC1_ACCESS_PHY0,bRFRegOffsetMask));
 					rtl8192d_PHY_PowerDownAnotherPHY(Adapter, false);
 				}
 			}
 		}
-#endif
-
 	}
 
 	//Update for all band.
--- a/drivers/staging/rtl8192du/hal/rtl8192du_xmit.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192du_xmit.c
@@ -324,16 +324,6 @@ if (padapter->registrypriv.mp_mode == 0)
 			//use REG_INIDATA_RATE_SEL value
 			ptxdesc->txdw5 |= cpu_to_le32(pdmpriv->INIDATA_RATE[pattrib->mac_id]);
 
-		if (0)//for driver dbg
-			{
-				ptxdesc->txdw4 |= cpu_to_le32(BIT(8));//driver uses rate
-
-				if (pattrib->ht_en)
-					ptxdesc->txdw5 |= cpu_to_le32(BIT(6));//SGI
-
-				ptxdesc->txdw5 |= cpu_to_le32(0x00000013);//init rate - mcs7
-			}
-
 		}
 		else
 		{
--- a/drivers/staging/rtl8192du/hal/usb_halinit.c
+++ b/drivers/staging/rtl8192du/hal/usb_halinit.c
@@ -1377,8 +1377,7 @@ _InitUsbAggregationSetting(
 	u8		valueDMA;
 	u8		valueUSB;
 
-	if (pHalData->MacPhyMode92D!=SINGLEMAC_SINGLEPHY)
-	{
+	if (pHalData->MacPhyMode92D!=SINGLEMAC_SINGLEPHY) {
 		pHalData->UsbRxAggPageCount	= 24;
 		pHalData->UsbRxAggPageTimeout = 0x6;
 	}
@@ -1386,32 +1385,29 @@ _InitUsbAggregationSetting(
 	valueDMA = rtw_read8(Adapter, REG_TRXDMA_CTRL);
 	valueUSB = rtw_read8(Adapter, REG_USB_SPECIAL_OPTION);
 
-	switch (pHalData->UsbRxAggMode)
-	{
-		case USB_RX_AGG_DMA:
-			valueDMA |= RXDMA_AGG_EN;
-			valueUSB &= ~USB_AGG_EN;
-			break;
-		case USB_RX_AGG_USB:
-			valueDMA &= ~RXDMA_AGG_EN;
-			valueUSB |= USB_AGG_EN;
-			break;
-		case USB_RX_AGG_DMA_USB:
-			valueDMA |= RXDMA_AGG_EN;
-			valueUSB |= USB_AGG_EN;
-			break;
-		case USB_RX_AGG_DISABLE:
-		default:
-			valueDMA &= ~RXDMA_AGG_EN;
-			valueUSB &= ~USB_AGG_EN;
-			break;
+	switch (pHalData->UsbRxAggMode) {
+	case USB_RX_AGG_DMA:
+		valueDMA |= RXDMA_AGG_EN;
+		valueUSB &= ~USB_AGG_EN;
+		break;
+	case USB_RX_AGG_USB:
+		valueDMA &= ~RXDMA_AGG_EN;
+		valueUSB |= USB_AGG_EN;
+		break;
+	case USB_RX_AGG_DMA_USB:
+		valueDMA |= RXDMA_AGG_EN;
+		valueUSB |= USB_AGG_EN;
+		break;
+	case USB_RX_AGG_DISABLE:
+	default:
+		valueDMA &= ~RXDMA_AGG_EN;
+		valueUSB &= ~USB_AGG_EN;
+		break;
 	}
 
 	rtw_write8(Adapter, REG_TRXDMA_CTRL, valueDMA);
 	rtw_write8(Adapter, REG_USB_SPECIAL_OPTION, valueUSB);
-#if 1
-	switch (pHalData->UsbRxAggMode)
-	{
+	switch (pHalData->UsbRxAggMode) {
 		case USB_RX_AGG_DMA:
 			rtw_write8(Adapter, REG_RXDMA_AGG_PG_TH, pHalData->UsbRxAggPageCount);
 			rtw_write8(Adapter, REG_USB_DMA_AGG_TO, pHalData->UsbRxAggPageTimeout);
@@ -1431,7 +1427,6 @@ _InitUsbAggregationSetting(
 			// TODO:
 			break;
 	}
-#endif
 	switch (PBP_128)
 	{
 		case PBP_128:
@@ -1471,82 +1466,61 @@ _InitOperationMode(
 	//
 	// Set RRSR, RATR, and REG_BWOPMODE registers
 	//
-	switch (pHalData->CurrentWirelessMode)
-	{
-		case WIRELESS_MODE_B:
-			regBwOpMode = BW_OPMODE_20MHZ;
-			regRATR = RATE_ALL_CCK;
-			regRRSR = RATE_ALL_CCK;
-			break;
-		case WIRELESS_MODE_A:
-			//RT_ASSERT(FALSE,("Error wireless a mode\n"));
-#if 1
-			regBwOpMode = BW_OPMODE_5G |BW_OPMODE_20MHZ;
-			regRATR = RATE_ALL_OFDM_AG;
-			regRRSR = RATE_ALL_OFDM_AG;
-#endif
-			break;
-		case WIRELESS_MODE_G:
-			regBwOpMode = BW_OPMODE_20MHZ;
-			regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
+	switch (pHalData->CurrentWirelessMode) {
+	case WIRELESS_MODE_B:
+		regBwOpMode = BW_OPMODE_20MHZ;
+		regRATR = RATE_ALL_CCK;
+		regRRSR = RATE_ALL_CCK;
+		break;
+	case WIRELESS_MODE_A:
+		//RT_ASSERT(FALSE,("Error wireless a mode\n"));
+		regBwOpMode = BW_OPMODE_5G |BW_OPMODE_20MHZ;
+		regRATR = RATE_ALL_OFDM_AG;
+		regRRSR = RATE_ALL_OFDM_AG;
+		break;
+	case WIRELESS_MODE_G:
+		regBwOpMode = BW_OPMODE_20MHZ;
+		regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
+		regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
+		break;
+	case WIRELESS_MODE_UNKNOWN:
+	case WIRELESS_MODE_AUTO:
+		regBwOpMode = BW_OPMODE_20MHZ;
+		regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
+		regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
+		break;
+	case WIRELESS_MODE_N_24G:
+		// It support CCK rate by default.
+		// CCK rate will be filtered out only when associated AP does not support it.
+		regBwOpMode = BW_OPMODE_20MHZ;
+			regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
 			regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
-			break;
-		case WIRELESS_MODE_UNKNOWN:
-		case WIRELESS_MODE_AUTO:
-			//if (pHalData->bInHctTest)
-			if (0)
-			{
-			    regBwOpMode = BW_OPMODE_20MHZ;
-			    regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
-			    regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
-			}
-			else
-			{
-			    regBwOpMode = BW_OPMODE_20MHZ;
-			    regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
-			    regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
-			}
-			break;
-		case WIRELESS_MODE_N_24G:
-			// It support CCK rate by default.
-			// CCK rate will be filtered out only when associated AP does not support it.
-			regBwOpMode = BW_OPMODE_20MHZ;
-				regRATR = RATE_ALL_CCK | RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
-				regRRSR = RATE_ALL_CCK | RATE_ALL_OFDM_AG;
-			break;
-		case WIRELESS_MODE_N_5G:
-			//RT_ASSERT(FALSE,("Error wireless mode"));
-#if 1
-			regBwOpMode = BW_OPMODE_5G;
-			regRATR = RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
-			regRRSR = RATE_ALL_OFDM_AG;
-#endif
-			break;
+		break;
+	case WIRELESS_MODE_N_5G:
+		regBwOpMode = BW_OPMODE_5G;
+		regRATR = RATE_ALL_OFDM_AG | RATE_ALL_OFDM_1SS | RATE_ALL_OFDM_2SS;
+		regRRSR = RATE_ALL_OFDM_AG;
+		break;
 	}
 
 	// Ziv ????????
-	//rtw_write32(Adapter, REG_INIRTS_RATE_SEL, regRRSR);
 	rtw_write8(Adapter, REG_BWOPMODE, regBwOpMode);
 
 	// For Min Spacing configuration.
-	switch (pHalData->rf_type)
-	{
-		case RF_1T2R:
-		case RF_1T1R:
-			//RT_TRACE(COMP_INIT, DBG_LOUD, ("Initializeadapter: RF_Type%s\n", (pHalData->RF_Type==RF_1T1R? "(1T1R)":"(1T2R)")));
-			MinSpaceCfg = (MAX_MSS_DENSITY_1T<<3);
-			break;
-		case RF_2T2R:
-		case RF_2T2R_GREEN:
-			//RT_TRACE(COMP_INIT, DBG_LOUD, ("Initializeadapter:RF_Type(2T2R)\n"));
-			MinSpaceCfg = (MAX_MSS_DENSITY_2T<<3);
-			break;
+	switch (pHalData->rf_type) {
+	case RF_1T2R:
+	case RF_1T1R:
+		MinSpaceCfg = (MAX_MSS_DENSITY_1T<<3);
+		break;
+	case RF_2T2R:
+	case RF_2T2R_GREEN:
+		MinSpaceCfg = (MAX_MSS_DENSITY_2T<<3);
+		break;
 	}
 
 	rtw_write8(Adapter, REG_AMPDU_MIN_SPACE, MinSpaceCfg);
 }
 
-
 static void
 _InitSecuritySetting(
 	struct rtw_adapter * Adapter
@@ -4561,18 +4535,7 @@ _func_enter_;
 			rtw_write8(Adapter, REG_TXPAUSE, *((u8 *)val));
 			break;
 		case HW_VAR_BCN_FUNC:
-#if 1
 			hw_var_set_bcn_func(Adapter, variable, val);
-#else
-			if (*((u8 *)val))
-			{
-				rtw_write8(Adapter, REG_BCN_CTRL, (EN_BCN_FUNCTION | EN_TXBCN_RPT));
-			}
-			else
-			{
-				rtw_write8(Adapter, REG_BCN_CTRL, rtw_read8(Adapter, REG_BCN_CTRL)&(~(EN_BCN_FUNCTION | EN_TXBCN_RPT)));
-			}
-#endif
 			break;
 		case HW_VAR_CORRECT_TSF:
 #ifdef CONFIG_CONCURRENT_MODE
--- a/drivers/staging/rtl8192du/include/rtw_mp_ioctl.h
+++ b/drivers/staging/rtl8192du/include/rtw_mp_ioctl.h
@@ -386,16 +386,6 @@ struct rfintfs_parm {
 	u32 rfintfs;
 };
 
-#if 0
-struct mp_xmit_parm {
-	u8 enable;
-	u32 count;
-	u16 length;
-	u8 payload_type;
-	u8 da[ETH_ALEN];
-};
-#endif
-
 struct mp_xmit_packet {
 	u32 len;
 	u32 mem[MAX_MP_XMITBUF_SZ >> 2];
--- a/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
@@ -418,16 +418,8 @@ static int rtw_cfg80211_inform_bss(_adap
 	//#endif
 
 
-#if 1
 	bss = cfg80211_inform_bss_frame(wiphy, notify_channel, (struct ieee80211_mgmt *)buf,
 		len, notify_signal, GFP_ATOMIC);
-#else
-
-	bss = cfg80211_inform_bss(wiphy, notify_channel, (const u8 *)pnetwork->network.MacAddress,
-                notify_timestamp, notify_capability, notify_interval, notify_ie,
-                notify_ielen, notify_signal, GFP_ATOMIC/*GFP_KERNEL*/);
-#endif
-
 	if (unlikely(!bss)) {
 		DBG_8192C("rtw_cfg80211_inform_bss error\n");
 		return -EINVAL;
@@ -3449,20 +3441,10 @@ static int cfg80211_rtw_start_ap(struct
 		struct wlan_bssid_ex *pbss_network = &adapter->mlmepriv.cur_network.network;
 		struct wlan_bssid_ex *pbss_network_ext = &adapter->mlmeextpriv.mlmext_info.network;
 
-		if (0)
-		DBG_871X(FUNC_ADPT_FMT" ssid:(%s,%d), from ie:(%s,%d)\n", FUNC_ADPT_ARG(adapter),
-			settings->ssid, settings->ssid_len,
-			pbss_network->Ssid.Ssid, pbss_network->Ssid.SsidLength);
-
 		memcpy(pbss_network->Ssid.Ssid, (void *)settings->ssid, settings->ssid_len);
 		pbss_network->Ssid.SsidLength = settings->ssid_len;
 		memcpy(pbss_network_ext->Ssid.Ssid, (void *)settings->ssid, settings->ssid_len);
 		pbss_network_ext->Ssid.SsidLength = settings->ssid_len;
-
-		if (0)
-		DBG_871X(FUNC_ADPT_FMT" after ssid:(%s,%d), (%s,%d)\n", FUNC_ADPT_ARG(adapter),
-			pbss_network->Ssid.Ssid, pbss_network->Ssid.SsidLength,
-			pbss_network_ext->Ssid.Ssid, pbss_network_ext->Ssid.SsidLength);
 	}
 
 	return ret;
--- a/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
@@ -5232,26 +5232,12 @@ static int rtw_p2p_set_sa(struct net_dev
 
 	DBG_8192D("[%s] data = %s\n", __func__, extra);
 
-	if (0)
-	{
-		DBG_8192D("[%s] WiFi Direct is disable!\n", __func__);
-		return ret;
-	}
+	if (extra[ 0 ] == '0')	//	Disable the session available.
+		pwdinfo->session_available = false;
+	else if (extra[ 0 ] == '1')	//	Enable the session available.
+		pwdinfo->session_available = true;
 	else
-	{
-		if (extra[ 0 ] == '0')	//	Disable the session available.
-		{
-			pwdinfo->session_available = false;
-		}
-		else if (extra[ 0 ] == '1')	//	Enable the session available.
-		{
-			pwdinfo->session_available = true;
-		}
-		else
-		{
-			pwdinfo->session_available = false;
-		}
-	}
+		pwdinfo->session_available = false;
 	DBG_8192D("[%s] session available = %d\n", __func__, pwdinfo->session_available);
 
 exit:
@@ -6375,22 +6361,18 @@ static int rtw_dbg_port(struct net_devic
 #endif // CONFIG_P2P
 						break;
 					}
-#if 1
 				case 0xdd://registers dump , 0 for mac reg,1 for bb reg, 2 for rf reg
-					{
-						if (extra_arg==0) {
-							mac_reg_dump(padapter);
-						}
-						else if (extra_arg==1) {
-							bb_reg_dump(padapter);
-						}
-						else if (extra_arg==2) {
-							rf_reg_dump(padapter);
-						}
-
+					if (extra_arg==0) {
+						mac_reg_dump(padapter);
 					}
+					else if (extra_arg==1) {
+						bb_reg_dump(padapter);
+					}
+					else if (extra_arg==2) {
+						rf_reg_dump(padapter);
+					}
+
 					break;
-#endif
 				case 0xee://turn on/off dynamic funcs
 					{
 						u8 dm_flag;
@@ -7543,21 +7525,11 @@ static int rtw_set_hidden_ssid(struct ne
 		memcpy(ssid, ssid_ie+2, ssid_len);
 		ssid[ssid_len>NDIS_802_11_LENGTH_SSID?NDIS_802_11_LENGTH_SSID:ssid_len] = 0x0;
 
-		if (0)
-		DBG_8192D(FUNC_ADPT_FMT" ssid:(%s,%d), from ie:(%s,%d), (%s,%d)\n", FUNC_ADPT_ARG(adapter),
-			ssid, ssid_len,
-			pbss_network->Ssid.Ssid, pbss_network->Ssid.SsidLength,
-			pbss_network_ext->Ssid.Ssid, pbss_network_ext->Ssid.SsidLength);
-
 		memcpy(pbss_network->Ssid.Ssid, (void *)ssid, ssid_len);
 		pbss_network->Ssid.SsidLength = ssid_len;
 		memcpy(pbss_network_ext->Ssid.Ssid, (void *)ssid, ssid_len);
 		pbss_network_ext->Ssid.SsidLength = ssid_len;
 
-		if (0)
-		DBG_8192D(FUNC_ADPT_FMT" after ssid:(%s,%d), (%s,%d)\n", FUNC_ADPT_ARG(adapter),
-			pbss_network->Ssid.Ssid, pbss_network->Ssid.SsidLength,
-			pbss_network_ext->Ssid.Ssid, pbss_network_ext->Ssid.SsidLength);
 	}
 
 	DBG_8192D(FUNC_ADPT_FMT" ignore_broadcast_ssid:%d, %s,%d\n", FUNC_ADPT_ARG(adapter),
--- a/drivers/staging/rtl8192du/os_dep/os_intfs.c
+++ b/drivers/staging/rtl8192du/os_dep/os_intfs.c
@@ -1671,15 +1671,11 @@ _adapter *rtw_drv_add_vir_if (struct rtw
 		mac[3] = 0x87;
 		mac[4] = 0x11;
 		mac[5] = 0x22;
-	}
-	else
-	{
+	} else {
 		/* If the BIT1 is 0, the address is universally administered. */
 		/* If it is 1, the address is locally administered */
-#if 1 /* needs enable MBSSID CAM */
 		mac[0] |= BIT(1); /*  locally administered */
 		mac[0] |= (padapter->iface_id-1)<<4;
-#endif
 	}
 
 	memcpy(padapter->eeprompriv.mac_addr, mac, ETH_ALEN);
--- a/drivers/staging/rtl8192du/os_dep/osdep_service.c
+++ b/drivers/staging/rtl8192du/os_dep/osdep_service.c
@@ -853,8 +853,6 @@ bool rtw_cbuf_push(struct rtw_cbuf *cbuf
 	if (rtw_cbuf_full(cbuf))
 		return _FAIL;
 
-	if (0)
-		DBG_8192D("%s on %u\n", __func__, cbuf->write);
 	cbuf->bufs[cbuf->write] = buf;
 	cbuf->write = (cbuf->write+1)%cbuf->size;
 
@@ -874,8 +872,6 @@ void *rtw_cbuf_pop(struct rtw_cbuf *cbuf
 	if (rtw_cbuf_empty(cbuf))
 		return NULL;
 
-	if (0)
-		DBG_8192D("%s on %u\n", __func__, cbuf->read);
 	buf = cbuf->bufs[cbuf->read];
 	cbuf->read = (cbuf->read+1)%cbuf->size;
 
--- a/drivers/staging/rtl8192du/os_dep/recv_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/recv_linux.c
@@ -330,31 +330,13 @@ _func_enter_;
 	rcu_read_unlock();
 #endif  // (LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 35))
 
-	if (br_port	&& (check_fwstate(pmlmepriv, WIFI_STATION_STATE|WIFI_ADHOC_STATE) == true))
-	{
-		int nat25_handle_frame(struct rtw_adapter *priv, struct sk_buff *skb);
-		if (nat25_handle_frame(padapter, skb) == -1) {
-			//priv->ext_stats.rx_data_drops++;
-			//DEBUG_ERR("RX DROP: nat25_handle_frame fail!\n");
-			//return FAIL;
-#if 1
-			// bypass this frame to upper layer!!
-#else
-			goto _recv_indicatepkt_drop;
-#endif
-		}
-	}
-
 #endif	// CONFIG_BR_EXT
 
-
 #ifdef CONFIG_TCP_CSUM_OFFLOAD_RX
 	if ((pattrib->tcpchk_valid == 1) && (pattrib->tcp_chkrpt == 1)) {
 		skb->ip_summed = CHECKSUM_UNNECESSARY;
-		//DBG_871X("CHECKSUM_UNNECESSARY\n");
 	} else {
 		skb->ip_summed = CHECKSUM_NONE;
-		//DBG_871X("CHECKSUM_NONE(%d, %d)\n", pattrib->tcpchk_valid, pattrib->tcp_chkrpt);
 	}
 #else /* !CONFIG_TCP_CSUM_OFFLOAD_RX */
 
--- a/drivers/staging/rtl8192du/os_dep/usb_intf.c
+++ b/drivers/staging/rtl8192du/os_dep/usb_intf.c
@@ -329,93 +329,35 @@ _func_enter_;
 
 
 	pdev_desc = &pusbd->descriptor;
-#if 0
-	DBG_8192D("\n8712_usb_device_descriptor:\n");
-	DBG_8192D("bLength=%x\n", pdev_desc->bLength);
-	DBG_8192D("bDescriptorType=%x\n", pdev_desc->bDescriptorType);
-	DBG_8192D("bcdUSB=%x\n", pdev_desc->bcdUSB);
-	DBG_8192D("bDeviceClass=%x\n", pdev_desc->bDeviceClass);
-	DBG_8192D("bDeviceSubClass=%x\n", pdev_desc->bDeviceSubClass);
-	DBG_8192D("bDeviceProtocol=%x\n", pdev_desc->bDeviceProtocol);
-	DBG_8192D("bMaxPacketSize0=%x\n", pdev_desc->bMaxPacketSize0);
-	DBG_8192D("idVendor=%x\n", pdev_desc->idVendor);
-	DBG_8192D("idProduct=%x\n", pdev_desc->idProduct);
-	DBG_8192D("bcdDevice=%x\n", pdev_desc->bcdDevice);
-	DBG_8192D("iManufacturer=%x\n", pdev_desc->iManufacturer);
-	DBG_8192D("iProduct=%x\n", pdev_desc->iProduct);
-	DBG_8192D("iSerialNumber=%x\n", pdev_desc->iSerialNumber);
-	DBG_8192D("bNumConfigurations=%x\n", pdev_desc->bNumConfigurations);
-#endif
-
 	phost_conf = pusbd->actconfig;
 	pconf_desc = &phost_conf->desc;
 
-#if 0
-	DBG_8192D("\n8712_usb_configuration_descriptor:\n");
-	DBG_8192D("bLength=%x\n", pconf_desc->bLength);
-	DBG_8192D("bDescriptorType=%x\n", pconf_desc->bDescriptorType);
-	DBG_8192D("wTotalLength=%x\n", pconf_desc->wTotalLength);
-	DBG_8192D("bNumInterfaces=%x\n", pconf_desc->bNumInterfaces);
-	DBG_8192D("bConfigurationValue=%x\n", pconf_desc->bConfigurationValue);
-	DBG_8192D("iConfiguration=%x\n", pconf_desc->iConfiguration);
-	DBG_8192D("bmAttributes=%x\n", pconf_desc->bmAttributes);
-	DBG_8192D("bMaxPower=%x\n", pconf_desc->bMaxPower);
-#endif
-
-	//DBG_8192D("\n/****** num of altsetting = (%d) ******/\n", usb_intf->num_altsetting);
-
 	phost_iface = &usb_intf->altsetting[0];
 	piface_desc = &phost_iface->desc;
 
-#if 0
-	DBG_8192D("\n8712_usb_interface_descriptor:\n");
-	DBG_8192D("bLength=%x\n", piface_desc->bLength);
-	DBG_8192D("bDescriptorType=%x\n", piface_desc->bDescriptorType);
-	DBG_8192D("bInterfaceNumber=%x\n", piface_desc->bInterfaceNumber);
-	DBG_8192D("bAlternateSetting=%x\n", piface_desc->bAlternateSetting);
-	DBG_8192D("bNumEndpoints=%x\n", piface_desc->bNumEndpoints);
-	DBG_8192D("bInterfaceClass=%x\n", piface_desc->bInterfaceClass);
-	DBG_8192D("bInterfaceSubClass=%x\n", piface_desc->bInterfaceSubClass);
-	DBG_8192D("bInterfaceProtocol=%x\n", piface_desc->bInterfaceProtocol);
-	DBG_8192D("iInterface=%x\n", piface_desc->iInterface);
-#endif
-
 	pdvobjpriv->NumInterfaces = pconf_desc->bNumInterfaces;
 	pdvobjpriv->InterfaceNumber = piface_desc->bInterfaceNumber;
 	pdvobjpriv->nr_endpoint = piface_desc->bNumEndpoints;
 
-	//DBG_8192D("\ndump usb_endpoint_descriptor:\n");
-
-	for (i = 0; i < pdvobjpriv->nr_endpoint; i++)
-	{
+	for (i = 0; i < pdvobjpriv->nr_endpoint; i++) {
 		phost_endp = phost_iface->endpoint + i;
-		if (phost_endp)
-		{
+		if (phost_endp) {
 			pendp_desc = &phost_endp->desc;
 
 			DBG_8192D("\nusb_endpoint_descriptor(%d):\n", i);
 			DBG_8192D("bLength=%x\n",pendp_desc->bLength);
 			DBG_8192D("bDescriptorType=%x\n",pendp_desc->bDescriptorType);
 			DBG_8192D("bEndpointAddress=%x\n",pendp_desc->bEndpointAddress);
-			//DBG_8192D("bmAttributes=%x\n",pendp_desc->bmAttributes);
-			//DBG_8192D("wMaxPacketSize=%x\n",pendp_desc->wMaxPacketSize);
 			DBG_8192D("wMaxPacketSize=%x\n",le16_to_cpu(pendp_desc->wMaxPacketSize));
 			DBG_8192D("bInterval=%x\n",pendp_desc->bInterval);
-			//DBG_8192D("bRefresh=%x\n",pendp_desc->bRefresh);
-			//DBG_8192D("bSynchAddress=%x\n",pendp_desc->bSynchAddress);
 
-			if (RT_usb_endpoint_is_bulk_in(pendp_desc))
-			{
+			if (RT_usb_endpoint_is_bulk_in(pendp_desc)) {
 				DBG_8192D("RT_usb_endpoint_is_bulk_in = %x\n", RT_usb_endpoint_num(pendp_desc));
 				pdvobjpriv->RtNumInPipes++;
-			}
-			else if (RT_usb_endpoint_is_int_in(pendp_desc))
-			{
+			} else if (RT_usb_endpoint_is_int_in(pendp_desc)) {
 				DBG_8192D("RT_usb_endpoint_is_int_in = %x, Interval = %x\n", RT_usb_endpoint_num(pendp_desc),pendp_desc->bInterval);
 				pdvobjpriv->RtNumInPipes++;
-			}
-			else if (RT_usb_endpoint_is_bulk_out(pendp_desc))
-			{
+			} else if (RT_usb_endpoint_is_bulk_out(pendp_desc)) {
 				DBG_8192D("RT_usb_endpoint_is_bulk_out = %x\n", RT_usb_endpoint_num(pendp_desc));
 				pdvobjpriv->RtNumOutPipes++;
 			}
@@ -445,8 +387,6 @@ _func_enter_;
 
 	usb_get_dev(pusbd);
 
-	//DBG_8192D("%s %d\n", __func__, ATOMIC_READ(&usb_intf->dev.kobj.kref.refcount));
-
 	status = _SUCCESS;
 
 free_dvobj:
--- a/drivers/staging/rtl8192du/os_dep/usb_ops_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/usb_ops_linux.c
@@ -505,37 +505,15 @@ _func_enter_;
 
 	purb	= pxmitbuf->pxmit_urb[0];
 
-#if 0
-	if (pdvobj->ishighspeed)
-	{
-		if (cnt> 0 && cnt%512 == 0)
-		{
-			//DBG_8192D("ishighspeed, cnt=%d\n", cnt);
-			bwritezero = true;
-		}
-	}
-	else
-	{
-		if (cnt > 0 && cnt%64 == 0)
-		{
-			//DBG_8192D("cnt=%d\n", cnt);
-			bwritezero = true;
-		}
-	}
-#endif
-
 	//translate DMA FIFO addr to pipehandle
 	pipe = ffaddr2pipehdl(pdvobj, addr);
 
 #ifdef CONFIG_REDUCE_USB_TX_INT
-	if ((pxmitpriv->free_xmitbuf_cnt%NR_XMITBUFF == 0)
-		|| (pxmitbuf->ext_tag == true))
-	{
+	if ((pxmitpriv->free_xmitbuf_cnt%NR_XMITBUFF == 0) ||
+	    (pxmitbuf->ext_tag == true))
 		purb->transfer_flags  &=  (~URB_NO_INTERRUPT);
-	} else {
+	else
 		purb->transfer_flags  |=  URB_NO_INTERRUPT;
-		//DBG_8192D("URB_NO_INTERRUPT ");
-	}
 #endif
 
 
@@ -551,13 +529,6 @@ _func_enter_;
 	purb->transfer_flags |= URB_ZERO_PACKET;
 #endif	// CONFIG_USE_USB_BUFFER_ALLOC_TX
 
-#if 0
-	if (bwritezero)
-        {
-            purb->transfer_flags |= URB_ZERO_PACKET;
-        }
-#endif
-
 	status = usb_submit_urb(purb, GFP_ATOMIC);
 	if (!status) {
 		#ifdef DBG_CONFIG_ERROR_DETECT
--- a/drivers/staging/rtl8192du/os_dep/xmit_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/xmit_linux.c
@@ -103,19 +103,12 @@ void rtw_set_tx_chksum_offload(struct sk
                                 //skb_checksum_help(skb);
                         } else if (ip->protocol == IPPROTO_UDP) {
                                 //DBG_8192D("CHECKSUM_PARTIAL UDP\n");
-#if 1
                                 skb_checksum_help(skb);
-#else
-                                // Set UDP checksum = 0 to skip checksum check
-                                struct udphdr *udp = skb_transport_header(skb);
-                                udp->check = 0;
-#endif
                         } else {
 				DBG_8192D("%s-%d TCP CSUM offload Error!!\n", __func__, __LINE__);
                                 WARN_ON(1);     /* we need a WARN() */
 			    }
-		}
-		else { // IP fragmentation case
+		} else { // IP fragmentation case
 			DBG_8192D("%s-%d nr_frags != 0, using skb_checksum_help(skb);!!\n", __func__, __LINE__);
 			skb_checksum_help(skb);
 		}
