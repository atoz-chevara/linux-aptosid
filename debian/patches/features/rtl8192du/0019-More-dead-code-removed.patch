From 4a68a6ce9692248134218ea2749d5b067e7274c1 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 15:57:58 -0500
Subject: [PATCH 019/390] More dead code removed

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 hal/usb_halinit.c    | 23 +----------------------
 include/generic.h    | 29 +----------------------------
 include/rtw_cmd.h    | 12 ------------
 include/rtw_mlme.h   | 31 -------------------------------
 include/xmit_osdep.h | 32 --------------------------------
 5 files changed, 2 insertions(+), 125 deletions(-)

--- a/drivers/staging/rtl8192du/hal/usb_halinit.c
+++ b/drivers/staging/rtl8192du/hal/usb_halinit.c
@@ -27,19 +27,6 @@
 
 #include <rtl8192d_hal.h>
 #include <rtl8192d_led.h>
-
-#if defined (PLATFORM_LINUX) && defined (PLATFORM_WINDOWS)
-
-#error "Shall be Linux or Windows, but not both!\n"
-
-#endif
-
-#ifndef CONFIG_USB_HCI
-
-#error "CONFIG_USB_HCI shall be on!\n"
-
-#endif
-
 #include <usb_ops.h>
 #include <usb_hal.h>
 #include <usb_osintf.h>
@@ -705,7 +692,6 @@ static u8 _LLTWrite(
 
 }
 
-#ifndef PLATFORM_FREEBSD //amy,temp remove
 static u8 _LLTRead(
 	IN  PADAPTER	Adapter,
 	IN	u32		address
@@ -733,7 +719,6 @@ static u8 _LLTRead(
 	return 0xFF;
 
 }
-#endif //amy,temp remove
 
 static u8 InitLLTTable(
 	IN  PADAPTER	Adapter,
@@ -792,7 +777,6 @@ static u8 InitLLTTable(
 
 }
 
-#ifndef PLATFORM_FREEBSD //amy,temp remove
 //---------------------------------------------------------------
 //
 //	MAC init functions
@@ -829,7 +813,6 @@ _SetBSSID(
 		rtw_write32(Adapter, REG_BSSID+i, BSSID[i]);
 	}
 }
-#endif //amy,temp remove
 
 // Shall USB interface init this?
 static VOID
@@ -2438,7 +2421,6 @@ n. LEDCFG 0x4C[15:0] = 0x8080
 	//RT_TRACE(COMP_INIT, DBG_LOUD, ("======> Disable GPIO and LED.\n"));
 
 } //end of _DisableGPIO()
-#ifndef PLATFORM_FREEBSD //amy, temp remove
 static VOID
 _ResetFWDownloadRegister(
 	IN PADAPTER			Adapter
@@ -2449,7 +2431,6 @@ _ResetFWDownloadRegister(
 	value32 = rtw_read32(Adapter, REG_MCUFWDL);
 	value32 &= ~(MCUFWDL_EN | MCUFWDL_RDY);
 	rtw_write32(Adapter, REG_MCUFWDL, value32);
-	//RT_TRACE(COMP_INIT, DBG_LOUD, ("Reset FW download register.\n"));
 }
 
 
@@ -2574,7 +2555,7 @@ _SetUsbSuspend(
 	//RT_TRACE(COMP_INIT, DBG_LOUD, ("Set USB suspend.\n"));
 
 }
-#endif //amy, temp remove
+
 static VOID
 _DisableRFAFEAndResetBB8192D(
 	IN PADAPTER			Adapter
@@ -2757,7 +2738,6 @@ i.	APS_FSMCO 0x04[15:0] = 0x4802		// set
 	//RT_TRACE(COMP_INIT, DBG_LOUD, ("======> Disable Analog Reg0x04:0x%04x.\n",value16));
 }
 
-#ifndef PLATFORM_FREEBSD //amy, temp remove
 static BOOLEAN
 CanGotoPowerOff92D(
 	IN	PADAPTER			Adapter
@@ -2821,7 +2801,6 @@ CanGotoPowerOff92D(
 	}
 	return _TRUE;
 }
-#endif //amy, temp remove
 
 static int
 CardDisableHWSM( // HW Auto state machine
--- a/drivers/staging/rtl8192du/include/generic.h
+++ b/drivers/staging/rtl8192du/include/generic.h
@@ -98,7 +98,6 @@
  */
 
 
-#if defined(PLATFORM_LINUX) || defined(PLATFORM_WINDOWS) || defined(PLATFORM_MPIXEL) || defined(PLATFORM_FREEBSD)
 /*
  * inside the kernel, we can use nicknames;
  * outside of it, we must avoid POSIX namespace pollution...
@@ -139,7 +138,6 @@
 #define be32_to_cpus __be32_to_cpus
 #define cpu_to_be16s __cpu_to_be16s
 #define be16_to_cpus __be16_to_cpus
-#endif
 
 
 /*
@@ -165,48 +163,23 @@
  * Do the prototypes. Somebody might want to take the
  * address or some such sick thing..
  */
-#if defined(PLATFORM_LINUX) || (defined (__GLIBC__) && __GLIBC__ >= 2)
 extern __u32			ntohl(__u32);
 extern __u32			htonl(__u32);
-#else //defined(PLATFORM_LINUX) || (defined (__GLIBC__) && __GLIBC__ >= 2)
-#ifndef PLATFORM_FREEBSD
-extern unsigned long int	ntohl(unsigned long int);
-extern unsigned long int	htonl(unsigned long int);
-#endif
-#endif
-#ifndef PLATFORM_FREEBSD
 extern unsigned short int	ntohs(unsigned short int);
 extern unsigned short int	htons(unsigned short int);
-#endif
 
-#if defined(__GNUC__) && (__GNUC__ >= 2) && defined(__OPTIMIZE__) ||  defined(PLATFORM_MPIXEL)
+#if defined(__GNUC__) && (__GNUC__ >= 2) && defined(__OPTIMIZE__)
 
 #define ___htonl(x) __cpu_to_be32(x)
 #define ___htons(x) __cpu_to_be16(x)
 #define ___ntohl(x) __be32_to_cpu(x)
 #define ___ntohs(x) __be16_to_cpu(x)
 
-#if defined(PLATFORM_LINUX) || (defined (__GLIBC__) && __GLIBC__ >= 2)
 #define htonl(x) ___htonl(x)
 #define ntohl(x) ___ntohl(x)
-#else
-#define htonl(x) ((unsigned long)___htonl(x))
-#define ntohl(x) ((unsigned long)___ntohl(x))
-#endif
 #define htons(x) ___htons(x)
 #define ntohs(x) ___ntohs(x)
 
 #endif /* OPTIMIZE */
 
-
-#if defined (PLATFORM_WINDOWS)
-
-#define htonl(x) __cpu_to_be32(x)
-#define ntohl(x) __be32_to_cpu(x)
-#define htons(x) __cpu_to_be16(x)
-#define ntohs(x) __be16_to_cpu(x)
-
-
-#endif
-
 #endif /* _LINUX_BYTEORDER_GENERIC_H */
--- a/drivers/staging/rtl8192du/include/rtw_cmd.h
+++ b/drivers/staging/rtl8192du/include/rtw_cmd.h
@@ -39,11 +39,7 @@
 	#define MAX_RSPSZ	512
 	#define MAX_EVTSZ	1024
 
-#ifdef PLATFORM_OS_CE
-	#define CMDBUFF_ALIGN_SZ 4
-#else
 	#define CMDBUFF_ALIGN_SZ 512
-#endif
 
 	struct cmd_obj {
 		_adapter *padapter;
@@ -109,14 +105,6 @@
 		u8	*evt_buf;	//shall be non-paged, and 4 bytes aligned
 		u8	*evt_allocated_buf;
 		u32	evt_done_cnt;
-#ifdef CONFIG_SDIO_HCI
-		u8	*c2h_mem;
-		u8	*allocated_c2h_mem;
-#ifdef PLATFORM_OS_XP
-		PMDL	pc2h_mdl;
-#endif
-#endif
-
 	};
 
 #define init_h2fwcmd_w_parm_no_rsp(pcmd, pparm, code) \
--- a/drivers/staging/rtl8192du/include/rtw_mlme.h
+++ b/drivers/staging/rtl8192du/include/rtw_mlme.h
@@ -538,12 +538,6 @@ struct mlme_priv {
 
 #endif
 
-#ifdef RTK_DMP_PLATFORM
-	// DMP kobject_hotplug function  signal need in passive level
-	_workitem	Linkup_workitem;
-	_workitem	Linkdown_workitem;
-#endif
-
 #ifdef CONFIG_INTEL_WIDI
 	int	widi_state;
 	int	listen_state;
@@ -587,37 +581,12 @@ extern void rtw_stadel_event_callback(_a
 extern void rtw_atimdone_event_callback(_adapter *adapter, u8 *pbuf);
 extern void rtw_cpwm_event_callback(_adapter *adapter, u8 *pbuf);
 
-#ifdef PLATFORM_WINDOWS
-extern thread_return event_thread(void *context);
-
-extern void rtw_join_timeout_handler (
-	IN	PVOID					SystemSpecific1,
-	IN	PVOID					FunctionContext,
-	IN	PVOID					SystemSpecific2,
-	IN	PVOID					SystemSpecific3
-	);
-
-extern void _rtw_scan_timeout_handler (
-	IN	PVOID					SystemSpecific1,
-	IN	PVOID					FunctionContext,
-	IN	PVOID					SystemSpecific2,
-	IN	PVOID					SystemSpecific3
-	);
-
-#endif
-
-#if defined (PLATFORM_LINUX)|| defined (PLATFORM_FREEBSD)
 extern int event_thread(void *context);
 extern void rtw_join_timeout_handler(void* FunctionContext);
 extern void _rtw_scan_timeout_handler(void* FunctionContext);
-#endif
-
 extern void rtw_free_network_queue(_adapter *adapter,u8 isfreeall);
 extern int rtw_init_mlme_priv(_adapter *adapter);// (struct mlme_priv *pmlmepriv);
-
 extern void rtw_free_mlme_priv (struct mlme_priv *pmlmepriv);
-
-
 extern sint rtw_select_and_join_from_scanned_queue(struct mlme_priv *pmlmepriv);
 extern sint rtw_set_key(_adapter *adapter,struct security_priv *psecuritypriv,sint keyid, u8 set_tx);
 extern sint rtw_set_auth(_adapter *adapter,struct security_priv *psecuritypriv);
--- a/drivers/staging/rtl8192du/include/xmit_osdep.h
+++ b/drivers/staging/rtl8192du/include/xmit_osdep.h
@@ -33,36 +33,6 @@ struct pkt_file {
 	SIZE_T buf_len;
 };
 
-#ifdef PLATFORM_WINDOWS
-
-#ifdef PLATFORM_OS_XP
-#ifdef CONFIG_USB_HCI
-#include <usb.h>
-#include <usbdlib.h>
-#include <usbioctl.h>
-#endif
-#endif
-
-#define NR_XMITFRAME     128
-
-#define ETH_ALEN	6
-
-extern NDIS_STATUS rtw_xmit_entry(
-IN _nic_hdl		cnxt,
-IN NDIS_PACKET		*pkt,
-IN UINT				flags
-);
-
-#endif
-
-#ifdef PLATFORM_FREEBSD
-#define NR_XMITFRAME	256
-extern int rtw_xmit_entry(_pkt *pkt, _nic_hdl pnetdev);
-extern void rtw_xmit_entry_wrap (struct ifnet * pifp);
-#endif //PLATFORM_FREEBSD
-
-#ifdef PLATFORM_LINUX
-
 #define NR_XMITFRAME	256
 
 struct xmit_priv;
@@ -73,8 +43,6 @@ struct xmit_buf;
 
 extern int rtw_xmit_entry(_pkt *pkt, _nic_hdl pnetdev);
 
-#endif
-
 void rtw_os_xmit_schedule(_adapter *padapter);
 
 int rtw_os_xmit_resource_alloc(_adapter *padapter, struct xmit_buf *pxmitbuf,u32 alloc_sz);
