From 9e9cd8c57d6984cbdfc981cd98e8255a254852a7 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sat, 27 Apr 2013 22:08:22 -0500
Subject: [PATCH 072/210] Remove typedef statements from rtw_led.h

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_cmd.c       |  2 +-
 hal/rtl8192du_led.c  | 77 ++++++++++++++++++++++++----------------------------
 include/rtw_cmd.h    |  4 +--
 include/rtw_led.h    | 26 +++++++++---------
 os_dep/rtw_android.c | 30 ++++++++++----------
 5 files changed, 65 insertions(+), 74 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_cmd.c
+++ b/drivers/staging/rtl8192du/core/rtw_cmd.c
@@ -1785,7 +1785,7 @@ _func_exit_;
 	return res;
 }
 
-u8 rtw_led_blink_cmd(_adapter*padapter, PLED_871x pLed)
+u8 rtw_led_blink_cmd(_adapter*padapter, struct LED_871X *pLed)
 {
 	struct	cmd_obj*	pcmdobj;
 	struct	LedBlink_param *ledBlink_param;
--- a/drivers/staging/rtl8192du/hal/rtl8192du_led.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192du_led.c
@@ -58,7 +58,7 @@ BlinkWorkItemCallback(
 	);
 
 static void
-ResetLedStatus(PLED_871x	pLed) {
+ResetLedStatus(struct LED_871X *	pLed) {
 	pLed->CurrLedState = RTW_LED_OFF; // Current LED state.
 	pLed->bLedOn = false; // true if LED is ON, false if LED is OFF.
 
@@ -78,11 +78,11 @@ ResetLedStatus(PLED_871x	pLed) {
 
 //
 //	Description:
-//		Initialize an LED_871x object.
+//		Initialize an struct LED_871X object.
 //
 
 void InitLed871x(_adapter *padapter,
-	PLED_871x		pLed,
+	struct LED_871X *		pLed,
 	enum LED_PIN_871X	LedPin
 	)
 {
@@ -105,16 +105,16 @@ void InitLed871x(_adapter *padapter,
 
 //
 //	Description:
-//		DeInitialize an LED_871x object.
+//		DeInitialize an struct LED_871X object.
 //
 
 void
 DeInitLed871x(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 DeInitLed871x(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	//call _cancel_workitem_sync(&(pLed->BlinkWorkItem))
@@ -136,12 +136,12 @@ DeInitLed871x(
 void
 SwLedOn(
 	_adapter			*padapter,
-	PLED_871x		pLed
+	struct LED_871X *		pLed
 );
 void
 SwLedOn(
 	_adapter			*padapter,
-	PLED_871x		pLed
+	struct LED_871X *		pLed
 )
 {
 	u8	LedCfg;
@@ -188,12 +188,12 @@ SwLedOn(
 void
 SwLedOff(
 	_adapter			*padapter,
-	PLED_871x		pLed
+	struct LED_871X *		pLed
 );
 void
 SwLedOff(
 	_adapter			*padapter,
-	PLED_871x		pLed
+	struct LED_871X *		pLed
 )
 {
 	u8	LedCfg;
@@ -241,11 +241,11 @@ SwLedOff(
 //
 void
 SwLedBlink(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter			*padapter = pLed->padapter;
@@ -361,18 +361,18 @@ SwLedBlink(
 }
 void
 SwLedBlink1(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink1(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter				*padapter = pLed->padapter;
 	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(padapter);
 	struct led_priv		*ledpriv = &(padapter->ledpriv);
 	struct mlme_priv		*pmlmepriv = &(padapter->mlmepriv);
-	PLED_871x			pLed1 = &(ledpriv->SwLed1);
+	struct LED_871X *			pLed1 = &(ledpriv->SwLed1);
 	u8					bStopBlinking = false;
 
 	if(pHalData->CustomerID == RT_CID_819x_CAMEO)
@@ -592,11 +592,11 @@ SwLedBlink1(
 }
 void
 SwLedBlink2(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink2(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter				*padapter = pLed->padapter;
@@ -717,11 +717,11 @@ SwLedBlink2(
 }
 void
 SwLedBlink3(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink3(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter			*padapter = pLed->padapter;
@@ -890,16 +890,16 @@ SwLedBlink3(
 }
 void
 SwLedBlink4(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink4(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter			*padapter = pLed->padapter;
 	struct led_priv	*ledpriv = &(padapter->ledpriv);
-	PLED_871x		pLed1 = &(ledpriv->SwLed1);
+	struct LED_871X *		pLed1 = &(ledpriv->SwLed1);
 	u8				bStopBlinking = false;
 
 	// Change LED according to BlinkingLedState specified.
@@ -1091,11 +1091,11 @@ SwLedBlink4(
 }
 void
 SwLedBlink5(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	);
 void
 SwLedBlink5(
-	PLED_871x			pLed
+	struct LED_871X *			pLed
 	)
 {
 	_adapter			*padapter = pLed->padapter;
@@ -1220,7 +1220,7 @@ BlinkTimerCallback(
 	unsigned long data
 	)
 {
-	PLED_871x	 pLed = (PLED_871x)data;
+	struct LED_871X *	 pLed = (struct LED_871X *)data;
 	_adapter		*padapter = pLed->padapter;
 
 	 if( (padapter->bSurpriseRemoved == true) || ( padapter->bDriverStopped == true))
@@ -1239,7 +1239,7 @@ BlinkTimerCallback(
 //
 void BlinkWorkItemCallback(struct work_struct *work)
 {
-	PLED_871x	 pLed = container_of(work, LED_871x, BlinkWorkItem);
+	struct LED_871X *	 pLed = container_of(work, struct LED_871X, BlinkWorkItem);
 	struct led_priv	*ledpriv = &(pLed->padapter->ledpriv);
 	_adapter		*padapter = pLed->padapter;
 
@@ -1302,7 +1302,7 @@ SwLedControlMode0(
 )
 {
 	struct led_priv	*ledpriv = &(padapter->ledpriv);
-	PLED_871x	pLed = &(ledpriv->SwLed1);
+	struct LED_871X *	pLed = &(ledpriv->SwLed1);
 
 	// Decide led state
 	switch(LedAction)
@@ -1425,7 +1425,7 @@ SwLedControlMode1(
 {
 	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(padapter);
 	struct led_priv		*ledpriv = &(padapter->ledpriv);
-	PLED_871x			pLed = &(ledpriv->SwLed0);
+	struct LED_871X *			pLed = &(ledpriv->SwLed0);
 	struct mlme_priv		*pmlmepriv = &(padapter->mlmepriv);
 
 	if(pHalData->CustomerID == RT_CID_819x_CAMEO)
@@ -1701,7 +1701,7 @@ SwLedControlMode2(
 {
 	struct led_priv	 *ledpriv = &(padapter->ledpriv);
 	struct mlme_priv	*pmlmepriv = &padapter->mlmepriv;
-	PLED_871x		pLed = &(ledpriv->SwLed0);
+	struct LED_871X *		pLed = &(ledpriv->SwLed0);
 
 	switch(LedAction)
 	{
@@ -1871,7 +1871,7 @@ SwLedControlMode2(
 {
 	struct led_priv	*ledpriv = &(padapter->ledpriv);
 	struct mlme_priv	*pmlmepriv = &padapter->mlmepriv;
-	PLED_871x		pLed = &(ledpriv->SwLed0);
+	struct LED_871X *		pLed = &(ledpriv->SwLed0);
 
 	switch(LedAction)
 	{
@@ -2055,8 +2055,8 @@ SwLedControlMode4(
 {
 	struct led_priv	*ledpriv = &(padapter->ledpriv);
 	struct mlme_priv	*pmlmepriv = &padapter->mlmepriv;
-	PLED_871x		pLed = &(ledpriv->SwLed0);
-	PLED_871x		pLed1 = &(ledpriv->SwLed1);
+	struct LED_871X *		pLed = &(ledpriv->SwLed0);
+	struct LED_871X *		pLed1 = &(ledpriv->SwLed1);
 
 	switch(LedAction)
 	{
@@ -2393,7 +2393,7 @@ SwLedControlMode5(
 	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(padapter);
 	struct led_priv	*ledpriv = &(padapter->ledpriv);
 	struct mlme_priv	*pmlmepriv = &padapter->mlmepriv;
-	PLED_871x		pLed = &(ledpriv->SwLed0);
+	struct LED_871X *		pLed = &(ledpriv->SwLed0);
 
 	if(pHalData->EEPROMCustomerID == RT_CID_819x_CAMEO)
 		pLed = &(ledpriv->SwLed1);
@@ -2551,16 +2551,9 @@ LedControl871x(
 
 //
 //	Description:
-//		Initialize all LED_871x objects.
+//		Initialize all struct LED_871X objects.
 //
-void
-rtl8192du_InitSwLeds(
-	_adapter	*padapter
-	);
-void
-rtl8192du_InitSwLeds(
-	_adapter	*padapter
-	)
+void rtl8192du_InitSwLeds(_adapter	*padapter)
 {
 	struct led_priv *pledpriv = &(padapter->ledpriv);
 
--- a/drivers/staging/rtl8192du/include/rtw_cmd.h
+++ b/drivers/staging/rtl8192du/include/rtw_cmd.h
@@ -870,7 +870,7 @@ struct SetChannelPlan_param
 /*H2C Handler index: 60 */
 struct LedBlink_param
 {
-	PLED_871x	 pLed;
+	struct LED_871X	*pLed;
 };
 
 /*H2C Handler index: 61 */
@@ -955,7 +955,7 @@ u8 rtw_chk_hi_queue_cmd(_adapter*padapte
 
 u8 rtw_set_ch_cmd(_adapter*padapter, u8 ch, u8 bw, u8 ch_offset, u8 enqueue);
 extern u8 rtw_set_chplan_cmd(_adapter*padapter, u8 chplan, u8 enqueue);
-extern u8 rtw_led_blink_cmd(_adapter*padapter, PLED_871x pLed);
+extern u8 rtw_led_blink_cmd(_adapter*padapter, struct LED_871X *pLed);
 extern u8 rtw_set_csa_cmd(_adapter*padapter, u8 new_ch_no);
 extern u8 rtw_tdls_cmd(_adapter*padapter, u8 *addr, u8 option);
 
--- a/drivers/staging/rtl8192du/include/rtw_led.h
+++ b/drivers/staging/rtl8192du/include/rtw_led.h
@@ -63,12 +63,12 @@ enum LED_STATE_871X {
 	LED_BLINK_WPS_STOP_OVERLAP = 12,	//for BELKIN
 };
 
-#define IS_LED_WPS_BLINKING(_LED_871x)	(((PLED_871x)_LED_871x)->CurrLedState==LED_BLINK_WPS \
-					|| ((PLED_871x)_LED_871x)->CurrLedState==LED_BLINK_WPS_STOP \
-					|| ((PLED_871x)_LED_871x)->bLedWPSBlinkInProgress)
+#define IS_LED_WPS_BLINKING(_LED_871X)	(((struct LED_871X *)_LED_871X)->CurrLedState==LED_BLINK_WPS \
+					|| ((struct LED_871X *)_LED_871X)->CurrLedState==LED_BLINK_WPS_STOP \
+					|| ((struct LED_871X *)_LED_871X)->bLedWPSBlinkInProgress)
 
-#define IS_LED_BLINKING(_LED_871x)	(((PLED_871x)_LED_871x)->bLedWPSBlinkInProgress \
-					||((PLED_871x)_LED_871x)->bLedScanBlinkInProgress)
+#define IS_LED_BLINKING(_LED_871X)	(((struct LED_871X *)_LED_871X)->bLedWPSBlinkInProgress \
+					||((struct LED_871X *)_LED_871X)->bLedScanBlinkInProgress)
 
 enum LED_PIN_871X {
 	LED_PIN_GPIO0,
@@ -76,7 +76,7 @@ enum LED_PIN_871X {
 	LED_PIN_LED1
 };
 
-typedef struct _LED_871x{
+struct LED_871X {
 	_adapter				*padapter;
 	enum LED_PIN_871X		LedPin;	// Identify how to implement this SW led.
 	enum LED_STATE_871X		CurrLedState; // Current LED state.
@@ -99,14 +99,14 @@ typedef struct _LED_871x{
 #if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
 	_workitem			BlinkWorkItem; // Workitem used by BlinkTimer to manipulate H/W to blink LED.
 #endif
-} LED_871x, *PLED_871x;
+};
 
 
 //================================================================================
 // LED customization.
 //================================================================================
 
-typedef	enum _LED_STRATEGY_871x{
+enum LED_STRATEGY_871X {
 	SW_LED_MODE0, // SW control 1 LED via GPIO0. It is default option.
 	SW_LED_MODE1, // 2 LEDs, through LED0 and LED1. For ALPHA.
 	SW_LED_MODE2, // SW control 1 LED via GPIO0, customized for AzWave 8187 minicard.
@@ -115,13 +115,13 @@ typedef	enum _LED_STRATEGY_871x{
 	SW_LED_MODE5, //for Sercomm / Belkin
 	SW_LED_MODE6, //for 88CU minicard, porting from ce SW_LED_MODE7
 	HW_LED, // HW control 2 LEDs, LED0 and LED1 (there are 4 different control modes, see MAC.CONFIG1 for details.)
-}LED_STRATEGY_871x, *PLED_STRATEGY_871x;
+};
 
 struct led_priv{
 	/* add for led controll */
-	LED_871x			SwLed0;
-	LED_871x			SwLed1;
-	LED_STRATEGY_871x	LedStrategy;
+	struct LED_871X			SwLed0;
+	struct LED_871X			SwLed1;
+	enum LED_STRATEGY_871X	LedStrategy;
 	u8					bRegUseLed;
 	void (*LedControlHandler)(_adapter *padapter, enum LED_CTL_MODE LedAction);
 	/* add for led controll */
@@ -137,6 +137,6 @@ struct led_priv{
 #define rtw_led_control(adapter, LedAction)
 #endif //CONFIG_SW_LED
 
-extern void BlinkHandler(PLED_871x	 pLed);
+extern void BlinkHandler(struct LED_871X *pLed);
 
 #endif //__RTW_LED_H_
--- a/drivers/staging/rtl8192du/os_dep/rtw_android.c
+++ b/drivers/staging/rtl8192du/os_dep/rtw_android.c
@@ -87,25 +87,23 @@ static const char *android_wifi_cmd_str[
 #define PNO_TLV_FREQ_REPEAT		'R'
 #define PNO_TLV_FREQ_EXPO_MAX		'M'
 
-typedef struct cmd_tlv {
+struct cmd_tlv {
 	char prefix;
 	char version;
 	char subver;
 	char reserved;
-} cmd_tlv_t;
+};
 #endif /* PNO_SUPPORT */
 
-typedef struct android_wifi_priv_cmd {
-
+struct android_wifi_priv_cmd {
 #ifdef CONFIG_COMPAT
 	compat_uptr_t buf;
 #else
 	char *buf;
 #endif
-
 	int used_len;
 	int total_len;
-} android_wifi_priv_cmd;
+};
 
 /**
  * Local (static) functions and variables
@@ -124,7 +122,7 @@ static int wl_android_set_pno_setup(stru
 	wlc_ssid_t ssids_local[MAX_PFN_LIST_COUNT];
 	int res = -1;
 	int nssid = 0;
-	cmd_tlv_t *cmd_tlv_temp;
+	struct cmd_tlv *struct cmd_tlvemp;
 	char *str_ptr;
 	int tlv_size_left;
 	int pno_time = 0;
@@ -154,7 +152,7 @@ static int wl_android_set_pno_setup(stru
 
 	DHD_INFO(("%s: command=%s, len=%d\n", __FUNCTION__, command, total_len));
 
-	if (total_len < (strlen(CMD_PNOSETUP_SET) + sizeof(cmd_tlv_t))) {
+	if (total_len < (strlen(CMD_PNOSETUP_SET) + sizeof(struct cmd_tlv))) {
 		DBG_8192D("%s argument=%d less min size\n", __FUNCTION__, total_len);
 		goto exit_proc;
 	}
@@ -170,15 +168,15 @@ static int wl_android_set_pno_setup(stru
 	str_ptr = command + strlen(CMD_PNOSETUP_SET);
 	tlv_size_left = total_len - strlen(CMD_PNOSETUP_SET);
 
-	cmd_tlv_temp = (cmd_tlv_t *)str_ptr;
+	struct cmd_tlvemp = (struct cmd_tlv *)str_ptr;
 	memset(ssids_local, 0, sizeof(ssids_local));
 
-	if ((cmd_tlv_temp->prefix == PNO_TLV_PREFIX) &&
-		(cmd_tlv_temp->version == PNO_TLV_VERSION) &&
-		(cmd_tlv_temp->subver == PNO_TLV_SUBVERSION)) {
+	if ((struct cmd_tlvemp->prefix == PNO_TLV_PREFIX) &&
+		(struct cmd_tlvemp->version == PNO_TLV_VERSION) &&
+		(struct cmd_tlvemp->subver == PNO_TLV_SUBVERSION)) {
 
-		str_ptr += sizeof(cmd_tlv_t);
-		tlv_size_left -= sizeof(cmd_tlv_t);
+		str_ptr += sizeof(struct cmd_tlv);
+		tlv_size_left -= sizeof(struct cmd_tlv);
 
 		if ((nssid = wl_iw_parse_ssid_list_tlv(&str_ptr, ssids_local,
 			MAX_PFN_LIST_COUNT, &tlv_size_left)) <= 0) {
@@ -332,7 +330,7 @@ int rtw_android_priv_cmd(struct net_devi
 	char *command = NULL;
 	int cmd_num;
 	int bytes_written = 0;
-	android_wifi_priv_cmd priv_cmd;
+	struct android_wifi_priv_cmd priv_cmd;
 
 	rtw_lock_suspend();
 
@@ -340,7 +338,7 @@ int rtw_android_priv_cmd(struct net_devi
 		ret = -EINVAL;
 		goto exit;
 	}
-	if (copy_from_user(&priv_cmd, ifr->ifr_data, sizeof(android_wifi_priv_cmd))) {
+	if (copy_from_user(&priv_cmd, ifr->ifr_data, sizeof(struct android_wifi_priv_cmd))) {
 		ret = -EFAULT;
 		goto exit;
 	}
