From 47922e7f781ec8cc04138016229d72ab22421444 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Tue, 10 Sep 2013 17:02:18 -0500
Subject: [PATCH 174/390] rtl8192su: Fix smatch warnings concerning unreachable
 code

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ieee80211.c  |  2 +-
 core/rtw_xmit.c       |  4 +---
 hal/rtl8192d_phycfg.c | 31 ++++---------------------------
 os_dep/recv_linux.c   |  3 +--
 4 files changed, 7 insertions(+), 33 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_ieee80211.c
+++ b/drivers/staging/rtl8192du/core/rtw_ieee80211.c
@@ -151,8 +151,8 @@ _func_enter_;
 
 	*frlen = *frlen + (len + 2);
 
-	return pbuf + len + 2;
 _func_exit_;
+	return pbuf + len + 2;
 }
 
 inline u8 *rtw_set_ie_ch_switch (u8 *buf, u32 *buf_len, u8 ch_switch_mode,
--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -1921,7 +1921,7 @@ static struct xmit_frame *dequeue_one_xm
 	xmitframe_phead = get_list_head(pframe_queue);
 	xmitframe_plist = get_next(xmitframe_phead);
 
-	while ((rtw_end_of_queue_search(xmitframe_phead, xmitframe_plist)) == false) {
+	if ((rtw_end_of_queue_search(xmitframe_phead, xmitframe_plist)) == false) {
 		pxmitframe = LIST_CONTAINOR(xmitframe_plist, struct xmit_frame, list);
 
 		xmitframe_plist = get_next(xmitframe_plist);
@@ -1929,8 +1929,6 @@ static struct xmit_frame *dequeue_one_xm
 		rtw_list_delete(&pxmitframe->list);
 
 		ptxservq->qcnt--;
-		break;
-		pxmitframe = NULL;
 	}
 	return pxmitframe;
 }
--- a/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
@@ -5305,9 +5305,7 @@ phy_APCalibrate(
 /*  and value will cause RF internal PA to be unpredictably disabled by HW, such that RF Tx signal */
 /*  will disappear after disable/enable card many times on 88CU. RF SD and DD have not find the */
 /*  root cause, so we remove these actions temporarily. Added by tynli and SD3 Allen. 2010.05.31. */
-#if MP_DRIVER != 1
-	return;
-#endif
+#if MP_DRIVER == 1
 
 	/* settings adjust for normal chip */
 	for (index = 0; index < PATH_NUM; index ++)
@@ -5576,7 +5574,7 @@ phy_APCalibrate(
 	}
 
 	pdmpriv->bAPKdone = true;
-
+#endif
 }
 
 static void phy_SetRFPathSwitch(
@@ -5845,25 +5843,6 @@ rtl8192d_PHY_APCalibrate(
 	char		delta
 	)
 {
-	struct hal_data_8192du *pHalData = GET_HAL_DATA(pAdapter);
-	struct dm_priv	*pdmpriv = &pHalData->dmpriv;
-
-#if DISABLE_BB_RF
-	return;
-#endif
-
-		return;
-
-	if (pdmpriv->bAPKdone)
-		return;
-
-	if (IS_92D_SINGLEPHY(pHalData->VersionID)) {
-		phy_APCalibrate(pAdapter, delta, true);
-	}
-	else {
-		/*  For 88C 1T1R */
-		phy_APCalibrate(pAdapter, delta, false);
-	}
 }
 
 void
@@ -6440,12 +6419,9 @@ rtl8192d_PHY_InitRxSetting(
 	struct rtw_adapter * Adapter
 	)
 {
+#if MP_DRIVER == 1
 	struct hal_data_8192du *pHalData = GET_HAL_DATA(Adapter);
 
-#if MP_DRIVER != 1
-	return;
-#endif
-
 	if (pHalData->interfaceIndex == 0)
 	{
 		rtw_write32(Adapter, REG_MACID, 0x87654321);
@@ -6456,6 +6432,7 @@ rtl8192d_PHY_InitRxSetting(
 		rtw_write32(Adapter, REG_MACID, 0x12345678);
 		rtw_write32(Adapter, 0x0700, 0x12345678);
 	}
+#endif
 }
 
 
--- a/drivers/staging/rtl8192du/os_dep/recv_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/recv_linux.c
@@ -330,9 +330,8 @@ _recv_indicatepkt_drop:
 	 if (precv_frame)
 		 rtw_free_recvframe(precv_frame, pfree_recv_queue);
 
-	 return _FAIL;
-
 _func_exit_;
+	 return _FAIL;
 }
 
 void rtw_os_read_port(struct rtw_adapter *padapter, struct recv_buf *precvbuf)
