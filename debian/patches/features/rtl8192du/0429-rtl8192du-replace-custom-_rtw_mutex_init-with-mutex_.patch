From bfd67cb072cffa51931c56ca0e7a5e8a85b22803 Mon Sep 17 00:00:00 2001
From: Stefan Lippers-Hollmann <s.l-h@gmx.de>
Date: Sat, 22 Mar 2014 03:03:27 +0100
Subject: [PATCH 429/456] rtl8192du: replace custom _rtw_mutex_init() with
 mutex_init()

Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
---
 core/rtw_xmit.c         |  2 +-
 include/osdep_service.h |  1 -
 os_dep/osdep_service.c  |  5 -----
 os_dep/usb_intf.c       | 10 +++++-----
 4 files changed, 6 insertions(+), 12 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -203,7 +203,7 @@ s32	_rtw_init_xmit_priv(struct xmit_priv
 	pxmitpriv->voq_cnt = 0;
 
 	pxmitpriv->ack_tx = false;
-	_rtw_mutex_init(&pxmitpriv->ack_tx_mutex);
+	mutex_init(&pxmitpriv->ack_tx_mutex);
 	rtw_sctx_init(&pxmitpriv->ack_tx_ops, 0);
 	rtw_hal_init_xmit_priv(padapter);
 exit:
--- a/drivers/staging/rtl8192du/include/osdep_service.h
+++ b/drivers/staging/rtl8192du/include/osdep_service.h
@@ -179,7 +179,6 @@ enum {
 #define rtw_update_mem_stat(flag, sz) do {} while (0)
 
 u32	_rtw_down_sema(struct  semaphore *sema);
-void	_rtw_mutex_init(_mutex *pmutex);
 void	_rtw_mutex_free(_mutex *pmutex);
 
 void	_rtw_init_queue(struct __queue *pqueue);
--- a/drivers/staging/rtl8192du/os_dep/osdep_service.c
+++ b/drivers/staging/rtl8192du/os_dep/osdep_service.c
@@ -44,11 +44,6 @@ u32 _rtw_down_sema(struct  semaphore *se
 		return _SUCCESS;
 }
 
-void	_rtw_mutex_init(_mutex *pmutex)
-{
-	mutex_init(pmutex);
-}
-
 void	_rtw_mutex_free(_mutex *pmutex)
 {
 	mutex_destroy(pmutex);
--- a/drivers/staging/rtl8192du/os_dep/usb_intf.c
+++ b/drivers/staging/rtl8192du/os_dep/usb_intf.c
@@ -107,7 +107,7 @@ static u8 rtw_init_intf_priv(struct dvob
 {
 	u8 rst = _SUCCESS;
 
-	_rtw_mutex_init(&dvobj->usb_vendor_req_mutex);
+	mutex_init(&dvobj->usb_vendor_req_mutex);
 
 	dvobj->usb_alloc_vendor_req_buf = kzalloc(MAX_USB_IO_CTL_SIZE, GFP_KERNEL);
 	if (dvobj->usb_alloc_vendor_req_buf == NULL) {
@@ -148,10 +148,10 @@ static struct dvobj_priv *usb_dvobj_init
 	if (!pdvobjpriv)
 		goto exit;
 
-	_rtw_mutex_init(&pdvobjpriv->hw_init_mutex);
-	_rtw_mutex_init(&pdvobjpriv->h2c_fwcmd_mutex);
-	_rtw_mutex_init(&pdvobjpriv->setch_mutex);
-	_rtw_mutex_init(&pdvobjpriv->setbw_mutex);
+	mutex_init(&pdvobjpriv->hw_init_mutex);
+	mutex_init(&pdvobjpriv->h2c_fwcmd_mutex);
+	mutex_init(&pdvobjpriv->setch_mutex);
+	mutex_init(&pdvobjpriv->setbw_mutex);
 
 	pdvobjpriv->pusbintf = usb_intf ;
 	pusbd = pdvobjpriv->pusbdev = interface_to_usbdev(usb_intf);
