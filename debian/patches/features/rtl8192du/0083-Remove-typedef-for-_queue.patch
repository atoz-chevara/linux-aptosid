From 08190a6d7bfb02cd18284b14a638ebfb2b5b3167 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sun, 28 Apr 2013 17:02:57 -0500
Subject: [PATCH 083/210] Remove typedef for _queue

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ap.c           |  6 +++---
 core/rtw_cmd.c          |  6 +++---
 core/rtw_ioctl_set.c    |  2 +-
 core/rtw_mlme.c         | 38 ++++++++++++++++++--------------------
 core/rtw_mlme_ext.c     |  2 +-
 core/rtw_recv.c         | 45 +++++++++++++++++++--------------------------
 core/rtw_sta_mgt.c      | 11 +++++------
 core/rtw_xmit.c         | 25 ++++++++++++++-----------
 hal/usb_ops_linux.c     |  6 +++---
 include/cmd_osdep.h     |  4 ++--
 include/osdep_service.h |  7 +++----
 include/rtw_cmd.h       |  6 +++---
 include/rtw_mlme.h      | 14 +++++++-------
 include/rtw_mp.h        |  2 +-
 include/rtw_recv.h      | 32 ++++++++++++++++----------------
 include/rtw_xmit.h      | 28 ++++++++++++----------------
 include/sta_info.h      | 10 +++++-----
 os_dep/ioctl_linux.c    | 30 +++++++++++++++---------------
 os_dep/osdep_service.c  |  4 ++--
 os_dep/recv_linux.c     |  2 +-
 20 files changed, 134 insertions(+), 146 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_ap.c
+++ b/drivers/staging/rtl8192du/core/rtw_ap.c
@@ -1750,7 +1750,7 @@ int rtw_acl_add_sta(_adapter *padapter,
 	struct rtw_wlan_acl_node *paclnode;
 	struct sta_priv *pstapriv = &padapter->stapriv;
 	struct wlan_acl_pool *pacl_list = &pstapriv->acl_list;
-	_queue	*pacl_node_q =&pacl_list->acl_node_q;
+	struct __queue *pacl_node_q =&pacl_list->acl_node_q;
 
 	DBG_8192D("%s(acl_num=%d)=%pM\n", __func__, pacl_list->num, addr);
 
@@ -1822,7 +1822,7 @@ int rtw_acl_remove_sta(_adapter *padapte
 	struct rtw_wlan_acl_node *paclnode;
 	struct sta_priv *pstapriv = &padapter->stapriv;
 	struct wlan_acl_pool *pacl_list = &pstapriv->acl_list;
-	_queue	*pacl_node_q =&pacl_list->acl_node_q;
+	struct __queue *pacl_node_q =&pacl_list->acl_node_q;
 
 	DBG_8192D("%s(acl_num=%d)=%pM\n", __func__, pacl_list->num, addr);
 
@@ -2744,7 +2744,7 @@ void stop_ap_mode(_adapter *padapter)
 	struct mlme_priv *pmlmepriv = &(padapter->mlmepriv);
 	struct mlme_ext_priv *pmlmeext = &padapter->mlmeextpriv;
 	struct wlan_acl_pool *pacl_list = &pstapriv->acl_list;
-	_queue	*pacl_node_q =&pacl_list->acl_node_q;
+	struct __queue *pacl_node_q =&pacl_list->acl_node_q;
 
 	pmlmepriv->update_bcn = false;
 	pmlmeext->bstart_bss = false;
--- a/drivers/staging/rtl8192du/core/rtw_cmd.c
+++ b/drivers/staging/rtl8192du/core/rtw_cmd.c
@@ -186,7 +186,7 @@ ISR/Call-Back functions can't call this
 
 */
 
-int	_rtw_enqueue_cmd(_queue *queue, struct cmd_obj *obj)
+int	_rtw_enqueue_cmd(struct __queue *queue, struct cmd_obj *obj)
 {
 	long unsigned int irqL;
 
@@ -208,7 +208,7 @@ _func_exit_;
 	return _SUCCESS;
 }
 
-struct	cmd_obj	*_rtw_dequeue_cmd(_queue *queue)
+struct	cmd_obj	*_rtw_dequeue_cmd(struct __queue *queue)
 {
 	long unsigned int irqL;
 	struct cmd_obj *obj;
@@ -513,7 +513,7 @@ _func_exit_;
 u32 rtw_enqueue_evt(struct evt_priv *pevtpriv, struct evt_obj *obj)
 {
 	int	res;
-	_queue *queue = &pevtpriv->evt_queue;
+	struct __queue *queue = &pevtpriv->evt_queue;
 
 _func_enter_;
 
--- a/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
+++ b/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
@@ -73,7 +73,7 @@ u8 rtw_do_join(_adapter * padapter)
 	struct list_head *plist, *phead;
 	u8* pibss = NULL;
 	struct	mlme_priv	*pmlmepriv = &(padapter->mlmepriv);
-	_queue	*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	u8 ret=_SUCCESS;
 
 _func_enter_;
--- a/drivers/staging/rtl8192du/core/rtw_mlme.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme.c
@@ -164,7 +164,7 @@ _func_enter_;
 _func_exit_;
 }
 
-int	_rtw_enqueue_network(_queue *queue, struct wlan_network *pnetwork)
+int	_rtw_enqueue_network(struct __queue *queue, struct wlan_network *pnetwork)
 {
 
 _func_enter_;
@@ -185,7 +185,7 @@ _func_exit_;
 	return _SUCCESS;
 }
 
-struct	wlan_network *_rtw_dequeue_network(_queue *queue)
+struct	wlan_network *_rtw_dequeue_network(struct __queue *queue)
 {
 
 	struct wlan_network *pnetwork;
@@ -212,10 +212,10 @@ _func_exit_;
 	return pnetwork;
 }
 
-struct	wlan_network *_rtw_alloc_network(struct	mlme_priv *pmlmepriv )//(_queue *free_queue)
+struct	wlan_network *_rtw_alloc_network(struct	mlme_priv *pmlmepriv )//(struct __queue *free_queue)
 {
 	struct	wlan_network	*pnetwork;
-	_queue *free_queue = &pmlmepriv->free_bss_pool;
+	struct __queue *free_queue = &pmlmepriv->free_bss_pool;
 	struct list_head *plist = NULL;
 
 _func_enter_;
@@ -253,7 +253,7 @@ void _rtw_free_network(struct	mlme_priv
 {
 	u32 curr_time, delta_time;
 	u32 lifetime = SCANQUEUE_LIFETIME;
-	_queue *free_queue = &(pmlmepriv->free_bss_pool);
+	struct __queue *free_queue = &(pmlmepriv->free_bss_pool);
 
 _func_enter_;
 
@@ -298,7 +298,7 @@ _func_exit_;
 void _rtw_free_network_nolock(struct	mlme_priv *pmlmepriv, struct wlan_network *pnetwork)
 {
 
-	_queue *free_queue = &(pmlmepriv->free_bss_pool);
+	struct __queue *free_queue = &(pmlmepriv->free_bss_pool);
 
 _func_enter_;
 
@@ -326,7 +326,7 @@ _func_exit_;
 
 	Shall be calle under atomic context... to avoid possible racing condition...
 */
-struct wlan_network *_rtw_find_network(_queue *scanned_queue, u8 *addr)
+struct wlan_network *_rtw_find_network(struct __queue *scanned_queue, u8 *addr)
 {
 
 	struct list_head *phead, *plist;
@@ -374,7 +374,7 @@ void _rtw_free_network_queue(_adapter *p
 	struct list_head *phead, *plist;
 	struct wlan_network *pnetwork;
 	struct mlme_priv* pmlmepriv = &padapter->mlmepriv;
-	_queue *scanned_queue = &pmlmepriv->scanned_queue;
+	struct __queue *scanned_queue = &pmlmepriv->scanned_queue;
 
 _func_enter_;
 
@@ -482,8 +482,7 @@ _func_enter_;
 _func_exit_;
 }
 
-int	rtw_enqueue_network(_queue *queue, struct wlan_network *pnetwork);
-int	rtw_enqueue_network(_queue *queue, struct wlan_network *pnetwork)
+int	rtw_enqueue_network(struct __queue *queue, struct wlan_network *pnetwork)
 {
 	int	res;
 _func_enter_;
@@ -493,7 +492,7 @@ _func_exit_;
 }
 
 
-static struct	wlan_network *rtw_dequeue_network(_queue *queue)
+static struct	wlan_network *rtw_dequeue_network(struct __queue *queue)
 {
 	struct wlan_network *pnetwork;
 _func_enter_;
@@ -502,7 +501,7 @@ _func_exit_;
 	return pnetwork;
 }
 
-struct	wlan_network *rtw_alloc_network(struct	mlme_priv *pmlmepriv )//(_queue	*free_queue)
+struct	wlan_network *rtw_alloc_network(struct	mlme_priv *pmlmepriv )//(struct __queue	*free_queue)
 {
 	struct	wlan_network	*pnetwork;
 _func_enter_;
@@ -511,8 +510,7 @@ _func_exit_;
 	return pnetwork;
 }
 
-void rtw_free_network(struct mlme_priv *pmlmepriv, struct	wlan_network *pnetwork, u8 is_freeall);
-void rtw_free_network(struct mlme_priv *pmlmepriv, struct	wlan_network *pnetwork, u8 is_freeall)//(struct	wlan_network *pnetwork, _queue	*free_queue)
+void rtw_free_network(struct mlme_priv *pmlmepriv, struct wlan_network *pnetwork, u8 is_freeall)
 {
 _func_enter_;
 	RT_TRACE(_module_rtl871x_mlme_c_,_drv_err_,("rtw_free_network==> ssid = %s \n\n" , pnetwork->network.Ssid.Ssid));
@@ -542,7 +540,7 @@ _func_exit_;
 
 	Shall be calle under atomic context... to avoid possible racing condition...
 */
-struct	wlan_network *rtw_find_network(_queue *scanned_queue, u8 *addr)
+struct	wlan_network *rtw_find_network(struct __queue *scanned_queue, u8 *addr)
 {
 	struct	wlan_network *pnetwork = _rtw_find_network(scanned_queue, addr);
 
@@ -608,7 +606,7 @@ _func_exit_;
 
 }
 
-struct	wlan_network	* rtw_get_oldest_wlan_network(_queue *scanned_queue)
+struct	wlan_network	* rtw_get_oldest_wlan_network(struct __queue *scanned_queue)
 {
 	struct list_head *plist, *phead;
 	struct	wlan_network	*pwlan = NULL;
@@ -747,7 +745,7 @@ void rtw_update_scanned_network(_adapter
 	struct list_head *plist, *phead;
 	u32	bssid_ex_sz;
 	struct mlme_priv	*pmlmepriv = &(adapter->mlmepriv);
-	_queue	*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct wlan_network	*pnetwork = NULL;
 	struct wlan_network	*oldest = NULL;
 
@@ -1183,8 +1181,8 @@ void rtw_fwdbg_event_callback(_adapter *
 
 static void free_scanqueue(struct	mlme_priv *pmlmepriv)
 {
-	_queue *free_queue = &pmlmepriv->free_bss_pool;
-	_queue *scan_queue = &pmlmepriv->scanned_queue;
+	struct __queue *free_queue = &pmlmepriv->free_bss_pool;
+	struct __queue *scan_queue = &pmlmepriv->scanned_queue;
 	struct list_head *plist, *phead, *ptemp;
 
 _func_enter_;
@@ -2441,7 +2439,7 @@ int rtw_select_and_join_from_scanned_que
 	int ret;
 	struct list_head *phead;
 	_adapter *adapter;
-	_queue	*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	struct	wlan_network	*candidate = NULL;
 	u8		bSupportAntDiv = false;
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -8138,7 +8138,7 @@ static void issue_action_BSSCoexistPacke
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct mlme_ext_priv	*pmlmeext = &(padapter->mlmeextpriv);
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
-	_queue		*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	u8 InfoContent[16] = {0};
 	u8 ICS[8][15];
 
--- a/drivers/staging/rtl8192du/core/rtw_recv.c
+++ b/drivers/staging/rtl8192du/core/rtw_recv.c
@@ -173,7 +173,7 @@ _func_exit_;
 
 }
 
-union recv_frame *_rtw_alloc_recvframe (_queue *pfree_recv_queue)
+union recv_frame *_rtw_alloc_recvframe (struct __queue *pfree_recv_queue)
 {
 
 	union recv_frame  *precvframe;
@@ -209,7 +209,7 @@ _func_exit_;
 
 }
 
-union recv_frame *rtw_alloc_recvframe (_queue *pfree_recv_queue)
+union recv_frame *rtw_alloc_recvframe (struct __queue *pfree_recv_queue)
 {
 	union recv_frame  *precvframe;
 
@@ -230,7 +230,7 @@ void rtw_init_recvframe(union recv_frame
 	precvframe->u.hdr.len=0;
 }
 
-int rtw_free_recvframe(union recv_frame *precvframe, _queue *pfree_recv_queue)
+int rtw_free_recvframe(union recv_frame *precvframe, struct __queue *pfree_recv_queue)
 {
 	_adapter *padapter=precvframe->u.hdr.adapter;
 	struct recv_priv *precvpriv = &padapter->recvpriv;
@@ -277,7 +277,7 @@ _func_exit_;
 
 
 
-int _rtw_enqueue_recvframe(union recv_frame *precvframe, _queue *queue)
+int _rtw_enqueue_recvframe(union recv_frame *precvframe, struct __queue *queue)
 {
 
 	_adapter *padapter=precvframe->u.hdr.adapter;
@@ -301,7 +301,7 @@ _func_exit_;
 	return _SUCCESS;
 }
 
-int rtw_enqueue_recvframe(union recv_frame *precvframe, _queue *queue)
+int rtw_enqueue_recvframe(union recv_frame *precvframe, struct __queue *queue)
 {
 	int ret;
 
@@ -320,7 +320,7 @@ using spinlock to protect
 
 */
 
-void rtw_free_recvframe_queue(_queue *pframequeue,  _queue *pfree_recv_queue)
+void rtw_free_recvframe_queue(struct __queue *pframequeue, struct __queue *pfree_recv_queue)
 {
 	union	recv_frame	*precvframe;
 	struct list_head *plist, *phead;
@@ -360,7 +360,7 @@ u32 rtw_free_uc_swdec_pending_queue(_ada
 }
 
 
-int rtw_enqueue_recvbuf_to_head(struct recv_buf *precvbuf, _queue *queue)
+int rtw_enqueue_recvbuf_to_head(struct recv_buf *precvbuf, struct __queue *queue)
 {
 	long unsigned int irqL;
 
@@ -374,7 +374,7 @@ int rtw_enqueue_recvbuf_to_head(struct r
 	return _SUCCESS;
 }
 
-int rtw_enqueue_recvbuf(struct recv_buf *precvbuf, _queue *queue)
+int rtw_enqueue_recvbuf(struct recv_buf *precvbuf, struct __queue *queue)
 {
 	long unsigned int irqL;
 
@@ -391,7 +391,7 @@ int rtw_enqueue_recvbuf(struct recv_buf
 
 }
 
-struct recv_buf *rtw_dequeue_recvbuf (_queue *queue)
+struct recv_buf *rtw_dequeue_recvbuf(struct __queue *queue)
 {
 	long unsigned int irqL;
 	struct recv_buf *precvbuf;
@@ -1995,15 +1995,14 @@ _func_exit_;
 }
 
 //perform defrag
-union recv_frame * recvframe_defrag(_adapter *adapter,_queue *defrag_q);
-union recv_frame * recvframe_defrag(_adapter *adapter,_queue *defrag_q)
+union recv_frame * recvframe_defrag(_adapter *adapter, struct __queue *defrag_q)
 {
 	struct list_head *plist, *phead;
 	u8	*data,wlanhdr_offset;
 	u8	curfragnum;
 	struct recv_frame_hdr *pfhdr,*pnfhdr;
 	union recv_frame* prframe, *pnextrframe;
-	_queue	*pfree_recv_queue;
+	struct __queue *pfree_recv_queue;
 
 _func_enter_;
 
@@ -2094,7 +2093,7 @@ union recv_frame* recvframe_chk_defrag(P
 	struct sta_priv *pstapriv;
 	struct list_head *phead;
 	union recv_frame *prtnframe = NULL;
-	_queue *pfree_recv_queue, *pdefrag_q;
+	struct __queue *pfree_recv_queue, *pdefrag_q;
 
 _func_enter_;
 
@@ -2223,7 +2222,7 @@ int amsdu_to_msdu(_adapter *padapter, un
 	unsigned char *data_ptr;
 	struct sk_buff *sub_skb,*subframes[MAX_SUBFRAME_COUNT];
 	struct recv_priv *precvpriv = &padapter->recvpriv;
-	_queue *pfree_recv_queue = &(precvpriv->free_recv_queue);
+	struct __queue *pfree_recv_queue = &(precvpriv->free_recv_queue);
 	int	ret = _SUCCESS;
 	nr_subframes = 0;
 
@@ -2470,17 +2469,11 @@ int enqueue_reorder_recvframe(struct rec
 int enqueue_reorder_recvframe(struct recv_reorder_ctrl *preorder_ctrl, union recv_frame *prframe)
 {
 	struct rx_pkt_attrib *pattrib = &prframe->u.hdr.attrib;
-	_queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
+	struct __queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
 	struct list_head *phead, *plist;
 	union recv_frame *pnextrframe;
 	struct rx_pkt_attrib *pnextattrib;
 
-	//DbgPrint("+enqueue_reorder_recvframe()\n");
-
-	//spin_lock_irqsave(&ppending_recvframe_queue->lock, &irql);
-	//_rtw_spinlock_ex(&ppending_recvframe_queue->lock);
-
-
 	phead = get_list_head(ppending_recvframe_queue);
 	plist = get_next(phead);
 
@@ -2536,7 +2529,7 @@ int recv_indicatepkts_in_order(_adapter
 	struct rx_pkt_attrib *pattrib;
 	int bPktInBuf = false;
 	struct recv_priv *precvpriv = &padapter->recvpriv;
-	_queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
+	struct __queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
 
 	phead =		get_list_head(ppending_recvframe_queue);
 	plist = get_next(phead);
@@ -2651,7 +2644,7 @@ int recv_indicatepkt_reorder(_adapter *p
 	int retval = _SUCCESS;
 	struct rx_pkt_attrib *pattrib = &prframe->u.hdr.attrib;
 	struct recv_reorder_ctrl *preorder_ctrl = prframe->u.hdr.preorder_ctrl;
-	_queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
+	struct __queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
 
 	if(!pattrib->amsdu)
 	{
@@ -2812,7 +2805,7 @@ void rtw_reordering_ctrl_timeout_handler
 {
 	struct recv_reorder_ctrl *preorder_ctrl = (struct recv_reorder_ctrl *)pcontext;
 	_adapter *padapter = preorder_ctrl->padapter;
-	_queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
+	struct __queue *ppending_recvframe_queue = &preorder_ctrl->pending_recvframe_queue;
 
 
 	if(padapter->bDriverStopped ||padapter->bSurpriseRemoved)
@@ -2912,7 +2905,7 @@ int recv_func_prehandle(_adapter *padapt
 	int ret = _SUCCESS;
 	struct rx_pkt_attrib *pattrib = &rframe->u.hdr.attrib;
 	struct recv_priv *precvpriv = &padapter->recvpriv;
-	_queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
+	struct __queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
 
 #ifdef CONFIG_MP_INCLUDED
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
@@ -2954,7 +2947,7 @@ int recv_func_posthandle(_adapter *padap
 	union recv_frame *orig_prframe = prframe;
 	struct rx_pkt_attrib *pattrib = &prframe->u.hdr.attrib;
 	struct recv_priv *precvpriv = &padapter->recvpriv;
-	_queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
+	struct __queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
 
 #ifdef CONFIG_MP_INCLUDED
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
--- a/drivers/staging/rtl8192du/core/rtw_sta_mgt.c
+++ b/drivers/staging/rtl8192du/core/rtw_sta_mgt.c
@@ -307,7 +307,7 @@ struct	sta_info *rtw_alloc_stainfo(struc
 	s32	index;
 	struct list_head *phash_list;
 	struct sta_info	*psta;
-	_queue *pfree_sta_queue;
+	struct __queue *pfree_sta_queue;
 	struct recv_reorder_ctrl *preorder_ctrl;
 	int i = 0;
 	u16  wRxSeqInitialValue = 0xffff;
@@ -427,7 +427,7 @@ _func_exit_;
 u32	rtw_free_stainfo(_adapter *padapter , struct sta_info *psta)
 {
 	int i;
-	_queue *pfree_sta_queue;
+	struct __queue *pfree_sta_queue;
 	struct recv_reorder_ctrl *preorder_ctrl;
 	struct	sta_xmit_priv	*pstaxmitpriv;
 	struct	xmit_priv	*pxmitpriv= &padapter->xmitpriv;
@@ -492,8 +492,8 @@ _func_enter_;
 	{
 		struct list_head *phead, *plist;
 		union recv_frame *prframe;
-		_queue *ppending_recvframe_queue;
-		_queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
+		struct __queue *ppending_recvframe_queue;
+		struct __queue *pfree_recv_queue = &padapter->recvpriv.free_recv_queue;
 
 		preorder_ctrl = &psta->recvreorder_ctrl[i];
 
@@ -673,7 +673,6 @@ u32 rtw_init_bcmc_stainfo(_adapter* pada
 	NDIS_802_11_MAC_ADDRESS	bcast_addr= {0xff,0xff,0xff,0xff,0xff,0xff};
 
 	struct	sta_priv *pstapriv = &padapter->stapriv;
-	//_queue	*pstapending = &padapter->xmitpriv.bm_pending;
 
 _func_enter_;
 
@@ -718,7 +717,7 @@ u8 rtw_access_ctrl(_adapter *padapter, u
 	u8 match = false;
 	struct sta_priv *pstapriv = &padapter->stapriv;
 	struct wlan_acl_pool *pacl_list = &pstapriv->acl_list;
-	_queue	*pacl_node_q =&pacl_list->acl_node_q;
+	struct __queue *pacl_node_q =&pacl_list->acl_node_q;
 
 	spin_lock_bh(&(pacl_node_q->lock));
 	phead = get_list_head(pacl_node_q);
--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -1849,7 +1849,7 @@ struct xmit_buf *rtw_alloc_xmitbuf_ext(s
 	long unsigned int irqL;
 	struct xmit_buf *pxmitbuf =  NULL;
 	struct list_head *plist, *phead;
-	_queue *pfree_queue = &pxmitpriv->free_xmit_extbuf_queue;
+	struct __queue *pfree_queue = &pxmitpriv->free_xmit_extbuf_queue;
 
 _func_enter_;
 
@@ -1895,7 +1895,7 @@ _func_exit_;
 s32 rtw_free_xmitbuf_ext(struct xmit_priv *pxmitpriv, struct xmit_buf *pxmitbuf)
 {
 	long unsigned int irqL;
-	_queue *pfree_queue = &pxmitpriv->free_xmit_extbuf_queue;
+	struct __queue *pfree_queue = &pxmitpriv->free_xmit_extbuf_queue;
 
 _func_enter_;
 
@@ -1926,7 +1926,7 @@ struct xmit_buf *rtw_alloc_xmitbuf(struc
 	long unsigned int irqL;
 	struct xmit_buf *pxmitbuf =  NULL;
 	struct list_head *plist, *phead;
-	_queue *pfree_xmitbuf_queue = &pxmitpriv->free_xmitbuf_queue;
+	struct __queue *pfree_xmitbuf_queue = &pxmitpriv->free_xmitbuf_queue;
 
 _func_enter_;
 
@@ -1979,7 +1979,7 @@ _func_exit_;
 s32 rtw_free_xmitbuf(struct xmit_priv *pxmitpriv, struct xmit_buf *pxmitbuf)
 {
 	long unsigned int irqL;
-	_queue *pfree_xmitbuf_queue = &pxmitpriv->free_xmitbuf_queue;
+	struct __queue *pfree_xmitbuf_queue = &pxmitpriv->free_xmitbuf_queue;
 
 _func_enter_;
 
@@ -2032,7 +2032,7 @@ Must be very very cautious...
 
 */
 
-struct xmit_frame *rtw_alloc_xmitframe(struct xmit_priv *pxmitpriv)//(_queue *pfree_xmit_queue)
+struct xmit_frame *rtw_alloc_xmitframe(struct xmit_priv *pxmitpriv)
 {
 	/*
 		Please remember to use all the osdep_service api,
@@ -2042,7 +2042,7 @@ struct xmit_frame *rtw_alloc_xmitframe(s
 
 	struct xmit_frame *pxframe = NULL;
 	struct list_head *plist, *phead;
-	_queue *pfree_xmit_queue = &pxmitpriv->free_xmit_queue;
+	struct __queue *pfree_xmit_queue = &pxmitpriv->free_xmit_queue;
 	_adapter *padapter = pxmitpriv->adapter;
 
 _func_enter_;
@@ -2106,7 +2106,7 @@ _func_exit_;
 
 s32 rtw_free_xmitframe(struct xmit_priv *pxmitpriv, struct xmit_frame *pxmitframe)
 {
-	_queue *pfree_xmit_queue = &pxmitpriv->free_xmit_queue;
+	struct __queue *pfree_xmit_queue = &pxmitpriv->free_xmit_queue;
 	_adapter *padapter = pxmitpriv->adapter;
 	struct sk_buff *pndis_pkt = NULL;
 
@@ -2144,7 +2144,7 @@ _func_exit_;
 	return _SUCCESS;
 }
 
-void rtw_free_xmitframe_queue(struct xmit_priv *pxmitpriv, _queue *pframequeue)
+void rtw_free_xmitframe_queue(struct xmit_priv *pxmitpriv, struct __queue *pframequeue)
 {
 	struct list_head *plist, *phead;
 	struct	xmit_frame	*pxmitframe;
@@ -2184,7 +2184,10 @@ s32 rtw_xmitframe_enqueue(_adapter *pada
 	return _SUCCESS;
 }
 
-static struct xmit_frame *dequeue_one_xmitframe(struct xmit_priv *pxmitpriv, struct hw_xmit *phwxmit, struct tx_servq *ptxservq, _queue *pframe_queue)
+static struct xmit_frame *dequeue_one_xmitframe(struct xmit_priv *pxmitpriv,
+						struct hw_xmit *phwxmit,
+						struct tx_servq *ptxservq,
+						struct __queue *pframe_queue)
 {
 	struct list_head *xmitframe_plist, *xmitframe_phead;
 	struct	xmit_frame	*pxmitframe=NULL;
@@ -2216,7 +2219,7 @@ struct xmit_frame* rtw_dequeue_xframe(st
 	struct list_head *sta_plist, *sta_phead;
 	struct hw_xmit *phwxmit;
 	struct tx_servq *ptxservq = NULL;
-	_queue *pframe_queue = NULL;
+	struct __queue *pframe_queue = NULL;
 	struct xmit_frame *pxmitframe = NULL;
 	_adapter *padapter = pxmitpriv->adapter;
 	struct registry_priv	*pregpriv = &padapter->registrypriv;
@@ -2950,7 +2953,7 @@ int xmitframe_enqueue_for_sleeping_sta(_
 	return ret;
 }
 
-static void dequeue_xmitframes_to_sleeping_queue(_adapter *padapter, struct sta_info *psta, _queue *pframequeue)
+static void dequeue_xmitframes_to_sleeping_queue(_adapter *padapter, struct sta_info *psta, struct __queue *pframequeue)
 {
 	struct list_head *plist, *phead;
 	u8	ac_index;
--- a/drivers/staging/rtl8192du/hal/usb_ops_linux.c
+++ b/drivers/staging/rtl8192du/hal/usb_ops_linux.c
@@ -496,7 +496,7 @@ static s32 pre_recv_entry(union recv_fra
 	_adapter *primary_padapter = precvframe->u.hdr.adapter;
 	_adapter *secondary_padapter = primary_padapter->pbuddy_adapter;
 	struct recv_priv *precvpriv = &primary_padapter->recvpriv;
-	_queue *pfree_recv_queue = &precvpriv->free_recv_queue;
+	struct __queue *pfree_recv_queue = &precvpriv->free_recv_queue;
 	u8	*pbuf = precvframe->u.hdr.rx_data;
 
 	if(!secondary_padapter)
@@ -627,7 +627,7 @@ static int recvbuf2recvframe(_adapter *p
 	struct rx_pkt_attrib	*pattrib = NULL;
 	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(padapter);
 	struct recv_priv	*precvpriv = &padapter->recvpriv;
-	_queue			*pfree_recv_queue = &precvpriv->free_recv_queue;
+	struct __queue *pfree_recv_queue = &precvpriv->free_recv_queue;
 
 
 	transfer_len = (s32)precvbuf->transfer_len;
@@ -962,7 +962,7 @@ static int recvbuf2recvframe(_adapter *p
 	struct rx_pkt_attrib	*pattrib = NULL;
 	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(padapter);
 	struct recv_priv	*precvpriv = &padapter->recvpriv;
-	_queue			*pfree_recv_queue = &precvpriv->free_recv_queue;
+	struct __queue *pfree_recv_queue = &precvpriv->free_recv_queue;
 
 	transfer_len = pskb->len;
 	pbuf = pskb->data;
--- a/drivers/staging/rtl8192du/include/cmd_osdep.h
+++ b/drivers/staging/rtl8192du/include/cmd_osdep.h
@@ -29,7 +29,7 @@ extern int _rtw_init_cmd_priv (struct	cm
 extern int _rtw_init_evt_priv(struct evt_priv *pevtpriv);
 extern void _rtw_free_evt_priv (struct	evt_priv *pevtpriv);
 extern void _rtw_free_cmd_priv (struct	cmd_priv *pcmdpriv);
-extern int _rtw_enqueue_cmd(_queue *queue, struct cmd_obj *obj);
-extern struct	cmd_obj	*_rtw_dequeue_cmd(_queue *queue);
+extern int _rtw_enqueue_cmd(struct __queue *queue, struct cmd_obj *obj);
+extern struct	cmd_obj	*_rtw_dequeue_cmd(struct __queue *queue);
 
 #endif
--- a/drivers/staging/rtl8192du/include/osdep_service.h
+++ b/drivers/staging/rtl8192du/include/osdep_service.h
@@ -99,7 +99,6 @@
 		spinlock_t	lock;
 	};
 
-	typedef struct	__queue	_queue;
 	typedef	int	_OS_STATUS;
 
 	typedef int		thread_return;
@@ -143,7 +142,7 @@ static inline struct list_head *get_next
 	return list->next;
 }
 
-static inline struct list_head *get_list_head(_queue	*queue)
+static inline struct list_head *get_list_head(struct __queue *queue)
 {
 	return (&(queue->queue));
 }
@@ -374,8 +373,8 @@ extern void	_rtw_spinunlock(spinlock_t	*
 extern void	_rtw_spinlock_ex(spinlock_t	*plock);
 extern void	_rtw_spinunlock_ex(spinlock_t	*plock);
 
-extern void	_rtw_init_queue(_queue	*pqueue);
-extern u32	_rtw_queue_empty(_queue	*pqueue);
+extern void	_rtw_init_queue(struct __queue *pqueue);
+extern u32	_rtw_queue_empty(struct __queue *pqueue);
 extern u32	rtw_end_of_queue_search(struct list_head *queue, struct list_head *pelement);
 
 extern u32	rtw_get_current_time(void);
--- a/drivers/staging/rtl8192du/include/rtw_cmd.h
+++ b/drivers/staging/rtl8192du/include/rtw_cmd.h
@@ -53,7 +53,7 @@
 	struct cmd_priv {
 		struct  semaphore cmd_queue_sema;
 		struct  semaphore terminate_cmdthread_sema;
-		_queue	cmd_queue;
+		struct __queue cmd_queue;
 		u8	cmd_seq;
 		u8	*cmd_buf;	//shall be non-paged, and 4 bytes aligned
 		u8	*cmd_allocated_buf;
@@ -80,7 +80,7 @@
 #ifdef CONFIG_EVENT_THREAD_MODE
 		struct  semaphore evt_notify;
 		struct  semaphore terminate_evtthread_sema;
-		_queue	evt_queue;
+		struct __queue evt_queue;
 #endif
 
 //#define CONFIG_C2H_WK
@@ -128,7 +128,7 @@ extern void rtw_free_cmd_obj(struct cmd_
 
 #ifdef CONFIG_EVENT_THREAD_MODE
 extern u32 rtw_enqueue_evt(struct evt_priv *pevtpriv, struct evt_obj *obj);
-extern struct evt_obj *rtw_dequeue_evt(_queue *queue);
+extern struct evt_obj *rtw_dequeue_evt(struct __queue *queue);
 extern void rtw_free_evt_obj(struct evt_obj *pcmd);
 #endif
 
--- a/drivers/staging/rtl8192du/include/rtw_mlme.h
+++ b/drivers/staging/rtl8192du/include/rtw_mlme.h
@@ -390,8 +390,8 @@ struct mlme_priv {
 
 	u8	not_indic_disco;
 	struct list_head *pscanned;
-	_queue	free_bss_pool;
-	_queue	scanned_queue;
+	struct __queue free_bss_pool;
+	struct __queue scanned_queue;
 	u8		*free_bss_buf;
 	u32	num_of_scanned;
 
@@ -675,8 +675,8 @@ extern u16 rtw_get_capability(WLAN_BSSID
 extern void rtw_update_scanned_network(_adapter *adapter, WLAN_BSSID_EX *target);
 extern void rtw_disconnect_hdl_under_linked(_adapter* adapter, struct sta_info *psta, u8 free_assoc);
 extern void rtw_generate_random_ibss(u8 *pibss);
-extern struct wlan_network* rtw_find_network(_queue *scanned_queue, u8 *addr);
-extern struct wlan_network* rtw_get_oldest_wlan_network(_queue *scanned_queue);
+extern struct wlan_network* rtw_find_network(struct __queue *scanned_queue, u8 *addr);
+extern struct wlan_network* rtw_get_oldest_wlan_network(struct __queue *scanned_queue);
 
 extern void rtw_free_assoc_resources(_adapter* adapter, int lock_scanned_queue);
 extern void rtw_indicate_disconnect(_adapter* adapter);
@@ -715,9 +715,9 @@ void rtw_free_mlme_priv_ie_data(struct m
 
 extern void _rtw_free_mlme_priv(struct mlme_priv *pmlmepriv);
 
-extern int _rtw_enqueue_network(_queue *queue, struct wlan_network *pnetwork);
+extern int _rtw_enqueue_network(struct __queue *queue, struct wlan_network *pnetwork);
 
-extern struct wlan_network* _rtw_dequeue_network(_queue *queue);
+extern struct wlan_network* _rtw_dequeue_network(struct __queue *queue);
 
 extern struct wlan_network* _rtw_alloc_network(struct mlme_priv *pmlmepriv);
 
@@ -726,7 +726,7 @@ extern void _rtw_free_network(struct mlm
 extern void _rtw_free_network_nolock(struct mlme_priv *pmlmepriv, struct wlan_network *pnetwork);
 
 
-extern struct wlan_network* _rtw_find_network(_queue *scanned_queue, u8 *addr);
+extern struct wlan_network* _rtw_find_network(struct __queue *scanned_queue, u8 *addr);
 
 extern void _rtw_free_network_queue(_adapter* padapter, u8 isfreeall);
 
--- a/drivers/staging/rtl8192du/include/rtw_mp.h
+++ b/drivers/staging/rtl8192du/include/rtw_mp.h
@@ -300,7 +300,7 @@ struct mp_priv
 
 	u8 *pallocated_mp_xmitframe_buf;
 	u8 *pmp_xmtframe_buf;
-	_queue free_mp_xmitqueue;
+	struct __queue free_mp_xmitqueue;
 	u32 free_mp_xmitframe_cnt;
 
 	MPT_CONTEXT MptCtx;
--- a/drivers/staging/rtl8192du/include/rtw_recv.h
+++ b/drivers/staging/rtl8192du/include/rtw_recv.h
@@ -61,7 +61,7 @@ struct recv_reorder_ctrl
 	u16 indicate_seq;//=wstart_b, init_value=0xffff
 	u16 wend_b;
 	u8 wsize_b;
-	_queue pending_recvframe_queue;
+	struct __queue pending_recvframe_queue;
 	struct timer_list reordering_ctrl_timer;
 };
 
@@ -194,9 +194,9 @@ struct recv_priv {
 	struct  semaphore terminate_recvthread_sema;
 #endif
 
-	_queue	free_recv_queue;
-	_queue	recv_pending_queue;
-	_queue	uc_swdec_pending_queue;
+	struct __queue free_recv_queue;
+	struct __queue recv_pending_queue;
+	struct __queue uc_swdec_pending_queue;
 
 	u8 *pallocated_frame_buf;
 	u8 *precv_frame_buf;
@@ -236,12 +236,12 @@ struct recv_priv {
 #endif	// CONFIG_RX_INDICATE_QUEUE
 
 #ifdef CONFIG_USE_USB_BUFFER_ALLOC_RX
-	_queue	recv_buf_pending_queue;
+	struct __queue recv_buf_pending_queue;
 #endif	// CONFIG_USE_USB_BUFFER_ALLOC_RX
 
 	u8 *pallocated_recv_buf;
 	u8 *precv_buf;    // 4 alignment
-	_queue	free_recv_buf_queue;
+	struct __queue free_recv_buf_queue;
 	u32	free_recv_buf_queue_cnt;
 
 	//For display the phy informatiom
@@ -282,7 +282,7 @@ struct recv_priv {
 struct sta_recv_priv {
 	spinlock_t lock;
 	int	option;
-	_queue defrag_q;	 //keeping the fragment frame until defrag
+	struct __queue defrag_q;	 //keeping the fragment frame until defrag
 	struct	stainfo_rxcache rxcache;
 };
 
@@ -375,21 +375,21 @@ union recv_frame{
 };
 
 
-extern union recv_frame *_rtw_alloc_recvframe (_queue *pfree_recv_queue);  //get a free recv_frame from pfree_recv_queue
-extern union recv_frame *rtw_alloc_recvframe (_queue *pfree_recv_queue);  //get a free recv_frame from pfree_recv_queue
+extern union recv_frame *_rtw_alloc_recvframe (struct __queue *pfree_recv_queue);  //get a free recv_frame from pfree_recv_queue
+extern union recv_frame *rtw_alloc_recvframe (struct __queue *pfree_recv_queue);  //get a free recv_frame from pfree_recv_queue
 extern void rtw_init_recvframe(union recv_frame *precvframe ,struct recv_priv *precvpriv);
-extern int	 rtw_free_recvframe(union recv_frame *precvframe, _queue *pfree_recv_queue);
+extern int	 rtw_free_recvframe(union recv_frame *precvframe, struct __queue *pfree_recv_queue);
 
 #define rtw_dequeue_recvframe(queue) rtw_alloc_recvframe(queue)
-extern int _rtw_enqueue_recvframe(union recv_frame *precvframe, _queue *queue);
-extern int rtw_enqueue_recvframe(union recv_frame *precvframe, _queue *queue);
+extern int _rtw_enqueue_recvframe(union recv_frame *precvframe, struct __queue *queue);
+extern int rtw_enqueue_recvframe(union recv_frame *precvframe, struct __queue *queue);
 
-extern void rtw_free_recvframe_queue(_queue *pframequeue,  _queue *pfree_recv_queue);
+extern void rtw_free_recvframe_queue(struct __queue *pframequeue, struct __queue *pfree_recv_queue);
 u32 rtw_free_uc_swdec_pending_queue(_adapter *adapter);
 
-int rtw_enqueue_recvbuf_to_head(struct recv_buf *precvbuf, _queue *queue);
-int rtw_enqueue_recvbuf(struct recv_buf *precvbuf, _queue *queue);
-struct recv_buf *rtw_dequeue_recvbuf (_queue *queue);
+int rtw_enqueue_recvbuf_to_head(struct recv_buf *precvbuf, struct __queue *queue);
+int rtw_enqueue_recvbuf(struct recv_buf *precvbuf, struct __queue *queue);
+struct recv_buf *rtw_dequeue_recvbuf (struct __queue *queue);
 
 void rtw_reordering_ctrl_timeout_handler(void *pcontext);
 
--- a/drivers/staging/rtl8192du/include/rtw_xmit.h
+++ b/drivers/staging/rtl8192du/include/rtw_xmit.h
@@ -165,7 +165,7 @@ union txdesc {
 };
 
 struct	hw_xmit	{
-	_queue *sta_queue;
+	struct __queue *sta_queue;
 	int	accnt;
 };
 
@@ -309,7 +309,7 @@ struct xmit_frame {
 
 struct tx_servq {
 	struct list_head tx_pending;
-	_queue	sta_pending;
+	struct __queue sta_pending;
 	int qcnt;
 };
 
@@ -348,15 +348,11 @@ struct	xmit_priv	{
 	struct  semaphore xmit_sema;
 	struct  semaphore terminate_xmitthread_sema;
 
-	//_queue	blk_strms[MAX_NUMBLKS];
-	_queue	be_pending;
-	_queue	bk_pending;
-	_queue	vi_pending;
-	_queue	vo_pending;
-	_queue	bm_pending;
-
-	//_queue	legacy_dz_queue;
-	//_queue	apsd_queue;
+	struct __queue be_pending;
+	struct __queue bk_pending;
+	struct __queue vi_pending;
+	struct __queue vo_pending;
+	struct __queue bm_pending;
 
 	u8 *pallocated_frame_buf;
 	u8 *pxmit_frame_buf;
@@ -365,7 +361,7 @@ struct	xmit_priv	{
 	//uint mapping_addr;
 	//uint pkt_sz;
 
-	_queue	free_xmit_queue;
+	struct __queue free_xmit_queue;
 
 	//struct	hw_txqueue	be_txqueue;
 	//struct	hw_txqueue	bk_txqueue;
@@ -398,13 +394,13 @@ struct	xmit_priv	{
 	int bkq_cnt;
 	int viq_cnt;
 	int voq_cnt;
-	_queue free_xmitbuf_queue;
-	_queue pending_xmitbuf_queue;
+	struct __queue free_xmitbuf_queue;
+	struct __queue pending_xmitbuf_queue;
 	u8 *pallocated_xmitbuf;
 	u8 *pxmitbuf;
 	uint free_xmitbuf_cnt;
 
-	_queue free_xmit_extbuf_queue;
+	struct __queue free_xmit_extbuf_queue;
 	u8 *pallocated_xmit_extbuf;
 	u8 *pxmit_extbuf;
 	uint free_xmit_extbuf_cnt;
@@ -432,7 +428,7 @@ extern s32 rtw_put_snap(u8 *data, u16 h_
 
 extern struct xmit_frame *rtw_alloc_xmitframe(struct xmit_priv *pxmitpriv);
 extern s32 rtw_free_xmitframe(struct xmit_priv *pxmitpriv, struct xmit_frame *pxmitframe);
-extern void rtw_free_xmitframe_queue(struct xmit_priv *pxmitpriv, _queue *pframequeue);
+extern void rtw_free_xmitframe_queue(struct xmit_priv *pxmitpriv, struct __queue *pframequeue);
 struct tx_servq *rtw_get_sta_pending(_adapter *padapter, struct sta_info *psta, int up, u8 *ac);
 extern s32 rtw_xmitframe_enqueue(_adapter *padapter, struct xmit_frame *pxmitframe);
 extern struct xmit_frame* rtw_dequeue_xframe(struct xmit_priv *pxmitpriv, struct hw_xmit *phwxmit_i, int entry);
--- a/drivers/staging/rtl8192du/include/sta_info.h
+++ b/drivers/staging/rtl8192du/include/sta_info.h
@@ -45,7 +45,7 @@ struct wlan_acl_pool {
 	int mode;
 	int num;
 	struct rtw_wlan_acl_node aclnode[NUM_ACL];
-	_queue	acl_node_q;
+	struct __queue acl_node_q;
 };
 
 typedef struct _RSSI_STA{
@@ -99,7 +99,7 @@ struct sta_info {
 	struct sta_xmit_priv sta_xmitpriv;
 	struct sta_recv_priv sta_recvpriv;
 
-	_queue sleep_q;
+	struct __queue sleep_q;
 	unsigned int sleepq_len;
 
 	uint state;
@@ -345,13 +345,13 @@ struct	sta_priv {
 
 	u8 *pallocated_stainfo_buf;
 	u8 *pstainfo_buf;
-	_queue	free_sta_queue;
+	struct __queue free_sta_queue;
 
 	spinlock_t sta_hash_lock;
 	struct list_head sta_hash[NUM_STA];
 	int asoc_sta_count;
-	_queue sleep_q;
-	_queue wakeup_q;
+	struct __queue sleep_q;
+	struct __queue wakeup_q;
 
 	_adapter *padapter;
 
--- a/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
@@ -1156,7 +1156,7 @@ static int rtw_wx_set_mode(struct net_de
 	enum NDIS_802_11_NETWORK_INFRASTRUCTURE networkType ;
 	int ret = 0;
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
-	_queue *queue = &pmlmepriv->scanned_queue;
+	struct __queue *queue = &pmlmepriv->scanned_queue;
 	_func_enter_;
 
 	if (_FAIL == rtw_pwr_wakeup(padapter)) {
@@ -1513,7 +1513,7 @@ static int rtw_wx_set_wap(struct net_dev
 	struct	mlme_priv	*pmlmepriv = &(padapter->mlmepriv);
 	struct list_head *phead;
 	u8 *dst_bssid, *src_bssid;
-	_queue	*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	enum NDIS_802_11_AUTHENTICATION_MODE	authmode;
 
@@ -1930,7 +1930,7 @@ static int rtw_wx_get_scan(struct net_de
 	struct list_head *plist, *phead;
 	_adapter *padapter = (_adapter *)rtw_netdev_priv(dev);
 	struct	mlme_priv	*pmlmepriv = &(padapter->mlmepriv);
-	_queue				*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	char *ev = extra;
 	char *stop = ev + wrqu->data.length;
@@ -2087,7 +2087,7 @@ static int rtw_wx_set_essid(struct net_d
 {
 	_adapter *padapter = (_adapter *)rtw_netdev_priv(dev);
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
-	_queue *queue = &pmlmepriv->scanned_queue;
+	struct __queue *queue = &pmlmepriv->scanned_queue;
 	struct pwrctrl_priv *pwrpriv = &padapter->pwrctrlpriv;
 	struct list_head *phead;
 	s8 status = true;
@@ -3519,7 +3519,7 @@ static int rtw_get_ap_info(struct net_de
 	struct wlan_network *pnetwork = NULL;
 	_adapter *padapter = (_adapter *)rtw_netdev_priv(dev);
 	struct mlme_priv *pmlmepriv = &(padapter->mlmepriv);
-	_queue *queue = &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct iw_point *pdata = &wrqu->data;
 
 	DBG_8192D("+rtw_get_aplist_info\n");
@@ -4195,7 +4195,7 @@ static int rtw_p2p_get_wps_configmethod(
 	u8 peerMAC[ETH_ALEN] = { 0x00 };
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue *queue = &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct wlan_network *pnetwork = NULL;
 	u8 blnMatch = 0;
 	u16	attr_content = 0;
@@ -4331,7 +4331,7 @@ static int rtw_p2p_get_go_device_address
 	u8 peerMAC[ETH_ALEN] = { 0x00 };
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue *queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct wlan_network *pnetwork = NULL;
 	u8 blnMatch = 0;
 	u8 *p2pie;
@@ -4422,7 +4422,7 @@ static int rtw_p2p_get_device_type(struc
 	u8 peerMAC[ETH_ALEN] = { 0x00 };
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue *queue = &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct wlan_network *pnetwork = NULL;
 	u8 blnMatch = 0;
 	u8 dev_type[8] = { 0x00 };
@@ -4499,7 +4499,7 @@ static int rtw_p2p_get_device_name(struc
 	u8 peerMAC[ETH_ALEN] = { 0x00 };
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue *queue = &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct wlan_network *pnetwork = NULL;
 	u8 blnMatch = 0;
 	u8 dev_name[WPS_MAX_DEVICE_NAME_LEN] = { 0x00 };
@@ -4572,7 +4572,7 @@ static int rtw_p2p_get_invitation_proced
 	u8 peerMAC[ETH_ALEN] = { 0x00 };
 	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue *queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue	= &(pmlmepriv->scanned_queue);
 	struct wlan_network *pnetwork = NULL;
 	u8 blnMatch = 0;
 	u8 *p2pie;
@@ -4663,7 +4663,7 @@ static int rtw_p2p_connect(struct net_de
 	u8					peerMACStr[ ETH_ALEN * 2 ] = { 0x00 };
 	struct mlme_priv		*pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue				*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue	= &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	uint					uintPeerChannel = 0;
 #ifdef CONFIG_CONCURRENT_MODE
@@ -4795,7 +4795,7 @@ static int rtw_p2p_invite_req(struct net
 	u8						peerMACStr[ ETH_ALEN * 2 ] = { 0x00 };
 	struct mlme_priv			*pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue					*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network		*pnetwork = NULL;
 	uint						uintPeerChannel = 0;
 	u8						attr_content[50] = { 0x00 }, _status = 0;
@@ -5016,7 +5016,7 @@ static int rtw_p2p_set_persistent(struct
 	u8						peerMACStr[ ETH_ALEN * 2 ] = { 0x00 };
 	struct mlme_priv			*pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue					*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network		*pnetwork = NULL;
 	uint						uintPeerChannel = 0;
 	u8						attr_content[50] = { 0x00 }, _status = 0;
@@ -5083,7 +5083,7 @@ static int rtw_p2p_set_pc(struct net_dev
 	u8					peerMACStr[ ETH_ALEN * 2 ] = { 0x00 };
 	struct mlme_priv		*pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue				*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	u8					attr_content[50] = { 0x00 }, _status = 0;
 	u8 *p2pie;
@@ -5336,7 +5336,7 @@ static int rtw_p2p_prov_disc(struct net_
 	u8					peerMACStr[ ETH_ALEN * 2 ] = { 0x00 };
 	struct mlme_priv		*pmlmepriv = &padapter->mlmepriv;
 	struct list_head *plist, *phead;
-	_queue				*queue	= &(pmlmepriv->scanned_queue);
+	struct __queue *queue = &(pmlmepriv->scanned_queue);
 	struct	wlan_network	*pnetwork = NULL;
 	uint					uintPeerChannel = 0;
 	u8					attr_content[100] = { 0x00 }, _status = 0;
--- a/drivers/staging/rtl8192du/os_dep/osdep_service.c
+++ b/drivers/staging/rtl8192du/os_dep/osdep_service.c
@@ -494,7 +494,7 @@ void	_rtw_spinunlock_ex(spinlock_t *ploc
 	spin_unlock(plock);
 }
 
-void	_rtw_init_queue(_queue	*pqueue)
+void	_rtw_init_queue(struct __queue *pqueue)
 {
 
 	_rtw_init_listhead(&(pqueue->queue));
@@ -503,7 +503,7 @@ void	_rtw_init_queue(_queue	*pqueue)
 
 }
 
-u32	  _rtw_queue_empty(_queue	*pqueue)
+u32	  _rtw_queue_empty(struct __queue *pqueue)
 {
 	return (rtw_is_list_empty(&(pqueue->queue)));
 }
--- a/drivers/staging/rtl8192du/os_dep/recv_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/recv_linux.c
@@ -230,7 +230,7 @@ void rtw_hostapd_mlme_rx(_adapter *padap
 int rtw_recv_indicatepkt(_adapter *padapter, union recv_frame *precv_frame)
 {
 	struct recv_priv *precvpriv;
-	_queue	*pfree_recv_queue;
+	struct __queue *pfree_recv_queue;
 	struct sk_buff *skb;
 	struct mlme_priv*pmlmepriv = &padapter->mlmepriv;
 #ifdef CONFIG_TCP_CSUM_OFFLOAD_RX
