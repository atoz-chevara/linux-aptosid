From 4fc56a98a082d54deac9bfb7cd5e2b4edbaf2cac Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sat, 15 Mar 2014 14:26:49 -0500
Subject: [PATCH 277/390] Remove CONFIG_WIFI_TEST

This debug option is no longer needed.

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 Makefile            |  5 -----
 core/rtw_mlme_ext.c | 11 +----------
 include/autoconf.h  |  4 +---
 os_dep/os_intfs.c   |  4 ----
 4 files changed, 2 insertions(+), 22 deletions(-)

--- a/drivers/staging/rtl8192du/Makefile
+++ b/drivers/staging/rtl8192du/Makefile
@@ -23,7 +23,6 @@ CONFIG_AUTOCFG_CP = n
 CONFIG_POWER_SAVING = y
 CONFIG_USB_AUTOSUSPEND = n
 CONFIG_HW_PWRP_DETECTION = n
-CONFIG_WIFI_TEST = n
 CONFIG_BT_COEXISTENCE = n
 CONFIG_WAKE_ON_WLAN = n
 
@@ -90,10 +89,6 @@ ifeq ($(CONFIG_HW_PWRP_DETECTION), y)
 EXTRA_CFLAGS += -DCONFIG_HW_PWRP_DETECTION
 endif
 
-ifeq ($(CONFIG_WIFI_TEST), y)
-EXTRA_CFLAGS += -DCONFIG_WIFI_TEST
-endif
-
 ifeq ($(CONFIG_BT_COEXISTENCE), y)
 EXTRA_CFLAGS += -DCONFIG_BT_COEXISTENCE
 endif
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -700,23 +700,14 @@ unsigned int OnProbeReq(struct rtw_adapt
 	    !rtw_p2p_chk_state(pwdinfo, P2P_STATE_IDLE) &&
 	    !rtw_p2p_chk_role(pwdinfo, P2P_ROLE_CLIENT) &&
 	    !rtw_p2p_chk_state(pwdinfo, P2P_STATE_FIND_PHASE_SEARCH) &&
-	    !rtw_p2p_chk_state(pwdinfo, P2P_STATE_SCAN)
-	   ) {
-		/*      Commented by Albert 2011/03/17 */
+	    !rtw_p2p_chk_state(pwdinfo, P2P_STATE_SCAN)) {
 		/*      mcs_rate = 0 -> CCK 1M rate */
 		/*      mcs_rate = 1 -> CCK 2M rate */
 		/*      mcs_rate = 2 -> CCK 5.5M rate */
 		/*      mcs_rate = 3 -> CCK 11M rate */
 		/*      In the P2P mode, the driver should not support the CCK rate */
 
-		/*      Commented by Kurt 2012/10/16 */
 		/*      IOT issue: Google Nexus7 use 1M rate to send p2p_probe_req after GO nego completed and Nexus7 is client */
-#ifdef CONFIG_WIFI_TEST
-		if (pattrib->mcs_rate <= 3) {
-			wifi_test_chk_rate = 0;
-		}
-#endif /* CONFIG_WIFI_TEST */
-
 		if (wifi_test_chk_rate == 1) {
 			is_valid_p2p_probereq = process_probe_req_p2p_ie(pwdinfo, pframe, len);
 			if (is_valid_p2p_probereq == true) {
--- a/drivers/staging/rtl8192du/include/autoconf.h
+++ b/drivers/staging/rtl8192du/include/autoconf.h
@@ -42,9 +42,7 @@
 #define CONFIG_P2P	1
 
 #ifdef CONFIG_P2P
-	#ifndef CONFIG_WIFI_TEST
-		#define CONFIG_P2P_REMOVE_GROUP_INFO
-	#endif
+	#define CONFIG_P2P_REMOVE_GROUP_INFO
 #endif
 
 //#define CONFIG_IOCTL_CFG80211
--- a/drivers/staging/rtl8192du/os_dep/os_intfs.c
+++ b/drivers/staging/rtl8192du/os_dep/os_intfs.c
@@ -92,11 +92,7 @@ static int rtw_lowrate_two_xmit = 1;/* U
 /* int rf_config = RF_1T2R;   1T2R */
 static int rtw_rf_config = RF_819X_MAX_TYPE;  /* auto */
 static int rtw_low_power;
-#ifdef CONFIG_WIFI_TEST
-int rtw_wifi_spec = 1;/* for wifi test */
-#else
 static int rtw_wifi_spec;
-#endif
 
 static int rtw_special_rf_path = 0; /* 0: 2T2R , 1: only turn on path A 1T1R, 2: only turn on path B 1T1R */
 
