From 2b37d834456c55ad04b689027386ca2b18eed5ea Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 16:31:04 -0500
Subject: [PATCH 022/390] Remove last of PLATFORM configuration variables

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 Makefile                |   2 -
 include/autoconf.h      |  17 -------
 include/basic_types.h   | 128 ++++++++----------------------------------------
 include/mlme_osdep.h    |   4 --
 include/rtw_eeprom.h    |   2 -
 include/rtw_event.h     |   4 --
 include/rtw_ioctl_set.h |  24 ---------
 include/rtw_mp_ioctl.h  |  22 ---------
 8 files changed, 20 insertions(+), 183 deletions(-)

--- a/drivers/staging/rtl8192du/Makefile
+++ b/drivers/staging/rtl8192du/Makefile
@@ -36,8 +36,6 @@ CONFIG_RTL8192CU_REDEFINE_1X1 = n
 CONFIG_INTEL_WIDI = n
 CONFIG_WAKE_ON_WLAN = n
 
-CONFIG_PLATFORM_I386_PC = y
-
 CONFIG_DRVEXT_MODULE = n
 
 export TopDIR ?= $(shell pwd)
--- a/drivers/staging/rtl8192du/include/autoconf.h
+++ b/drivers/staging/rtl8192du/include/autoconf.h
@@ -29,13 +29,9 @@
 
 #define CONFIG_RTL8192D	1
 
-#define PLATFORM_LINUX	1
-
 //#define CONFIG_IOCTL_CFG80211 1
 #ifdef CONFIG_IOCTL_CFG80211
-	//#define RTW_USE_CFG80211_STA_EVENT /* Opne this for Android 4.1's wpa_supplicant */
 	#define CONFIG_CFG80211_FORCE_COMPATIBLE_2_6_37_UNDER
-	//#define CONFIG_DEBUG_CFG80211 1
 	#define CONFIG_SET_SCAN_DENY_TIMER
 #endif
 
@@ -233,13 +229,6 @@
 #endif
 
 /*
- * Platform  Related Config
- */
-#ifndef CONFIG_WISTRON_PLATFORM
-//#define CONFIG_USB_VENDOR_REQ_BUFFER_DYNAMIC_ALLOCATE	1
-#endif
-
-/*
  * Debug  Related Config
  */
 //#define CONFIG_DEBUG_RTL871X
@@ -250,11 +239,5 @@
 
 #define CONFIG_PROC_DEBUG 1
 
-//#define DBG_HAL_INIT_PROFILING
-
 #define DBG_MEMORY_LEAK	1
 
-//TX use 1 urb
-//#define CONFIG_SINGLE_XMIT_BUF
-//RX use 1 urb
-//#define CONFIG_SINGLE_RECV_BUF
--- a/drivers/staging/rtl8192du/include/basic_types.h
+++ b/drivers/staging/rtl8192du/include/basic_types.h
@@ -38,118 +38,30 @@
 	#define _FALSE	FALSE
 #endif
 
-#ifdef PLATFORM_WINDOWS
-
-	typedef signed char s8;
-	typedef unsigned char u8;
-
-	typedef signed short s16;
-	typedef unsigned short u16;
-
-	typedef signed long s32;
-	typedef unsigned long u32;
-
-	typedef unsigned int	uint;
-	typedef	signed int		sint;
-
-
-	typedef signed long long s64;
-	typedef unsigned long long u64;
-
-	#ifdef NDIS50_MINIPORT
-
-		#define NDIS_MAJOR_VERSION       5
-		#define NDIS_MINOR_VERSION       0
-
-	#endif
-
-	#ifdef NDIS51_MINIPORT
-
-		#define NDIS_MAJOR_VERSION       5
-		#define NDIS_MINOR_VERSION       1
-
-	#endif
-
-	typedef NDIS_PROC proc_t;
-
-	typedef LONG atomic_t;
-
-#endif
-
-
-#ifdef PLATFORM_LINUX
-
-	#include <linux/types.h>
-	#define IN
-	#define OUT
-	#define VOID void
-	#define NDIS_OID uint
-	#define NDIS_STATUS uint
-
-	typedef	signed int sint;
-
-	#ifndef	PVOID
-	typedef void * PVOID;
-	//#define PVOID	(void *)
-	#endif
-
-        #define UCHAR u8
-	#define USHORT u16
-	#define UINT u32
-	#define ULONG u32
-
-	typedef void (*proc_t)(void*);
-
-	typedef		__kernel_size_t	SIZE_T;
-	typedef	__kernel_ssize_t	SSIZE_T;
-	#define FIELD_OFFSET(s,field)	((SSIZE_T)&((s*)(0))->field)
-
+#include <linux/types.h>
+#define IN
+#define OUT
+#define VOID void
+#define NDIS_OID uint
+#define NDIS_STATUS uint
+
+typedef	signed int sint;
+
+#ifndef	PVOID
+typedef void * PVOID;
+//#define PVOID	(void *)
 #endif
 
-
-#ifdef PLATFORM_FREEBSD
-
-	typedef signed char s8;
-	typedef unsigned char u8;
-
-	typedef signed short s16;
-	typedef unsigned short u16;
-
-	typedef signed int s32;
-	typedef unsigned int u32;
-
-	typedef unsigned int	uint;
-	typedef	signed int		sint;
-	typedef long atomic_t;
-
-	typedef signed long long s64;
-	typedef unsigned long long u64;
-	#define IN
-	#define OUT
-	#define VOID void
-	#define NDIS_OID uint
-	#define NDIS_STATUS uint
-
-	#ifndef	PVOID
-	typedef void * PVOID;
-	//#define PVOID	(void *)
-	#endif
-	typedef u32 dma_addr_t;
-    #define UCHAR u8
-	#define USHORT u16
-	#define UINT u32
-	#define ULONG u32
-
-	typedef void (*proc_t)(void*);
-
-  typedef unsigned int __kernel_size_t;
-  typedef int __kernel_ssize_t;
-
-	typedef		__kernel_size_t	SIZE_T;
-	typedef	__kernel_ssize_t	SSIZE_T;
-	#define FIELD_OFFSET(s,field)	((SSIZE_T)&((s*)(0))->field)
-
-#endif
+       #define UCHAR u8
+#define USHORT u16
+#define UINT u32
+#define ULONG u32
+
+typedef void (*proc_t)(void*);
+
+typedef		__kernel_size_t	SIZE_T;
+typedef	__kernel_ssize_t	SSIZE_T;
+#define FIELD_OFFSET(s,field)	((SSIZE_T)&((s*)(0))->field)
 
 #define MEM_ALIGNMENT_OFFSET	(sizeof (SIZE_T))
 #define MEM_ALIGNMENT_PADDING	(sizeof(SIZE_T) - 1)
--- a/drivers/staging/rtl8192du/include/mlme_osdep.h
+++ b/drivers/staging/rtl8192du/include/mlme_osdep.h
@@ -24,10 +24,6 @@
 #include <osdep_service.h>
 #include <drv_types.h>
 
-#if defined(PLATFORM_WINDOWS) || defined(PLATFORM_MPIXEL)
-extern int time_after(u32 now, u32 old);
-#endif
-
 extern void rtw_init_mlme_timer(_adapter *padapter);
 extern void rtw_os_indicate_disconnect( _adapter *adapter );
 extern void rtw_os_indicate_connect( _adapter *adapter );
--- a/drivers/staging/rtl8192du/include/rtw_eeprom.h
+++ b/drivers/staging/rtl8192du/include/rtw_eeprom.h
@@ -141,12 +141,10 @@ extern void eeprom_read_sz(_adapter * pa
 
 extern void read_eeprom_content_by_attrib(_adapter *	padapter	);
 
-#ifdef PLATFORM_LINUX
 #ifdef CONFIG_ADAPTOR_INFO_CACHING_FILE
 extern int isAdaptorInfoFileValid(void);
 extern int storeAdaptorInfoFile(char *path, struct eeprom_priv * eeprom_priv);
 extern int retriveAdaptorInfoFile(char *path, struct eeprom_priv * eeprom_priv);
 #endif //CONFIG_ADAPTOR_INFO_CACHING_FILE
-#endif //PLATFORM_LINUX
 
 #endif  //__RTL871X_EEPROM_H__
--- a/drivers/staging/rtl8192du/include/rtw_event.h
+++ b/drivers/staging/rtl8192du/include/rtw_event.h
@@ -23,7 +23,6 @@
 #include <osdep_service.h>
 
 #ifndef CONFIG_RTL8711FW
-#ifdef PLATFORM_LINUX
 #include <wlan_bssdef.h>
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,26))
 #include <asm/semaphore.h>
@@ -31,13 +30,10 @@
 #include <linux/semaphore.h>
 #endif
 #include <linux/sem.h>
-#endif
 #else
 #include <wlan_bssdef.h>
 #endif//CONFIG_RTL8711FW
 
-
-
 #ifdef CONFIG_H2CLBK
 #include <h2clbk.h>
 #endif
--- a/drivers/staging/rtl8192du/include/rtw_ioctl_set.h
+++ b/drivers/staging/rtl8192du/include/rtw_ioctl_set.h
@@ -31,29 +31,6 @@ typedef struct _BSSIDInfo {
 	NDIS_802_11_PMKID_VALUE  PMKID;
 } BSSIDInfo, *PBSSIDInfo;
 
-
-#ifdef PLATFORM_OS_XP
-typedef struct _NDIS_802_11_PMKID {
-	u32	Length;
-	u32	BSSIDInfoCount;
-	BSSIDInfo BSSIDInfo[1];
-} NDIS_802_11_PMKID, *PNDIS_802_11_PMKID;
-#endif
-
-
-#ifdef PLATFORM_WINDOWS
-u8 rtw_set_802_11_reload_defaults(_adapter * padapter, NDIS_802_11_RELOAD_DEFAULTS reloadDefaults);
-u8 rtw_set_802_11_test(_adapter * padapter, NDIS_802_11_TEST * test);
-u8 rtw_set_802_11_pmkid(_adapter *pdapter, NDIS_802_11_PMKID *pmkid);
-
-u8 rtw_pnp_set_power_sleep(_adapter* padapter);
-u8 rtw_pnp_set_power_wakeup(_adapter* padapter);
-
-void rtw_pnp_resume_wk(void *context);
-void rtw_pnp_sleep_wk(void * context);
-
-#endif
-
 u8 rtw_set_802_11_add_key(_adapter * padapter, NDIS_802_11_KEY * key);
 u8 rtw_set_802_11_authentication_mode(_adapter *pdapter, NDIS_802_11_AUTHENTICATION_MODE authmode);
 u8 rtw_set_802_11_bssid(_adapter* padapter, u8 *bssid);
@@ -65,7 +42,6 @@ u8 rtw_set_802_11_remove_wep(_adapter *
 u8 rtw_set_802_11_ssid(_adapter * padapter, NDIS_802_11_SSID * ssid);
 u8 rtw_set_802_11_remove_key(_adapter * padapter, NDIS_802_11_REMOVE_KEY * key);
 
-
 u8 rtw_validate_ssid(NDIS_802_11_SSID *ssid);
 
 u16 rtw_get_cur_max_rate(_adapter *adapter);
--- a/drivers/staging/rtl8192du/include/rtw_mp_ioctl.h
+++ b/drivers/staging/rtl8192du/include/rtw_mp_ioctl.h
@@ -72,29 +72,7 @@ typedef struct _DR_VARIABLE_STRUCT_ {
 	u32 variable;
 }DR_VARIABLE_STRUCT;
 
-//int mp_start_joinbss(_adapter *padapter, NDIS_802_11_SSID *pssid);
-
-//void _irqlevel_changed_(_irqL *irqlevel, /*BOOLEAN*/unsigned char bLower);
-#ifdef PLATFORM_OS_XP
-static void _irqlevel_changed_(_irqL *irqlevel, u8 bLower)
-{
-
-	if (bLower == LOWER) {
-		*irqlevel = KeGetCurrentIrql();
-
-		if (*irqlevel > PASSIVE_LEVEL) {
-			KeLowerIrql(PASSIVE_LEVEL);
-		}
-	} else {
-		if (KeGetCurrentIrql() == PASSIVE_LEVEL) {
-			KeRaiseIrql(DISPATCH_LEVEL, irqlevel);
-		}
-	}
-
-}
-#else
 #define _irqlevel_changed_(a,b)
-#endif
 
 //oid_rtl_seg_81_80_00
 NDIS_STATUS oid_rt_pro_set_data_rate_hdl(struct oid_par_priv* poid_par_priv);
