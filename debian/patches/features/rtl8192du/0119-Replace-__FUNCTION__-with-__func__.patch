From cf7c8fd13bf02d6e1148a96de1f77c506e6ce384 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sat, 4 May 2013 18:17:36 -0500
Subject: [PATCH 119/390] Replace __FUNCTION__ with __func__

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ioctl_set.c    |   2 +-
 core/rtw_iol.c          |  14 ++---
 core/rtw_mlme.c         |  44 +++++++-------
 core/rtw_mlme_ext.c     | 158 ++++++++++++++++++++++++------------------------
 core/rtw_p2p.c          |  82 ++++++++++++-------------
 core/rtw_pwrctrl.c      |  42 ++++++-------
 core/rtw_recv.c         |  66 ++++++++++----------
 core/rtw_security.c     |   8 +--
 core/rtw_sreset.c       |   4 +-
 core/rtw_sta_mgt.c      |   2 +-
 core/rtw_tdls.c         |  16 ++---
 core/rtw_wlan_util.c    |  24 ++++----
 core/rtw_xmit.c         |  18 +++---
 hal/hal_intf.c          |   6 +-
 hal/rtl8192d_cmd.c      |  38 ++++++------
 hal/rtl8192d_hal_init.c |  10 +--
 hal/rtl8192d_phycfg.c   |   4 +-
 hal/rtl8192du_xmit.c    |   2 +-
 hal/usb_halinit.c       |  58 +++++++++---------
 hal/usb_ops_linux.c     |  14 ++---
 include/osdep_service.h |   4 +-
 include/rtw_debug.h     |   4 +-
 include/rtw_io.h        |  14 ++---
 include/rtw_ioctl.h     |   2 +-
 include/rtw_iol.h       |   6 +-
 include/rtw_mlme_ext.h  |   4 +-
 include/rtw_p2p.h       |   8 +--
 include/rtw_pwrctrl.h   |   6 +-
 os_dep/ioctl_cfg80211.c |  80 ++++++++++++------------
 os_dep/mlme_linux.c     |   4 +-
 os_dep/os_intfs.c       |   6 +-
 os_dep/osdep_service.c  |  20 +++---
 os_dep/rtw_android.c    |  50 +++++++--------
 os_dep/usb_intf.c       |  22 +++----
 os_dep/usb_ops_linux.c  |   4 +-
 os_dep/xmit_linux.c     |  14 ++---
 36 files changed, 430 insertions(+), 430 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
+++ b/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
@@ -1295,7 +1295,7 @@ int rtw_set_country(struct rtw_adapter *
 	else if(0 == strcmp(country_code, "CN"))
 		channel_plan = RT_CHANNEL_DOMAIN_CHINA;
 	else
-		DBG_8192D("%s unknown country_code:%s\n", __FUNCTION__, country_code);
+		DBG_8192D("%s unknown country_code:%s\n", __func__, country_code);
 
 	return rtw_set_channel_plan(adapter, channel_plan);
 }
--- a/drivers/staging/rtl8192du/core/rtw_iol.c
+++ b/drivers/staging/rtl8192du/core/rtw_iol.c
@@ -31,13 +31,13 @@ struct xmit_frame	*rtw_IOL_accquire_xmit
 #if 1
 	if ((xmit_frame = rtw_alloc_xmitframe(pxmitpriv)) == NULL)
 	{
-		DBG_871X("%s rtw_alloc_xmitframe return null\n", __FUNCTION__);
+		DBG_871X("%s rtw_alloc_xmitframe return null\n", __func__);
 		goto exit;
 	}
 
 	if ((xmitbuf = rtw_alloc_xmitbuf(pxmitpriv)) == NULL)
 	{
-		DBG_871X("%s rtw_alloc_xmitbuf return null\n", __FUNCTION__);
+		DBG_871X("%s rtw_alloc_xmitbuf return null\n", __func__);
 		rtw_free_xmitframe(pxmitpriv, xmit_frame);
 		xmit_frame=NULL;
 		goto exit;
@@ -56,7 +56,7 @@ struct xmit_frame	*rtw_IOL_accquire_xmit
 #else
 	if ((xmit_frame = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
-		DBG_871X("%s alloc_mgtxmitframe return null\n", __FUNCTION__);
+		DBG_871X("%s alloc_mgtxmitframe return null\n", __func__);
 	}
 	else {
 		pattrib = &xmit_frame->attrib;
@@ -83,7 +83,7 @@ int rtw_IOL_append_cmds(struct xmit_fram
 
 	//check if the io_buf can accommodate new cmds
 	if(ori_len + cmd_len + 8 > MAX_XMITBUF_SZ) {
-		DBG_871X("%s %u is large than MAX_XMITBUF_SZ:%u, can't accommodate new cmds\n", __FUNCTION__
+		DBG_871X("%s %u is large than MAX_XMITBUF_SZ:%u, can't accommodate new cmds\n", __func__
 			, ori_len + cmd_len + 8, MAX_XMITBUF_SZ);
 		return _FAIL;
 	}
@@ -166,7 +166,7 @@ int rtw_IOL_append_DELAY_US_cmd(struct x
 
 	RTW_PUT_BE32((u8*)&cmd.value, (u32)us);
 
-	//DBG_871X("%s %u\n", __FUNCTION__, us);
+	//DBG_871X("%s %u\n", __func__, us);
 
 	return rtw_IOL_append_cmds(xmit_frame, (u8*)&cmd, 8);
 }
@@ -177,7 +177,7 @@ int rtw_IOL_append_DELAY_MS_cmd(struct x
 
 	RTW_PUT_BE32((u8*)&cmd.value, (u32)ms);
 
-	//DBG_871X("%s %u\n", __FUNCTION__, ms);
+	//DBG_871X("%s %u\n", __func__, ms);
 
 	return rtw_IOL_append_cmds(xmit_frame, (u8*)&cmd, 8);
 }
@@ -195,7 +195,7 @@ int rtw_IOL_append_END_cmd(struct xmit_f
 
 	//check if the io_buf can accommodate new cmds
 	if(ori_len + 8 > MAX_XMITBUF_SZ) {
-		DBG_871X("%s %u is large than MAX_XMITBUF_SZ:%u, can't accommodate end cmd\n", __FUNCTION__
+		DBG_871X("%s %u is large than MAX_XMITBUF_SZ:%u, can't accommodate end cmd\n", __func__
 			, ori_len + 8, MAX_XMITBUF_SZ);
 		return _FAIL;
 	}
--- a/drivers/staging/rtl8192du/core/rtw_mlme.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme.c
@@ -659,7 +659,7 @@ _func_enter_;
 	#if defined(DBG_RX_SIGNAL_DISPLAY_PROCESSING) && 1
 	if(strcmp(dst->Ssid.Ssid, DBG_RX_SIGNAL_DISPLAY_SSID_MONITORED) == 0) {
 		DBG_8192D("%s %s(%pM, ch%u) ss_ori:%3u, sq_ori:%3u, rssi_ori:%3ld, ss_smp:%3u, sq_smp:%3u, rssi_smp:%3ld\n"
-			, __FUNCTION__
+			, __func__
 			, src->Ssid.Ssid, src->MacAddress, src->Configuration.DSConfig
 			,ss_ori, sq_ori, rssi_ori
 			,ss_smp, sq_smp, rssi_smp
@@ -702,7 +702,7 @@ _func_enter_;
 	#if defined(DBG_RX_SIGNAL_DISPLAY_PROCESSING) && 1
 	if(strcmp(dst->Ssid.Ssid, DBG_RX_SIGNAL_DISPLAY_SSID_MONITORED) == 0) {
 		DBG_8192D("%s %s(%pM), SignalStrength:%u, SignalQuality:%u, RawRSSI:%ld\n"
-			, __FUNCTION__
+			, __func__
 			, dst->Ssid.Ssid, dst->MacAddress, dst->PhyInfo.SignalStrength, dst->PhyInfo.SignalQuality, dst->Rssi);
 	}
 	#endif
@@ -1443,7 +1443,7 @@ static struct sta_info *rtw_joinbss_upda
 
 	if(psta) //update ptarget_sta
 	{
-		DBG_8192D("%s\n", __FUNCTION__);
+		DBG_8192D("%s\n", __func__);
 
 		psta->aid  = pnetwork->join_res;
 #ifdef CONFIG_CONCURRENT_MODE
@@ -1497,7 +1497,7 @@ static struct sta_info *rtw_joinbss_upda
 			preorder_ctrl->enable = false;
 			preorder_ctrl->indicate_seq = 0xffff;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq);
 			#endif
 			preorder_ctrl->wend_b= 0xffff;
@@ -1515,7 +1515,7 @@ static struct sta_info *rtw_joinbss_upda
 				preorder_ctrl->enable = false;
 				preorder_ctrl->indicate_seq = 0xffff;
 				#ifdef DBG_RX_SEQ
-				DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
+				DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __func__, __LINE__,
 					preorder_ctrl->indicate_seq);
 				#endif
 				preorder_ctrl->wend_b= 0xffff;
@@ -1540,7 +1540,7 @@ static void rtw_joinbss_update_network(s
 	struct mlme_priv	*pmlmepriv = &(padapter->mlmepriv);
 	struct wlan_network  *cur_network = &(pmlmepriv->cur_network);
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	RT_TRACE(_module_rtl871x_mlme_c_,_drv_info_,("\nfw_state:%x, BSSID:%pM\n"
 		,get_fwstate(pmlmepriv), pnetwork->network.MacAddress));
@@ -1562,7 +1562,7 @@ static void rtw_joinbss_update_network(s
 	#if defined(DBG_RX_SIGNAL_DISPLAY_PROCESSING) && 1
 		DBG_8192D("%s signal_strength:%3u, rssi:%3d, signal_qual:%3u"
 			"\n"
-			, __FUNCTION__
+			, __func__
 			, adapter->recvpriv.signal_strength
 			, adapter->recvpriv.rssi
 			, adapter->recvpriv.signal_qual
@@ -2085,7 +2085,7 @@ void _rtw_join_timeout_handler (struct r
 #endif //CONFIG_LAYER2_ROAMING
 
 _func_enter_;
-	DBG_8192D("%s, fw_state=%x\n", __FUNCTION__, get_fwstate(pmlmepriv));
+	DBG_8192D("%s, fw_state=%x\n", __func__, get_fwstate(pmlmepriv));
 
 	if(adapter->bDriverStopped ||adapter->bSurpriseRemoved)
 		return;
@@ -2098,9 +2098,9 @@ _func_enter_;
 		while(1) {
 			pmlmepriv->to_roaming--;
 			if (rtw_to_roaming(adapter) != 0) { /* try another */
-				DBG_8192D("%s try another roaming\n", __FUNCTION__);
+				DBG_8192D("%s try another roaming\n", __func__);
 				if( _SUCCESS!=(do_join_r=rtw_do_join(adapter)) ) {
-					DBG_8192D("%s roaming do_join return %d\n", __FUNCTION__ ,do_join_r);
+					DBG_8192D("%s roaming do_join return %d\n", __func__ ,do_join_r);
 					continue;
 				}
 				break;
@@ -2113,7 +2113,7 @@ _func_enter_;
 					DBG_8192D("change to widi listen\n");
 				}
 #endif // CONFIG_INTEL_WIDI
-				DBG_8192D("%s We've try roaming but fail\n", __FUNCTION__);
+				DBG_8192D("%s We've try roaming but fail\n", __func__);
 				rtw_indicate_disconnect(adapter);
 				break;
 			}
@@ -2171,13 +2171,13 @@ static void rtw_auto_scan_handler(struct
 /*
 			if (check_fwstate(pmlmepriv, _FW_UNDER_SURVEY|_FW_UNDER_LINKING) == true)
 			{
-				DBG_8192D("exit %s when _FW_UNDER_SURVEY|_FW_UNDER_LINKING -> \n", __FUNCTION__);
+				DBG_8192D("exit %s when _FW_UNDER_SURVEY|_FW_UNDER_LINKING -> \n", __func__);
 				return;
 			}
 
 			if(pmlmepriv->sitesurveyctrl.traffic_busy == true)
 			{
-				DBG_8192D("%s exit cause traffic_busy(%x)\n",__FUNCTION__, pmlmepriv->sitesurveyctrl.traffic_busy);
+				DBG_8192D("%s exit cause traffic_busy(%x)\n",__func__, pmlmepriv->sitesurveyctrl.traffic_busy);
 				return;
 			}
 */
@@ -2188,13 +2188,13 @@ static void rtw_auto_scan_handler(struct
 				if ((check_buddy_fwstate(padapter, _FW_UNDER_SURVEY|_FW_UNDER_LINKING) == true) ||
 					(padapter->pbuddy_adapter->mlmepriv.LinkDetectInfo.bBusyTraffic == true))
 				{
-					DBG_8192D("%s, but buddy_intf is under scanning or linking or BusyTraffic\n", __FUNCTION__);
+					DBG_8192D("%s, but buddy_intf is under scanning or linking or BusyTraffic\n", __func__);
 					return;
 				}
 			}
 #endif
 
-			DBG_8192D("%s\n", __FUNCTION__);
+			DBG_8192D("%s\n", __func__);
 
 			rtw_set_802_11_bssid_list_scan(padapter, NULL, 0);
 
@@ -2450,7 +2450,7 @@ _func_enter_;
 
 		pnetwork = LIST_CONTAINOR(pmlmepriv->pscanned, struct wlan_network, list);
 		if(pnetwork==NULL){
-			RT_TRACE(_module_rtl871x_mlme_c_,_drv_err_,("%s return _FAIL:(pnetwork==NULL)\n", __FUNCTION__));
+			RT_TRACE(_module_rtl871x_mlme_c_,_drv_err_,("%s return _FAIL:(pnetwork==NULL)\n", __func__));
 			ret = _FAIL;
 			goto exit;
 		}
@@ -2461,11 +2461,11 @@ _func_enter_;
 	}
 
 	if(candidate == NULL) {
-		DBG_8192D("%s: return _FAIL(candidate == NULL)\n", __FUNCTION__);
+		DBG_8192D("%s: return _FAIL(candidate == NULL)\n", __func__);
 		ret = _FAIL;
 		goto exit;
 	} else {
-		DBG_8192D("%s: candidate: %s(%pM, ch:%u)\n", __FUNCTION__,
+		DBG_8192D("%s: candidate: %s(%pM, ch:%u)\n", __func__,
 			candidate->network.Ssid.Ssid, candidate->network.MacAddress,
 			candidate->network.Configuration.DSConfig);
 	}
@@ -2474,7 +2474,7 @@ _func_enter_;
 	// check for situation of  _FW_LINKED
 	if (check_fwstate(pmlmepriv, _FW_LINKED) == true)
 	{
-		DBG_8192D("%s: _FW_LINKED while ask_for_joinbss!!!\n", __FUNCTION__);
+		DBG_8192D("%s: _FW_LINKED while ask_for_joinbss!!!\n", __func__);
 
 		rtw_disassoc_cmd(adapter, 0, true);
 		rtw_indicate_disconnect(adapter);
@@ -3020,7 +3020,7 @@ unsigned int rtw_restructure_ht_ie(struc
 			rtw_hal_get_def_var(padapter, HAL_DEF_RX_PACKET_OFFSET, &rx_packet_offset);
 			rtw_hal_get_def_var(padapter, HAL_DEF_MAX_RECVBUF_SZ, &max_recvbuf_sz);
 			//if(max_recvbuf_sz-rx_packet_offset>(8191-256)) {
-			//	DBG_8192D("%s IEEE80211_HT_CAP_MAX_AMSDU is set\n", __FUNCTION__);
+			//	DBG_8192D("%s IEEE80211_HT_CAP_MAX_AMSDU is set\n", __func__);
 			//	ht_capie.cap_info = ht_capie.cap_info |IEEE80211_HT_CAP_MAX_AMSDU;
 			//}
 		}
@@ -3203,7 +3203,7 @@ void rtw_update_ht_cap(struct rtw_adapte
 		{
 			pmlmeinfo->HT_caps.HT_cap_element.MCS_rate[i] &= MCS_rate_1R[i];
 		}*/
-		DBG_8192D("%s(): WLAN_HT_CAP_SM_PS_STATIC\n",__FUNCTION__);
+		DBG_8192D("%s(): WLAN_HT_CAP_SM_PS_STATIC\n",__func__);
 	}
 
 	//
@@ -3304,7 +3304,7 @@ void _rtw_roaming(struct rtw_adapter *pa
 				if(0< rtw_to_roaming(padapter)) {
 					continue;
 				} else {
-					DBG_8192D("%s(%d) -to roaming fail, indicate_disconnect\n", __FUNCTION__,__LINE__);
+					DBG_8192D("%s(%d) -to roaming fail, indicate_disconnect\n", __func__,__LINE__);
 					rtw_indicate_disconnect(padapter);
 					break;
 				}
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -501,7 +501,7 @@ static u8 init_channel_set(struct rtw_ad
 					channel_set[chanset_size].ScanType = SCAN_PASSIVE;
 				else
 					channel_set[chanset_size].ScanType = SCAN_ACTIVE;
-				DBG_8192D("%s(): channel_set[%d].ChannelNum = %d\n", __FUNCTION__, chanset_size, channel_set[chanset_size].ChannelNum);
+				DBG_8192D("%s(): channel_set[%d].ChannelNum = %d\n", __func__, chanset_size, channel_set[chanset_size].ChannelNum);
 				chanset_size++;
 			}
 #endif /* CONFIG_DFS */
@@ -933,7 +933,7 @@ unsigned int OnProbeRsp(struct rtw_adapt
 	{
 		if ( true == pwdinfo->nego_req_info.benable )
 		{
-			DBG_8192D( "[%s] P2P State is GONEGO ING!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] P2P State is GONEGO ING!\n", __func__ );
 			if( _rtw_memcmp( pwdinfo->nego_req_info.peerDevAddr, GetAddr2Ptr(pframe), ETH_ALEN ) )
 			{
 				pwdinfo->nego_req_info.benable = false;
@@ -945,7 +945,7 @@ unsigned int OnProbeRsp(struct rtw_adapt
 	{
 		if ( true == pwdinfo->invitereq_info.benable )
 		{
-			DBG_8192D( "[%s] P2P_STATE_TX_INVITE_REQ!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] P2P_STATE_TX_INVITE_REQ!\n", __func__ );
 			if( _rtw_memcmp( pwdinfo->invitereq_info.peer_macaddr, GetAddr2Ptr(pframe), ETH_ALEN ) )
 			{
 				pwdinfo->invitereq_info.benable = false;
@@ -1310,7 +1310,7 @@ unsigned int OnAuthClient(struct rtw_ada
 	u8 *pframe = precv_frame->u.hdr.rx_data;
 	uint pkt_len = precv_frame->u.hdr.len;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	//check A1 matches or not
 	if (!_rtw_memcmp(myid(&(padapter->eeprompriv)), get_da(pframe), ETH_ALEN))
@@ -1479,7 +1479,7 @@ unsigned int OnAssocReq(struct rtw_adapt
 	pos = pframe + (IEEE80211_3ADDR_LEN + ie_offset);
 
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	// check if this stat has been successfully authenticated/assocated
 	if (!((pstat->state) & WIFI_FW_AUTH_SUCCESS))
@@ -1856,12 +1856,12 @@ unsigned int OnAssocReq(struct rtw_adapt
 			u8	attr_content[ 10 ] = { 0x00 };
 			u32	attr_contentlen = 0;
 
-			DBG_8192D( "[%s] WFD IE Found!!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] WFD IE Found!!\n", __func__ );
 			rtw_get_wfd_attr_content( wfd_ie, wfd_ielen, WFD_ATTR_DEVICE_INFO, attr_content, &attr_contentlen);
 			if ( attr_contentlen )
 			{
 				pwdinfo->wfd_info->peer_rtsp_ctrlport = RTW_GET_BE16( attr_content + 2 );
-				DBG_8192D( "[%s] Peer PORT NUM = %d\n", __FUNCTION__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
+				DBG_8192D( "[%s] Peer PORT NUM = %d\n", __func__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
 			}
 		}
 #endif
@@ -2021,7 +2021,7 @@ unsigned int OnAssocRsp(struct rtw_adapt
 	u8 *pframe = precv_frame->u.hdr.rx_data;
 	uint pkt_len = precv_frame->u.hdr.len;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	//check A1 matches or not
 	if (!_rtw_memcmp(myid(&(padapter->eeprompriv)), get_da(pframe), ETH_ALEN))
@@ -2070,7 +2070,7 @@ unsigned int OnAssocRsp(struct rtw_adapt
 #if defined(CONFIG_P2P) && defined(CONFIG_WFD)
 				else if ( _rtw_memcmp(pIE->data, WFD_OUI, 4))		//WFD
 				{
-					DBG_8192D( "[%s] Found WFD IE\n", __FUNCTION__ );
+					DBG_8192D( "[%s] Found WFD IE\n", __func__ );
 					WFD_info_handler( padapter, pIE );
 				}
 #endif
@@ -2137,7 +2137,7 @@ unsigned int OnDeAuth(struct rtw_adapter
 
 	reason = le16_to_cpu(*(unsigned short *)(pframe + WLAN_HDR_A3_LEN));
 
-	DBG_8192D("%s Reason code(%d)\n", __FUNCTION__,reason);
+	DBG_8192D("%s Reason code(%d)\n", __func__,reason);
 
 #ifdef CONFIG_AP_MODE
 	if(check_fwstate(pmlmepriv, WIFI_AP_STATE) == true)
@@ -2145,7 +2145,7 @@ unsigned int OnDeAuth(struct rtw_adapter
 		struct sta_info *psta;
 		struct sta_priv *pstapriv = &padapter->stapriv;
 
-		DBG_8192D("%s, STA: %pM\n", __FUNCTION__, GetAddr2Ptr(pframe));
+		DBG_8192D("%s, STA: %pM\n", __func__, GetAddr2Ptr(pframe));
 
 		psta = rtw_get_stainfo(pstapriv, GetAddr2Ptr(pframe));
 		if(psta)
@@ -2171,7 +2171,7 @@ unsigned int OnDeAuth(struct rtw_adapter
 	else
 #endif
 	{
-		DBG_8192D("%s, STA: %pM\n", __FUNCTION__, GetAddr3Ptr(pframe));
+		DBG_8192D("%s, STA: %pM\n", __func__, GetAddr3Ptr(pframe));
 
 		receive_disconnect(padapter, GetAddr3Ptr(pframe) ,reason);
 	}
@@ -2205,7 +2205,7 @@ unsigned int OnDisassoc(struct rtw_adapt
 
 	reason = le16_to_cpu(*(unsigned short *)(pframe + WLAN_HDR_A3_LEN));
 
-        DBG_8192D("%s Reason code(%d)\n", __FUNCTION__,reason);
+        DBG_8192D("%s Reason code(%d)\n", __func__,reason);
 
 #ifdef CONFIG_AP_MODE
 	if(check_fwstate(pmlmepriv, WIFI_AP_STATE) == true)
@@ -2213,7 +2213,7 @@ unsigned int OnDisassoc(struct rtw_adapt
 		struct sta_info *psta;
 		struct sta_priv *pstapriv = &padapter->stapriv;
 
-		DBG_8192D("%s, STA: %pM\n", __FUNCTION__, GetAddr2Ptr(pframe));
+		DBG_8192D("%s, STA: %pM\n", __func__, GetAddr2Ptr(pframe));
 
 		psta = rtw_get_stainfo(pstapriv, GetAddr2Ptr(pframe));
 		if(psta)
@@ -2238,7 +2238,7 @@ unsigned int OnDisassoc(struct rtw_adapt
 	else
 #endif
 	{
-		DBG_8192D("%s, STA: %pM\n", __FUNCTION__, GetAddr3Ptr(pframe));
+		DBG_8192D("%s, STA: %pM\n", __func__, GetAddr3Ptr(pframe));
 
 		receive_disconnect(padapter, GetAddr3Ptr(pframe), reason);
 	}
@@ -2249,7 +2249,7 @@ unsigned int OnDisassoc(struct rtw_adapt
 
 unsigned int OnAtim(struct rtw_adapter *padapter, union recv_frame *precv_frame)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 	return _SUCCESS;
 }
 
@@ -2386,7 +2386,7 @@ unsigned int OnAction_back(struct rtw_ad
 	if (!_rtw_memcmp(myid(&(padapter->eeprompriv)), get_da(pframe), ETH_ALEN))
 		return _SUCCESS;
 */
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if((pmlmeinfo->state&0x03) != WIFI_FW_AP_STATE)
 		if (!(pmlmeinfo->state & WIFI_FW_ASSOC_SUCCESS))
@@ -2418,7 +2418,7 @@ unsigned int OnAction_back(struct rtw_ad
 		}
 
 		action = frame_body[1];
-		DBG_8192D("%s, action=%d\n", __FUNCTION__, action);
+		DBG_8192D("%s, action=%d\n", __func__, action);
 		switch (action)
 		{
 			case RTW_WLAN_ACTION_ADDBA_REQ: //ADDBA request
@@ -2475,12 +2475,12 @@ unsigned int OnAction_back(struct rtw_ad
 					preorder_ctrl->enable = false;
 					preorder_ctrl->indicate_seq = 0xffff;
 					#ifdef DBG_RX_SEQ
-					DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
+					DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __func__, __LINE__,
 						preorder_ctrl->indicate_seq);
 					#endif
 				}
 
-				DBG_8192D("%s(): DELBA: %x(%x)\n", __FUNCTION__,pmlmeinfo->agg_enable_bitmap, reason_code);
+				DBG_8192D("%s(): DELBA: %x(%x)\n", __func__,pmlmeinfo->agg_enable_bitmap, reason_code);
 				//todo: how to notify the host while receiving DELETE BA
 				break;
 
@@ -2563,7 +2563,7 @@ void issue_p2p_GO_request(struct rtw_ada
 		return;
 	}
 
-	DBG_8192D( "[%s] In\n", __FUNCTION__ );
+	DBG_8192D( "[%s] In\n", __func__ );
 	//update attribute
 	pattrib = &pmgntframe->attrib;
 	update_mgntframe_attrib(padapter, pattrib);
@@ -3011,7 +3011,7 @@ void issue_p2p_GO_response(struct rtw_ad
 		return;
 	}
 
-	DBG_8192D( "[%s] In, result = %d\n", __FUNCTION__,  result );
+	DBG_8192D( "[%s] In, result = %d\n", __func__,  result );
 	//update attribute
 	pattrib = &pmgntframe->attrib;
 	update_mgntframe_attrib(padapter, pattrib);
@@ -3485,7 +3485,7 @@ void issue_p2p_GO_confirm(struct rtw_ada
 		return;
 	}
 
-	DBG_8192D( "[%s] In\n", __FUNCTION__ );
+	DBG_8192D( "[%s] In\n", __func__ );
 	//update attribute
 	pattrib = &pmgntframe->attrib;
 	update_mgntframe_attrib(padapter, pattrib);
@@ -4327,7 +4327,7 @@ void issue_p2p_provision_request(struct
 		return;
 	}
 
-	DBG_8192D( "[%s] In\n", __FUNCTION__ );
+	DBG_8192D( "[%s] In\n", __func__ );
 	//update attribute
 	pattrib = &pmgntframe->attrib;
 	update_mgntframe_attrib(padapter, pattrib);
@@ -4414,17 +4414,17 @@ u8 is_matched_in_profilelist( u8* peerma
 {
 	u8 i, match_result = 0;
 
-	DBG_8192D( "[%s] peermac = %.2X %.2X %.2X %.2X %.2X %.2X\n", __FUNCTION__,
+	DBG_8192D( "[%s] peermac = %.2X %.2X %.2X %.2X %.2X %.2X\n", __func__,
 		    peermacaddr[0], peermacaddr[1],peermacaddr[2],peermacaddr[3],peermacaddr[4],peermacaddr[5]);
 
 	for( i = 0; i < P2P_MAX_PERSISTENT_GROUP_NUM; i++, profileinfo++ )
 	{
-	       DBG_8192D( "[%s] profileinfo_mac = %.2X %.2X %.2X %.2X %.2X %.2X\n", __FUNCTION__,
+	       DBG_8192D( "[%s] profileinfo_mac = %.2X %.2X %.2X %.2X %.2X %.2X\n", __func__,
 			    profileinfo->peermac[0], profileinfo->peermac[1],profileinfo->peermac[2],profileinfo->peermac[3],profileinfo->peermac[4],profileinfo->peermac[5]);
 		if ( _rtw_memcmp( peermacaddr, profileinfo->peermac, ETH_ALEN ) )
 		{
 			match_result = 1;
-			DBG_8192D( "[%s] Match!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] Match!\n", __func__ );
 			break;
 		}
 	}
@@ -4462,7 +4462,7 @@ void issue_probersp_p2p(struct rtw_adapt
 	u8 zero_array_check[L2SDTA_SERVICE_VE_LEN] = { 0x00 };
 #endif //CONFIG_INTEL_WIDI
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -5254,7 +5254,7 @@ unsigned int on_action_public_p2p(union
 		{
 			case P2P_GO_NEGO_REQ:
 			{
-				DBG_8192D( "[%s] Got GO Nego Req Frame\n", __FUNCTION__);
+				DBG_8192D( "[%s] Got GO Nego Req Frame\n", __func__);
 				memset( &pwdinfo->groupid_info, 0x00, sizeof( struct group_id_info ) );
 
 				if(rtw_p2p_chk_state(pwdinfo, P2P_STATE_RX_PROVISION_DIS_REQ))
@@ -5269,7 +5269,7 @@ unsigned int on_action_public_p2p(union
 					_cancel_timer_ex( &pwdinfo->restore_p2p_state_timer );
 					//	Restore the previous p2p state
 					rtw_p2p_set_state(pwdinfo, rtw_p2p_pre_state(pwdinfo));
-					DBG_8192D( "[%s] Restore the previous p2p state to %d\n", __FUNCTION__, rtw_p2p_state(pwdinfo) );
+					DBG_8192D( "[%s] Restore the previous p2p state to %d\n", __func__, rtw_p2p_state(pwdinfo) );
 				}
 #ifdef CONFIG_CONCURRENT_MODE
 				if ( check_buddy_fwstate(padapter, _FW_LINKED ) )
@@ -5310,7 +5310,7 @@ unsigned int on_action_public_p2p(union
 			}
 			case P2P_GO_NEGO_RESP:
 			{
-				DBG_8192D( "[%s] Got GO Nego Resp Frame\n", __FUNCTION__);
+				DBG_8192D( "[%s] Got GO Nego Resp Frame\n", __func__);
 
 				if(rtw_p2p_chk_state(pwdinfo, P2P_STATE_GONEGO_ING))
 				{
@@ -5340,14 +5340,14 @@ unsigned int on_action_public_p2p(union
 				}
 				else
 				{
-					DBG_8192D( "[%s] Skipped GO Nego Resp Frame (p2p_state != P2P_STATE_GONEGO_ING)\n", __FUNCTION__);
+					DBG_8192D( "[%s] Skipped GO Nego Resp Frame (p2p_state != P2P_STATE_GONEGO_ING)\n", __func__);
 				}
 
 				break;
 			}
 			case P2P_GO_NEGO_CONF:
 			{
-				DBG_8192D( "[%s] Got GO Nego Confirm Frame\n", __FUNCTION__);
+				DBG_8192D( "[%s] Got GO Nego Confirm Frame\n", __func__);
 				result = process_p2p_group_negotation_confirm( pwdinfo, frame_body, len);
 				if ( P2P_STATUS_SUCCESS == result )
 				{
@@ -5365,7 +5365,7 @@ unsigned int on_action_public_p2p(union
 				//	Added by Albert 2010/10/05
 				//	Received the P2P Invite Request frame.
 
-				DBG_8192D( "[%s] Got invite request frame!\n", __FUNCTION__ );
+				DBG_8192D( "[%s] Got invite request frame!\n", __func__ );
 				if ( (p2p_ie=rtw_get_p2p_ie( frame_body + _PUBLIC_ACTION_IE_OFFSET_, len - _PUBLIC_ACTION_IE_OFFSET_, NULL, &p2p_ielen)) )
 				{
 					//	Parse the necessary information from the P2P Invitation Request frame.
@@ -5388,7 +5388,7 @@ unsigned int on_action_public_p2p(union
 
 						if ( attr_contentlen )
 						{
-							DBG_8192D( "[%s] GO's BSSID = %.2X %.2X %.2X %.2X %.2X %.2X\n", __FUNCTION__,
+							DBG_8192D( "[%s] GO's BSSID = %.2X %.2X %.2X %.2X %.2X %.2X\n", __func__,
 									pwdinfo->p2p_peer_interface_addr[0], pwdinfo->p2p_peer_interface_addr[1],
 									pwdinfo->p2p_peer_interface_addr[2], pwdinfo->p2p_peer_interface_addr[3],
 									pwdinfo->p2p_peer_interface_addr[4], pwdinfo->p2p_peer_interface_addr[5] );
@@ -5460,7 +5460,7 @@ unsigned int on_action_public_p2p(union
 							}
 							else
 							{
-								DBG_8192D( "[%s] P2P Group ID Attribute NOT FOUND!\n", __FUNCTION__ );
+								DBG_8192D( "[%s] P2P Group ID Attribute NOT FOUND!\n", __func__ );
 								status_code = P2P_STATUS_FAIL_INFO_UNAVAILABLE;
 							}
 						}
@@ -5494,18 +5494,18 @@ unsigned int on_action_public_p2p(union
 							}
 							else
 							{
-								DBG_8192D( "[%s] P2P Group ID Attribute NOT FOUND!\n", __FUNCTION__ );
+								DBG_8192D( "[%s] P2P Group ID Attribute NOT FOUND!\n", __func__ );
 								status_code = P2P_STATUS_FAIL_INFO_UNAVAILABLE;
 							}
 						}
 					}
 					else
 					{
-						DBG_8192D( "[%s] P2P Invitation Flags Attribute NOT FOUND!\n", __FUNCTION__ );
+						DBG_8192D( "[%s] P2P Invitation Flags Attribute NOT FOUND!\n", __func__ );
 						status_code = P2P_STATUS_FAIL_INFO_UNAVAILABLE;
 					}
 
-					DBG_8192D( "[%s] status_code = %d\n", __FUNCTION__, status_code );
+					DBG_8192D( "[%s] status_code = %d\n", __func__, status_code );
 
 					pwdinfo->inviteresp_info.token = frame_body[ 7 ];
 					issue_p2p_invitation_response( padapter, GetAddr2Ptr(pframe), pwdinfo->inviteresp_info.token, status_code );
@@ -5524,7 +5524,7 @@ unsigned int on_action_public_p2p(union
 				u8	attr_content = 0x00;
 				u32	attr_contentlen = 0;
 
-				DBG_8192D( "[%s] Got invite response frame!\n", __FUNCTION__ );
+				DBG_8192D( "[%s] Got invite response frame!\n", __func__ );
 				_cancel_timer_ex( &pwdinfo->restore_p2p_state_timer );
 				if ( (p2p_ie=rtw_get_p2p_ie( frame_body + _PUBLIC_ACTION_IE_OFFSET_, len - _PUBLIC_ACTION_IE_OFFSET_, NULL, &p2p_ielen)) )
 				{
@@ -5532,7 +5532,7 @@ unsigned int on_action_public_p2p(union
 
 					if ( attr_contentlen == 1 )
 					{
-						DBG_8192D( "[%s] Status = %d\n", __FUNCTION__, attr_content );
+						DBG_8192D( "[%s] Status = %d\n", __func__, attr_content );
 						pwdinfo->invitereq_info.benable = false;
 
 						if ( attr_content == P2P_STATUS_SUCCESS )
@@ -5584,7 +5584,7 @@ unsigned int on_action_public_p2p(union
 				break;
 
 			case P2P_PROVISION_DISC_REQ:
-				DBG_8192D( "[%s] Got Provisioning Discovery Request Frame\n", __FUNCTION__ );
+				DBG_8192D( "[%s] Got Provisioning Discovery Request Frame\n", __func__ );
 				process_p2p_provdisc_req(pwdinfo, pframe, len);
 				memcpy(pwdinfo->rx_prov_disc_info.peerDevAddr, GetAddr2Ptr(pframe), ETH_ALEN);
 
@@ -5607,7 +5607,7 @@ unsigned int on_action_public_p2p(union
 			case P2P_PROVISION_DISC_RESP:
 				//	Commented by Albert 20110707
 				//	Should we check the pwdinfo->tx_prov_disc_info.bsent flag here??
-				DBG_8192D( "[%s] Got Provisioning Discovery Response Frame\n", __FUNCTION__ );
+				DBG_8192D( "[%s] Got Provisioning Discovery Response Frame\n", __func__ );
 				//	Commented by Albert 20110426
 				//	The restore timer is enabled when issuing the provisioing request frame in rtw_p2p_prov_disc function.
 				_cancel_timer_ex( &pwdinfo->restore_p2p_state_timer );
@@ -5714,7 +5714,7 @@ unsigned int OnAction_p2p(struct rtw_ada
 	struct	wifidirect_info	*pwdinfo = &( padapter->wdinfo );
 
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	//check RA matches or not
 	if (!_rtw_memcmp(myid(&(padapter->eeprompriv)), GetAddr1Ptr(pframe), ETH_ALEN))//for if1, sta/ap mode
@@ -5812,13 +5812,13 @@ struct xmit_frame *alloc_mgtxmitframe(st
 
 	if ((pmgntframe = rtw_alloc_xmitframe(pxmitpriv)) == NULL)
 	{
-		DBG_8192D("%s, alloc xmitframe fail\n", __FUNCTION__);
+		DBG_8192D("%s, alloc xmitframe fail\n", __func__);
 		return NULL;
 	}
 
 	if ((pxmitbuf = rtw_alloc_xmitbuf_ext(pxmitpriv)) == NULL)
 	{
-		DBG_8192D("%s, alloc xmitbuf fail\n", __FUNCTION__);
+		DBG_8192D("%s, alloc xmitbuf fail\n", __func__);
 		rtw_free_xmitframe(pxmitpriv, pmgntframe);
 		return NULL;
 	}
@@ -5848,7 +5848,7 @@ void update_mgnt_tx_rate(struct rtw_adap
 
 	pmlmeext->tx_rate = rate;
 
-	//DBG_8192D("%s(): rate = %x\n",__FUNCTION__, rate);
+	//DBG_8192D("%s(): rate = %x\n",__func__, rate);
 }
 
 void update_mgntframe_attrib(struct rtw_adapter *padapter, struct pkt_attrib *pattrib)
@@ -5957,7 +5957,7 @@ int update_hidden_ssid(u8 *ies, u32 ies_
 
 	ssid_ie = rtw_get_ie(ies,  WLAN_EID_SSID, &ssid_len_ori, ies_len);
 
-	//DBG_8192D("%s hidden_ssid_mode:%u, ssid_ie:%p, ssid_len_ori:%d\n", __FUNCTION__, hidden_ssid_mode, ssid_ie, ssid_len_ori);
+	//DBG_8192D("%s hidden_ssid_mode:%u, ssid_ie:%p, ssid_len_ori:%d\n", __func__, hidden_ssid_mode, ssid_ie, ssid_len_ori);
 
 	if(ssid_ie && ssid_len_ori>0)
 	{
@@ -6008,11 +6008,11 @@ void issue_beacon(struct rtw_adapter *pa
 #endif //CONFIG_P2P
 
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
-		DBG_8192D("%s, alloc mgnt frame fail\n", __FUNCTION__);
+		DBG_8192D("%s, alloc mgnt frame fail\n", __func__);
 		return;
 	}
 #if defined (CONFIG_AP_MODE) && defined (CONFIG_NATIVEAP_MLME)
@@ -6324,11 +6324,11 @@ void issue_probersp(struct rtw_adapter *
 #endif //CONFIG_WFD
 #endif //CONFIG_P2P
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
-		DBG_8192D("%s, alloc mgnt frame fail\n", __FUNCTION__);
+		DBG_8192D("%s, alloc mgnt frame fail\n", __func__);
 		return;
 	}
 
@@ -6795,7 +6795,7 @@ void issue_auth(struct rtw_adapter *pada
 			val16 = cpu_to_le16(val16);
 			use_shared_key = 1;
 		}
-		//DBG_8192D("%s auth_algo= %s auth_seq=%d\n",__FUNCTION__,(pmlmeinfo->auth_algo==0)?"OPEN":"SHARED",pmlmeinfo->auth_seq);
+		//DBG_8192D("%s auth_algo= %s auth_seq=%d\n",__func__,(pmlmeinfo->auth_algo==0)?"OPEN":"SHARED",pmlmeinfo->auth_seq);
 
 		//setting IV for auth seq #3
 		if ((pmlmeinfo->auth_seq == 3) && (pmlmeinfo->state & WIFI_FW_AUTH_STATE) && (use_shared_key==1))
@@ -6872,7 +6872,7 @@ void issue_asocrsp(struct rtw_adapter *p
 #endif //CONFIG_WFD
 #endif //CONFIG_P2P
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -7155,7 +7155,7 @@ void issue_assocreq(struct rtw_adapter *
 
 		if (j == sta_bssrate_len) {
 			// the rate is not supported by STA
-			DBG_8192D("%s(): the rate[%d]=%02X is not supported by STA!\n",__FUNCTION__, i, pmlmeinfo->network.SupportedRates[i]);
+			DBG_8192D("%s(): the rate[%d]=%02X is not supported by STA!\n",__func__, i, pmlmeinfo->network.SupportedRates[i]);
 		} else {
 			// the rate is supported by STA
 			bssrate[index++] = pmlmeinfo->network.SupportedRates[i];
@@ -7555,7 +7555,7 @@ static int _issue_nulldata(struct rtw_ad
 	struct mlme_ext_priv	*pmlmeext;
 	struct mlme_ext_info	*pmlmeinfo;
 
-	//DBG_8192D("%s:%d\n", __FUNCTION__, power_mode);
+	//DBG_8192D("%s:%d\n", __func__, power_mode);
 
 	if(!padapter)
 		goto exit;
@@ -7686,7 +7686,7 @@ static int _issue_qos_nulldata(struct rt
 	struct mlme_ext_priv	*pmlmeext = &(padapter->mlmeextpriv);
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -8011,7 +8011,7 @@ void issue_action_BA(struct rtw_adapter
 	struct registry_priv		*pregpriv = &padapter->registrypriv;
 
 
-	DBG_8192D("%s, category=%d, action=%d, status=%d\n", __FUNCTION__, category, action, status);
+	DBG_8192D("%s, category=%d, action=%d, status=%d\n", __func__, category, action, status);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -8145,7 +8145,7 @@ static void issue_action_BSSCoexistPacke
 		return;
 
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 
 	category = RTW_WLAN_CATEGORY_PUBLIC;
@@ -8294,7 +8294,7 @@ unsigned int send_delba(struct rtw_adapt
 	if(psta==NULL)
 		return _SUCCESS;
 
-	//DBG_8192D("%s:%s\n", __FUNCTION__, (initiator==0)?"RX_DIR":"TX_DIR");
+	//DBG_8192D("%s:%s\n", __func__, (initiator==0)?"RX_DIR":"TX_DIR");
 
 	if(initiator==0) // recipient
 	{
@@ -8307,7 +8307,7 @@ unsigned int send_delba(struct rtw_adapt
 				psta->recvreorder_ctrl[tid].enable = false;
 				psta->recvreorder_ctrl[tid].indicate_seq = 0xffff;
 				#ifdef DBG_RX_SEQ
-				DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
+				DBG_8192D("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __func__, __LINE__,
 					psta->recvreorder_ctrl[tid].indicate_seq);
 				#endif
 			}
@@ -8356,13 +8356,13 @@ unsigned int send_beacon(struct rtw_adap
 	if(padapter->bSurpriseRemoved || padapter->bDriverStopped)
 		return _FAIL;
 	if(false == bxmitok) {
-		DBG_8192D("%s fail! %u ms\n", __FUNCTION__, rtw_get_passing_time_ms(start));
+		DBG_8192D("%s fail! %u ms\n", __func__, rtw_get_passing_time_ms(start));
 		return _FAIL;
 	} else {
 		u32 passing_time = rtw_get_passing_time_ms(start);
 
 		if(passing_time > 100 || issue > 3)
-			DBG_8192D("%s success, issue:%d, poll:%d, %u ms\n", __FUNCTION__, issue, poll, rtw_get_passing_time_ms(start));
+			DBG_8192D("%s success, issue:%d, poll:%d, %u ms\n", __func__, issue, poll, rtw_get_passing_time_ms(start));
 		return _SUCCESS;
 	}
 }
@@ -8599,7 +8599,7 @@ void site_survey(struct rtw_adapter *pad
 				rtw_p2p_findphase_ex_set(pwdinfo, P2P_FINDPHASE_EX_MAX);
 			}
 			#ifdef CONFIG_DBG_P2P
-			DBG_8192D( "[%s] find phase exchange cnt = %d\n", __FUNCTION__, pwdinfo->find_phase_state_exchange_cnt );
+			DBG_8192D( "[%s] find phase exchange cnt = %d\n", __func__, pwdinfo->find_phase_state_exchange_cnt );
 			#endif
 		}
 
@@ -8805,7 +8805,7 @@ u8 collect_bss_info(struct rtw_adapter *
 	{
 		if (len > NDIS_802_11_LENGTH_SSID)
 		{
-			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __FUNCTION__, __LINE__, len);
+			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __func__, __LINE__, len);
 			return _FAIL;
 		}
 		memcpy(bssid->Ssid.Ssid, (p + 2), *(p + 1));
@@ -8825,7 +8825,7 @@ u8 collect_bss_info(struct rtw_adapter *
 	{
 		if (len > NDIS_802_11_LENGTH_RATES_EX)
 		{
-			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __FUNCTION__, __LINE__, len);
+			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __func__, __LINE__, len);
 			return _FAIL;
 		}
 		memcpy(bssid->SupportedRates, (p + 2), len);
@@ -8837,7 +8837,7 @@ u8 collect_bss_info(struct rtw_adapter *
 	{
 		if (len > (NDIS_802_11_LENGTH_RATES_EX-i))
 		{
-			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __FUNCTION__, __LINE__, len);
+			DBG_8192D("%s()-%d: IE too long (%d) for survey event\n", __func__, __LINE__, len);
 			return _FAIL;
 		}
 		memcpy(bssid->SupportedRates + i, (p + 2), len);
@@ -9144,7 +9144,7 @@ unsigned int receive_disconnect(struct r
 	if (!(_rtw_memcmp(MacAddr, get_my_bssid(&pmlmeinfo->network), ETH_ALEN)))
 		return _SUCCESS;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if((pmlmeinfo->state&0x03) == WIFI_FW_STATION_STATE)
 	{
@@ -9202,7 +9202,7 @@ static void process_80211d(struct rtw_ad
 		memcpy(country, p, 3);
 		p += 3;
 		RT_TRACE(_module_rtl871x_mlme_c_, _drv_notice_,
-				("%s: 802.11d country=%s\n", __FUNCTION__, country));
+				("%s: 802.11d country=%s\n", __func__, country));
 
 		i = 0;
 		while ((ie - p) >= 3)
@@ -9423,7 +9423,7 @@ static void process_80211d(struct rtw_ad
 				chplan_new[i].ScanType = SCAN_ACTIVE;
 				RT_TRACE(_module_rtl871x_mlme_c_, _drv_notice_,
 						 ("%s: change channel %d scan type from passive to active\n",
-						  __FUNCTION__, channel));
+						  __func__, channel));
 			}
 			break;
 		}
@@ -9856,7 +9856,7 @@ exit_mlmeext_joinbss_event_callback:
 	concurrent_chk_joinbss_done(padapter, join_res);
 #endif
 
-	DBG_8192D("=>%s\n", __FUNCTION__);
+	DBG_8192D("=>%s\n", __func__);
 
 }
 
@@ -9866,7 +9866,7 @@ void mlmeext_sta_add_event_callback(stru
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
 	u8	join_type;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if((pmlmeinfo->state&0x03) == WIFI_FW_ADHOC_STATE)
 	{
@@ -10143,7 +10143,7 @@ void linked_status_chk(struct rtw_adapte
 
 				if (tx_chk != _SUCCESS && pmlmeinfo->link_count++ == 0xf) {
 					#ifdef DBG_EXPIRATION_CHK
-					DBG_8192D("%s issue_nulldata 0\n", __FUNCTION__);
+					DBG_8192D("%s issue_nulldata 0\n", __func__);
 					#endif
 					tx_chk = issue_nulldata(padapter, NULL, 0, 1, 0);
 				}
@@ -10241,7 +10241,7 @@ void survey_timer_hdl(struct rtw_adapter
 			{
 				rtw_p2p_findphase_ex_set(pwdinfo, P2P_FINDPHASE_EX_MAX);
 				pmlmeext->sitesurvey_res.channel_idx = 3;
-				DBG_8192D("%s idx:%d, cnt:%u\n", __FUNCTION__
+				DBG_8192D("%s idx:%d, cnt:%u\n", __func__
 					, pmlmeext->sitesurvey_res.channel_idx
 					, pwdinfo->find_phase_state_exchange_cnt
 				);
@@ -10250,7 +10250,7 @@ void survey_timer_hdl(struct rtw_adapter
 			#endif
 			{
 				pmlmeext->sitesurvey_res.channel_idx = pmlmeext->sitesurvey_res.ch_num;
-				DBG_8192D("%s idx:%d\n", __FUNCTION__
+				DBG_8192D("%s idx:%d\n", __func__
 					, pmlmeext->sitesurvey_res.channel_idx
 				);
 			}
@@ -11253,20 +11253,20 @@ void change_band_update_ie(struct rtw_ad
 	struct mlme_ext_info *pmlmeinfo = &(pmlmeext->mlmext_info);
 	u8	erpinfo=0x4;
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	if(pmlmeext->cur_channel >= 36)
 	{
 		network_type = WIRELESS_11A;
 		total_rate_len = IEEE80211_NUM_OFDM_RATESLEN;
-		DBG_8192D("%s(): change to 5G Band\n",__FUNCTION__);
+		DBG_8192D("%s(): change to 5G Band\n",__func__);
 		rtw_remove_bcn_ie(padapter, pnetwork, _ERPINFO_IE_);
 	}
 	else
 	{
 		network_type = WIRELESS_11BG;
 		total_rate_len = IEEE80211_CCK_RATE_LEN+IEEE80211_NUM_OFDM_RATESLEN;
-		DBG_8192D("%s(): change to 2.4G Band\n",__FUNCTION__);
+		DBG_8192D("%s(): change to 2.4G Band\n",__func__);
 		rtw_add_bcn_ie(padapter, pnetwork, _ERPINFO_IE_, &erpinfo, 1);
 	}
 
@@ -12303,7 +12303,7 @@ u8 tdls_hdl(struct rtw_adapter *padapter
 	}
 
 	//spin_lock_bh(&(ptdlsinfo->hdl_lock));
-	DBG_8192D("[%s] option:%d\n", __FUNCTION__, option);
+	DBG_8192D("[%s] option:%d\n", __func__, option);
 
 	switch(option){
 		case TDLS_WRCR:
--- a/drivers/staging/rtl8192du/core/rtw_p2p.c
+++ b/drivers/staging/rtl8192du/core/rtw_p2p.c
@@ -82,7 +82,7 @@ static u32 go_add_group_info_attr(struct
 	struct rtw_adapter *padapter = pwdinfo->padapter;
 	struct sta_priv *pstapriv = &padapter->stapriv;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	pdata_attr = rtw_zmalloc(MAX_P2P_IE_LEN);
 
@@ -187,7 +187,7 @@ static void issue_group_disc_req(struct
 	u8	oui_subtype = P2P_GO_DISC_REQUEST;
 	u8	dialogToken=0;
 
-	DBG_8192D("[%s]\n", __FUNCTION__);
+	DBG_8192D("[%s]\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -248,7 +248,7 @@ static void issue_p2p_devdisc_resp(struc
 	u8 p2pie[8] = { 0x00 };
 	u32 p2pielen = 0;
 
-	DBG_8192D("[%s]\n", __FUNCTION__);
+	DBG_8192D("[%s]\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -418,7 +418,7 @@ static void issue_p2p_presence_resp(stru
 	u8 noa_attr_content[32] = { 0x00 };
 	u32 p2pielen = 0;
 
-	DBG_8192D("[%s]\n", __FUNCTION__);
+	DBG_8192D("[%s]\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -2363,12 +2363,12 @@ u32 process_assoc_req_p2p_ie(struct wifi
 
 	if ( !p2p_ie )
 	{
-		DBG_8192D( "[%s] P2P IE not Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] P2P IE not Found!!\n", __func__ );
 		status_code =  P2P_STATUS_FAIL_INVALID_PARAM;
 	}
 	else
 	{
-		DBG_8192D( "[%s] P2P IE Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] P2P IE Found!!\n", __func__ );
 	}
 
 	while ( p2p_ie )
@@ -2376,7 +2376,7 @@ u32 process_assoc_req_p2p_ie(struct wifi
 		//Check P2P Capability ATTR
 		if( rtw_get_p2p_attr_content( p2p_ie, p2p_ielen, P2P_ATTR_CAPABILITY, (u8*)&cap_attr, (uint*) &attr_contentlen) )
 		{
-			DBG_8192D( "[%s] Got P2P Capability Attr!!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] Got P2P Capability Attr!!\n", __func__ );
 			cap_attr = le16_to_cpu(cap_attr);
 			psta->dev_cap = cap_attr&0xff;
 		}
@@ -2387,7 +2387,7 @@ u32 process_assoc_req_p2p_ie(struct wifi
 		//Check P2P Device Info ATTR
 		if(rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_DEVICE_INFO, NULL, (uint*)&attr_contentlen))
 		{
-			DBG_8192D( "[%s] Got P2P DEVICE INFO Attr!!\n", __FUNCTION__ );
+			DBG_8192D( "[%s] Got P2P DEVICE INFO Attr!!\n", __func__ );
 			pattr_content = pbuf = rtw_zmalloc(attr_contentlen);
 			if(pattr_content)
 			{
@@ -2588,7 +2588,7 @@ u8 process_p2p_provdisc_req(struct wifid
 			issue_p2p_provision_resp( pwdinfo, GetAddr2Ptr(pframe), frame_body, uconfig_method);
 		}
 	}
-	DBG_8192D( "[%s] config method = %s\n", __FUNCTION__, pwdinfo->rx_prov_disc_info.strconfig_method_desc_of_prov_disc_req );
+	DBG_8192D( "[%s] config method = %s\n", __func__, pwdinfo->rx_prov_disc_info.strconfig_method_desc_of_prov_disc_req );
 	return true;
 
 }
@@ -2711,7 +2711,7 @@ u8 process_p2p_group_negotation_req( str
 	}
 	else
 	{
-		DBG_8192D( "[%s] WPS IE not Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] WPS IE not Found!!\n", __func__ );
 		result = P2P_STATUS_FAIL_INCOMPATIBLE_PARAM;
 		rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 		return( result );
@@ -2731,7 +2731,7 @@ u8 process_p2p_group_negotation_req( str
 
 	if ( !p2p_ie )
 	{
-		DBG_8192D( "[%s] P2P IE not Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] P2P IE not Found!!\n", __func__ );
 		result = P2P_STATUS_FAIL_INCOMPATIBLE_PARAM;
 		rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 	}
@@ -2763,7 +2763,7 @@ u8 process_p2p_group_negotation_req( str
 
 		if ( rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_GO_INTENT , &attr_content, &attr_contentlen) )
 		{
-			DBG_8192D( "[%s] GO Intent = %d, tie = %d\n", __FUNCTION__, attr_content >> 1, attr_content & 0x01 );
+			DBG_8192D( "[%s] GO Intent = %d, tie = %d\n", __func__, attr_content >> 1, attr_content & 0x01 );
 			pwdinfo->peer_intent = attr_content;	//	include both intent and tie breaker values.
 
 			if ( pwdinfo->intent == ( pwdinfo->peer_intent >> 1 ) )
@@ -2820,7 +2820,7 @@ u8 process_p2p_group_negotation_req( str
 
 			if( ch_num_inclusioned == 0)
 			{
-				DBG_8192D( "[%s] No common channel in channel list!\n", __FUNCTION__ );
+				DBG_8192D( "[%s] No common channel in channel list!\n", __func__ );
 				result = P2P_STATUS_FAIL_NO_COMMON_CH;
 				rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 				break;
@@ -2834,7 +2834,7 @@ u8 process_p2p_group_negotation_req( str
 #ifdef CONFIG_CONCURRENT_MODE
 					if ( check_buddy_fwstate(padapter, _FW_LINKED ) )
 					{
-						DBG_8192D( "[%s] desired channel NOT Found!\n", __FUNCTION__ );
+						DBG_8192D( "[%s] desired channel NOT Found!\n", __func__ );
 						result = P2P_STATUS_FAIL_NO_COMMON_CH;
 						rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 						break;
@@ -2857,13 +2857,13 @@ u8 process_p2p_group_negotation_req( str
 							 *	Change our operating channel as peer's for compatibility.
 							 */
 							pwdinfo->operating_channel = peer_operating_ch;
-							DBG_8192D( "[%s] Change op ch to %02x as peer's\n", __FUNCTION__, pwdinfo->operating_channel);
+							DBG_8192D( "[%s] Change op ch to %02x as peer's\n", __func__, pwdinfo->operating_channel);
 						}
 						else
 						{
 							// Take first channel of ch_list_inclusioned as operating channel
 							pwdinfo->operating_channel = ch_list_inclusioned[0];
-							DBG_8192D( "[%s] Change op ch to %02x\n", __FUNCTION__, pwdinfo->operating_channel);
+							DBG_8192D( "[%s] Change op ch to %02x\n", __func__, pwdinfo->operating_channel);
 						}
 					}
 
@@ -2883,12 +2883,12 @@ u8 process_p2p_group_negotation_req( str
 		u8	attr_content[ 10 ] = { 0x00 };
 		u32	attr_contentlen = 0;
 
-		DBG_8192D( "[%s] WFD IE Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] WFD IE Found!!\n", __func__ );
 		rtw_get_wfd_attr_content( wfd_ie, wfd_ielen, WFD_ATTR_DEVICE_INFO, attr_content, &attr_contentlen);
 		if ( attr_contentlen )
 		{
 			pwdinfo->wfd_info->peer_rtsp_ctrlport = RTW_GET_BE16( attr_content + 2 );
-			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __FUNCTION__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
+			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __func__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
 		}
 	}
 #endif // CONFIG_WFD
@@ -2923,7 +2923,7 @@ u8 process_p2p_group_negotation_resp( st
 	}
 	else
 	{
-		DBG_8192D( "[%s] WPS IE not Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] WPS IE not Found!!\n", __func__ );
 		result = P2P_STATUS_FAIL_INCOMPATIBLE_PARAM;
 		rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 	}
@@ -2966,7 +2966,7 @@ u8 process_p2p_group_negotation_resp( st
 			rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_STATUS, &attr_content, &attr_contentlen);
 			if ( attr_contentlen == 1 )
 			{
-				DBG_8192D( "[%s] Status = %d\n", __FUNCTION__, attr_content );
+				DBG_8192D( "[%s] Status = %d\n", __func__, attr_content );
 				if ( attr_content == P2P_STATUS_SUCCESS )
 				{
 					//	Do nothing.
@@ -2999,7 +2999,7 @@ u8 process_p2p_group_negotation_resp( st
 			attr_contentlen = 0;
 			if ( rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_GO_INTENT , &attr_content, &attr_contentlen) )
 			{
-				DBG_8192D( "[%s] GO Intent = %d, tie = %d\n", __FUNCTION__, attr_content >> 1, attr_content & 0x01 );
+				DBG_8192D( "[%s] GO Intent = %d, tie = %d\n", __func__, attr_content >> 1, attr_content & 0x01 );
 				pwdinfo->peer_intent = attr_content;	//	include both intent and tie breaker values.
 
 				if ( pwdinfo->intent == ( pwdinfo->peer_intent >> 1 ) )
@@ -3052,21 +3052,21 @@ u8 process_p2p_group_negotation_resp( st
 			attr_contentlen = 0;
 			if ( rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_OPERATING_CH, operatingch_info, &attr_contentlen))
 			{
-				DBG_8192D( "[%s] Peer's operating channel = %d\n", __FUNCTION__, operatingch_info[4] );
+				DBG_8192D( "[%s] Peer's operating channel = %d\n", __func__, operatingch_info[4] );
 				pwdinfo->peer_operating_ch = operatingch_info[4];
 			}
 
 			//	Try to get the channel list information
 			if ( rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_CH_LIST, pwdinfo->channel_list_attr, &pwdinfo->channel_list_attr_len ) )
 			{
-				DBG_8192D( "[%s] channel list attribute found, len = %d\n", __FUNCTION__,  pwdinfo->channel_list_attr_len );
+				DBG_8192D( "[%s] channel list attribute found, len = %d\n", __func__,  pwdinfo->channel_list_attr_len );
 
 				peer_ch_num = rtw_p2p_get_peer_ch_list(pwdinfo, pwdinfo->channel_list_attr, pwdinfo->channel_list_attr_len, peer_ch_list);
 				ch_num_inclusioned = rtw_p2p_ch_inclusion(&padapter->mlmeextpriv, peer_ch_list, peer_ch_num, ch_list_inclusioned);
 
 				if( ch_num_inclusioned == 0)
 				{
-					DBG_8192D( "[%s] No common channel in channel list!\n", __FUNCTION__ );
+					DBG_8192D( "[%s] No common channel in channel list!\n", __func__ );
 					result = P2P_STATUS_FAIL_NO_COMMON_CH;
 					rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 					break;
@@ -3080,7 +3080,7 @@ u8 process_p2p_group_negotation_resp( st
 #ifdef CONFIG_CONCURRENT_MODE
 						if ( check_buddy_fwstate(padapter, _FW_LINKED ) )
 						{
-							DBG_8192D( "[%s] desired channel NOT Found!\n", __FUNCTION__ );
+							DBG_8192D( "[%s] desired channel NOT Found!\n", __func__ );
 							result = P2P_STATUS_FAIL_NO_COMMON_CH;
 							rtw_p2p_set_state(pwdinfo, P2P_STATE_GONEGO_FAIL);
 							break;
@@ -3103,13 +3103,13 @@ u8 process_p2p_group_negotation_resp( st
 								 *	Change our operating channel as peer's for compatibility.
 								 */
 								pwdinfo->operating_channel = peer_operating_ch;
-								DBG_8192D( "[%s] Change op ch to %02x as peer's\n", __FUNCTION__, pwdinfo->operating_channel);
+								DBG_8192D( "[%s] Change op ch to %02x as peer's\n", __func__, pwdinfo->operating_channel);
 							}
 							else
 							{
 								// Take first channel of ch_list_inclusioned as operating channel
 								pwdinfo->operating_channel = ch_list_inclusioned[0];
-								DBG_8192D( "[%s] Change op ch to %02x\n", __FUNCTION__, pwdinfo->operating_channel);
+								DBG_8192D( "[%s] Change op ch to %02x\n", __func__, pwdinfo->operating_channel);
 							}
 						}
 
@@ -3119,7 +3119,7 @@ u8 process_p2p_group_negotation_resp( st
 			}
 			else
 			{
-				DBG_8192D( "[%s] channel list attribute not found!\n", __FUNCTION__);
+				DBG_8192D( "[%s] channel list attribute not found!\n", __func__);
 			}
 
 			//	Try to get the group id information if peer is GO
@@ -3145,12 +3145,12 @@ u8 process_p2p_group_negotation_resp( st
 		u8	attr_content[ 10 ] = { 0x00 };
 		u32	attr_contentlen = 0;
 
-		DBG_8192D( "[%s] WFD IE Found!!\n", __FUNCTION__ );
+		DBG_8192D( "[%s] WFD IE Found!!\n", __func__ );
 		rtw_get_wfd_attr_content( wfd_ie, wfd_ielen, WFD_ATTR_DEVICE_INFO, attr_content, &attr_contentlen);
 		if ( attr_contentlen )
 		{
 			pwdinfo->wfd_info->peer_rtsp_ctrlport = RTW_GET_BE16( attr_content + 2 );
-			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __FUNCTION__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
+			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __func__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
 		}
 	}
 #endif // CONFIG_WFD
@@ -3180,7 +3180,7 @@ u8 process_p2p_group_negotation_confirm(
 		rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_STATUS, &attr_content, &attr_contentlen);
 		if ( attr_contentlen == 1 )
 		{
-			DBG_8192D( "[%s] Status = %d\n", __FUNCTION__, attr_content );
+			DBG_8192D( "[%s] Status = %d\n", __func__, attr_content );
 			result = attr_content;
 
 			if ( attr_content == P2P_STATUS_SUCCESS )
@@ -3235,7 +3235,7 @@ u8 process_p2p_group_negotation_confirm(
 		memset( groupid, 0x00, 38 );
 		if ( rtw_get_p2p_attr_content( p2p_ie, p2p_ielen, P2P_ATTR_GROUP_ID, groupid, &attr_contentlen) )
 		{
-			DBG_8192D( "[%s] Ssid = %s, ssidlen = %d\n", __FUNCTION__, &groupid[ETH_ALEN], (u32)strlen(&groupid[ETH_ALEN]) );
+			DBG_8192D( "[%s] Ssid = %s, ssidlen = %d\n", __func__, &groupid[ETH_ALEN], (u32)strlen(&groupid[ETH_ALEN]) );
 			memcpy( pwdinfo->groupid_info.go_device_addr, &groupid[0], ETH_ALEN );
 			memcpy( pwdinfo->groupid_info.ssid, &groupid[6], attr_contentlen - ETH_ALEN );
 		}
@@ -3243,7 +3243,7 @@ u8 process_p2p_group_negotation_confirm(
 		attr_contentlen = 0;
 		if ( rtw_get_p2p_attr_content(p2p_ie, p2p_ielen, P2P_ATTR_OPERATING_CH, operatingch_info, &attr_contentlen) )
 		{
-			DBG_8192D( "[%s] Peer's operating channel = %d\n", __FUNCTION__, operatingch_info[4] );
+			DBG_8192D( "[%s] Peer's operating channel = %d\n", __func__, operatingch_info[4] );
 			pwdinfo->peer_operating_ch = operatingch_info[4];
 		}
 
@@ -3414,7 +3414,7 @@ _func_enter_;
 			//	If the pwdinfo->ext_listen_period = 0, that means the P2P listen state is not available on listen channel.
 			if ( pwdinfo->ext_listen_period > 0 )
 			{
-				DBG_8192D( "[%s] P2P_STATE_IDLE, ext_listen_period = %d\n", __FUNCTION__, pwdinfo->ext_listen_period );
+				DBG_8192D( "[%s] P2P_STATE_IDLE, ext_listen_period = %d\n", __func__, pwdinfo->ext_listen_period );
 
 				if ( pbuddy_mlmeext->cur_channel != pwdinfo->listen_channel )
 				{
@@ -3437,7 +3437,7 @@ _func_enter_;
 				rtw_p2p_chk_state(pwdinfo, P2P_STATE_RX_PROVISION_DIS_REQ) )
 		{
 			//	Now, the driver is in the listen state of P2P mode.
-			DBG_8192D( "[%s] P2P_STATE_IDLE, ext_listen_interval = %d\n", __FUNCTION__, pwdinfo->ext_listen_interval );
+			DBG_8192D( "[%s] P2P_STATE_IDLE, ext_listen_interval = %d\n", __func__, pwdinfo->ext_listen_interval );
 
 			//	Commented by Albert 2012/11/01
 			//	If the AP's channel is the same as the listen channel, we should still be in the listen state
@@ -3556,7 +3556,7 @@ static void ro_ch_timer_process (void *F
 	struct rtw_adapter *adapter = (struct rtw_adapter *)FunctionContext;
 	struct rtw_wdev_priv *pwdev_priv = wdev_to_priv(adapter->rtw_wdev);
 
-	//printk("%s \n", __FUNCTION__);
+	//printk("%s \n", __func__);
 
 #ifdef	CONFIG_CONCURRENT_MODE
 	ATOMIC_SET(&pwdev_priv->ro_ch_to, 1);
@@ -4219,7 +4219,7 @@ _func_enter_;
 					if(pwrpriv->smart_ps != 0)
 					{
 						pwrpriv->smart_ps = 0;
-						DBG_8192D("%s(): Enter CTW, change SmartPS\n", __FUNCTION__);
+						DBG_8192D("%s(): Enter CTW, change SmartPS\n", __func__);
 						rtw_hal_set_hwreg(padapter, HW_VAR_H2C_FW_PWRMODE, (u8 *)(&(padapter->pwrctrlpriv.pwr_mode)));
 					}
 				}
@@ -4305,7 +4305,7 @@ static void reset_ch_sitesurvey_timer_pr
 	if(rtw_p2p_chk_state(pwdinfo, P2P_STATE_NONE))
 		return;
 
-	DBG_8192D( "[%s] In\n", __FUNCTION__ );
+	DBG_8192D( "[%s] In\n", __func__ );
 	//	Reset the operation channel information
 	pwdinfo->rx_invitereq_info.operation_ch[0] = 0;
 	pwdinfo->rx_invitereq_info.scan_op_ch_only = 0;
@@ -4319,7 +4319,7 @@ static void reset_ch_sitesurvey_timer_pr
 	if(rtw_p2p_chk_state(pwdinfo, P2P_STATE_NONE))
 		return;
 
-	DBG_8192D( "[%s] In\n", __FUNCTION__ );
+	DBG_8192D( "[%s] In\n", __func__ );
 	//	Reset the operation channel information
 	pwdinfo->p2p_info.operation_ch[0] = 0;
 	pwdinfo->p2p_info.scan_op_ch_only = 0;
@@ -4378,7 +4378,7 @@ static void pre_tx_scan_timer_process (v
 	}
 	else
 	{
-		DBG_8192D( "[%s] p2p_state is %d, ignore!!\n", __FUNCTION__, rtw_p2p_state(pwdinfo) );
+		DBG_8192D( "[%s] p2p_state is %d, ignore!!\n", __func__, rtw_p2p_state(pwdinfo) );
 	}
 
 	spin_unlock_bh(&pmlmepriv->lock);
@@ -4585,7 +4585,7 @@ void init_wifidirect_info(struct rtw_ada
 	rtw_p2p_findphase_ex_set(pwdinfo, P2P_FINDPHASE_EX_NONE);
 
 	pwdinfo->listen_dwell = ( u8 ) (( rtw_get_current_time() % 3 ) + 1);
-	//DBG_8192D( "[%s] listen_dwell time is %d00ms\n", __FUNCTION__, pwdinfo->listen_dwell );
+	//DBG_8192D( "[%s] listen_dwell time is %d00ms\n", __func__, pwdinfo->listen_dwell );
 
 	memset( &pwdinfo->tx_prov_disc_info, 0x00, sizeof( struct tx_provdisc_req_info ) );
 	pwdinfo->tx_prov_disc_info.wps_config_method_request = WPS_CM_NONE;
--- a/drivers/staging/rtl8192du/core/rtw_pwrctrl.c
+++ b/drivers/staging/rtl8192du/core/rtw_pwrctrl.c
@@ -75,7 +75,7 @@ int ips_leave(struct rtw_adapter * padap
 
 		if((_WEP40_ == psecuritypriv->dot11PrivacyAlgrthm) ||(_WEP104_ == psecuritypriv->dot11PrivacyAlgrthm))
 		{
-			DBG_8192D("==>%s,channel(%d),processing(%x)\n",__FUNCTION__,padapter->mlmeextpriv.cur_channel,pwrpriv->bips_processing);
+			DBG_8192D("==>%s,channel(%d),processing(%x)\n",__func__,padapter->mlmeextpriv.cur_channel,pwrpriv->bips_processing);
 			set_channel_bwmode(padapter, padapter->mlmeextpriv.cur_channel, HAL_PRIME_CHNL_OFFSET_DONT_CARE, HT_CHANNEL_WIDTH_20);
 			for(keyid=0;keyid<4;keyid++){
 				if(pmlmepriv->key_mask & BIT(keyid)){
@@ -200,7 +200,7 @@ void rtw_ps_processor(struct rtw_adapter
 					pwrpriv->ps_flag = true;
 
 				rfpwrstate = RfOnOffDetect(padapter);
-				DBG_8192D("@@@@- #1  %s==> rfstate:%s \n",__FUNCTION__,(rfpwrstate==rf_on)?"rf_on":"rf_off");
+				DBG_8192D("@@@@- #1  %s==> rfstate:%s \n",__func__,(rfpwrstate==rf_on)?"rf_on":"rf_off");
 				if(rfpwrstate!= pwrpriv->rf_pwrstate)
 				{
 					if(rfpwrstate == rf_off)
@@ -219,7 +219,7 @@ void rtw_ps_processor(struct rtw_adapter
 	#endif //CONFIG_AUTOSUSPEND
 		{
 			rfpwrstate = RfOnOffDetect(padapter);
-			DBG_8192D("@@@@- #2  %s==> rfstate:%s \n",__FUNCTION__,(rfpwrstate==rf_on)?"rf_on":"rf_off");
+			DBG_8192D("@@@@- #2  %s==> rfstate:%s \n",__func__,(rfpwrstate==rf_on)?"rf_on":"rf_off");
 
 			if(rfpwrstate!= pwrpriv->rf_pwrstate)
 			{
@@ -254,7 +254,7 @@ void rtw_ps_processor(struct rtw_adapter
 
 	if((pwrpriv->rf_pwrstate == rf_on) && ((pwrpriv->pwr_state_check_cnts%4)==0))
 	{
-		DBG_8192D("==>%s .fw_state(%x)\n",__FUNCTION__,get_fwstate(pmlmepriv));
+		DBG_8192D("==>%s .fw_state(%x)\n",__func__,get_fwstate(pmlmepriv));
 		pwrpriv->change_rfpwrstate = rf_off;
 
 		#ifdef CONFIG_AUTOSUSPEND
@@ -312,7 +312,7 @@ _func_enter_;
 
 	if (pwrpriv->rpwm == pslv) {
 		RT_TRACE(_module_rtl871x_pwrctrl_c_,_drv_err_,
-			("%s: Already set rpwm[0x%02x]!\n", __FUNCTION__, pslv));
+			("%s: Already set rpwm[0x%02x]!\n", __func__, pslv));
 		return;
 	}
 
@@ -320,7 +320,7 @@ _func_enter_;
 		(padapter->bSurpriseRemoved == true)) {
 		RT_TRACE(_module_rtl871x_pwrctrl_c_, _drv_err_,
 				 ("%s: bDriverStopped(%d) bSurpriseRemoved(%d)\n",
-				  __FUNCTION__, padapter->bDriverStopped, padapter->bSurpriseRemoved));
+				  __func__, padapter->bDriverStopped, padapter->bSurpriseRemoved));
 		return;
 	}
 
@@ -398,7 +398,7 @@ _func_enter_;
 
 	RT_TRACE(_module_rtl871x_pwrctrl_c_, _drv_notice_,
 			 ("%s: PowerMode=%d Smart_PS=%d\n",
-			  __FUNCTION__, ps_mode, smart_ps));
+			  __func__, ps_mode, smart_ps));
 
 	if(ps_mode > PM_Card_Disable) {
 		RT_TRACE(_module_rtl871x_pwrctrl_c_,_drv_err_,("ps_mode:%d error\n", ps_mode));
@@ -664,7 +664,7 @@ void LeaveAllPowerSaveMode(struct rtw_ad
 
 _func_enter_;
 
-	//DBG_8192D("%s.....\n",__FUNCTION__);
+	//DBG_8192D("%s.....\n",__func__);
 	if (check_fwstate(pmlmepriv, _FW_LINKED) == true)
 	{ //connect
 #ifdef CONFIG_P2P_PS
@@ -1125,7 +1125,7 @@ static void resume_workitem_callback(str
 	struct pwrctrl_priv *pwrpriv = container_of(work, struct pwrctrl_priv, resume_work);
 	struct rtw_adapter *adapter = container_of(pwrpriv, _adapter, pwrctrlpriv);
 
-	DBG_8192D("%s\n",__FUNCTION__);
+	DBG_8192D("%s\n",__func__);
 	rtw_resume_process(adapter);
 }
 
@@ -1164,7 +1164,7 @@ extern int rtw_resume_process(struct rtw
 static void rtw_early_suspend(struct early_suspend *h)
 {
 	struct pwrctrl_priv *pwrpriv = container_of(h, struct pwrctrl_priv, early_suspend);
-	DBG_8192D("%s\n",__FUNCTION__);
+	DBG_8192D("%s\n",__func__);
 
 	rtw_set_do_late_resume(pwrpriv, false);
 }
@@ -1174,7 +1174,7 @@ static void rtw_late_resume(struct early
 	struct pwrctrl_priv *pwrpriv = container_of(h, struct pwrctrl_priv, early_suspend);
 	struct rtw_adapter *adapter = container_of(pwrpriv, _adapter, pwrctrlpriv);
 
-	DBG_8192D("%s\n",__FUNCTION__);
+	DBG_8192D("%s\n",__func__);
 	if(pwrpriv->do_late_resume) {
 		rtw_set_do_late_resume(pwrpriv, false);
 		rtw_resume_process(adapter);
@@ -1183,7 +1183,7 @@ static void rtw_late_resume(struct early
 
 void rtw_register_early_suspend(struct pwrctrl_priv *pwrpriv)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	//jeff: set the early suspend level before blank screen, so we wll do late resume after scree is lit
 	pwrpriv->early_suspend.level = EARLY_SUSPEND_LEVEL_BLANK_SCREEN - 20;
@@ -1196,7 +1196,7 @@ void rtw_register_early_suspend(struct p
 
 void rtw_unregister_early_suspend(struct pwrctrl_priv *pwrpriv)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	rtw_set_do_late_resume(pwrpriv, false);
 
@@ -1213,7 +1213,7 @@ extern int rtw_resume_process(struct rtw
 static void rtw_early_suspend(android_early_suspend_t *h)
 {
 	struct pwrctrl_priv *pwrpriv = container_of(h, struct pwrctrl_priv, early_suspend);
-	DBG_8192D("%s\n",__FUNCTION__);
+	DBG_8192D("%s\n",__func__);
 
 	rtw_set_do_late_resume(pwrpriv, false);
 }
@@ -1223,7 +1223,7 @@ static void rtw_late_resume(android_earl
 	struct pwrctrl_priv *pwrpriv = container_of(h, struct pwrctrl_priv, early_suspend);
 	struct rtw_adapter *adapter = container_of(pwrpriv, _adapter, pwrctrlpriv);
 
-	DBG_8192D("%s\n",__FUNCTION__);
+	DBG_8192D("%s\n",__func__);
 	if(pwrpriv->do_late_resume) {
 		rtw_set_do_late_resume(pwrpriv, false);
 		rtw_resume_process(adapter);
@@ -1232,7 +1232,7 @@ static void rtw_late_resume(android_earl
 
 void rtw_register_early_suspend(struct pwrctrl_priv *pwrpriv)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	//jeff: set the early suspend level before blank screen, so we wll do late resume after scree is lit
 	pwrpriv->early_suspend.level = ANDROID_EARLY_SUSPEND_LEVEL_BLANK_SCREEN - 20;
@@ -1243,7 +1243,7 @@ void rtw_register_early_suspend(struct p
 
 void rtw_unregister_early_suspend(struct pwrctrl_priv *pwrpriv)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	rtw_set_do_late_resume(pwrpriv, false);
 
@@ -1352,7 +1352,7 @@ int _rtw_pwr_wakeup(struct rtw_adapter *
 		}
 		else if(padapter->registrypriv.usbss_enable)
 		{
-			DBG_8192D("%s call autoresume_enter....\n",__FUNCTION__);
+			DBG_8192D("%s call autoresume_enter....\n",__func__);
 			if(_FAIL ==  autoresume_enter(padapter))
 			{
 				DBG_8192D("======> autoresume fail.............\n");
@@ -1364,7 +1364,7 @@ int _rtw_pwr_wakeup(struct rtw_adapter *
 #endif
 		{
 #ifdef CONFIG_IPS
-			DBG_8192D("%s call ips_leave....\n",__FUNCTION__);
+			DBG_8192D("%s call ips_leave....\n",__func__);
 			if(_FAIL ==  ips_leave(padapter))
 			{
 				DBG_8192D("======> ips_leave fail.............\n");
@@ -1431,12 +1431,12 @@ int rtw_pm_set_ips(struct rtw_adapter *p
 
 	if( mode == IPS_NORMAL || mode == IPS_LEVEL_2 ) {
 		rtw_ips_mode_req(pwrctrlpriv, mode);
-		DBG_8192D("%s %s\n", __FUNCTION__, mode == IPS_NORMAL?"IPS_NORMAL":"IPS_LEVEL_2");
+		DBG_8192D("%s %s\n", __func__, mode == IPS_NORMAL?"IPS_NORMAL":"IPS_LEVEL_2");
 		return 0;
 	}
 	else if(mode ==IPS_NONE){
 		rtw_ips_mode_req(pwrctrlpriv, mode);
-		DBG_8192D("%s %s\n", __FUNCTION__, "IPS_NONE");
+		DBG_8192D("%s %s\n", __func__, "IPS_NONE");
 		if((padapter->bSurpriseRemoved ==0)&&(_FAIL == rtw_pwr_wakeup(padapter)) )
 			return -EFAULT;
 	}
--- a/drivers/staging/rtl8192du/core/rtw_recv.c
+++ b/drivers/staging/rtl8192du/core/rtw_recv.c
@@ -1267,7 +1267,7 @@ _func_enter_;
 		if (_rtw_memcmp(myhwaddr, pattrib->src, ETH_ALEN)){
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,(" SA==myself \n"));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s SA=%x:%x:%x:%x:%x:%x, myhwaddr= %x:%x:%x:%x:%x:%x\n", __FUNCTION__,
+			DBG_8192D("DBG_RX_DROP_FRAME %s SA=%x:%x:%x:%x:%x:%x, myhwaddr= %x:%x:%x:%x:%x:%x\n", __func__,
 				pattrib->src[0], pattrib->src[1], pattrib->src[2],
 				pattrib->src[3], pattrib->src[4], pattrib->src[5],
 				*(myhwaddr), *(myhwaddr+1), *(myhwaddr+2),
@@ -1300,7 +1300,7 @@ _func_enter_;
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_info_,("mybssid=%pM\n", mybssid));
 			#ifdef DBG_RX_DROP_FRAME
 			DBG_8192D("DBG_RX_DROP_FRAME %s BSSID=%pM, mybssid=%pM\n",
-				__FUNCTION__, pattrib->bssid, mybssid);
+				__func__, pattrib->bssid, mybssid);
 			DBG_8192D( "this adapter = %d, buddy adapter = %d\n", adapter->adapter_type, adapter->pbuddy_adapter->adapter_type );
 			#endif
 
@@ -1321,7 +1321,7 @@ _func_enter_;
 		if (*psta == NULL) {
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("ap2sta: can't get psta under STATION_MODE ; drop pkt\n"));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s can't get psta under STATION_MODE ; drop pkt\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s can't get psta under STATION_MODE ; drop pkt\n", __func__);
 			#endif
 			ret= _FAIL;
 			goto exit;
@@ -1355,7 +1355,7 @@ _func_enter_;
 		if (*psta == NULL) {
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("can't get psta under MP_MODE ; drop pkt\n"));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s can't get psta under WIFI_MP_STATE ; drop pkt\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s can't get psta under WIFI_MP_STATE ; drop pkt\n", __func__);
 			#endif
 			ret= _FAIL;
 			goto exit;
@@ -1384,7 +1384,7 @@ _func_enter_;
 
 		ret = _FAIL;
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s fw_state:0x%x\n", __FUNCTION__, get_fwstate(pmlmepriv));
+		DBG_8192D("DBG_RX_DROP_FRAME %s fw_state:0x%x\n", __func__, get_fwstate(pmlmepriv));
 		#endif
 	}
 
@@ -1634,7 +1634,7 @@ int validate_recv_mgnt_frame(struct rtw_
 
 	precv_frame = recvframe_chk_defrag(padapter, precv_frame);
 	if (precv_frame == NULL) {
-		RT_TRACE(_module_rtl871x_recv_c_, _drv_notice_,("%s: fragment packet\n",__FUNCTION__));
+		RT_TRACE(_module_rtl871x_recv_c_, _drv_notice_,("%s: fragment packet\n",__func__));
 		return _SUCCESS;
 	}
 
@@ -1730,7 +1730,7 @@ _func_enter_;
 
 	if(ret ==_FAIL){
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s case:%d, res:%d\n", __FUNCTION__, pattrib->to_fr_ds, ret);
+		DBG_8192D("DBG_RX_DROP_FRAME %s case:%d, res:%d\n", __func__, pattrib->to_fr_ds, ret);
 		#endif
 		goto exit;
 	} else if (ret == RTW_RX_HANDLED) {
@@ -2406,7 +2406,7 @@ int check_indicate_seq(struct recv_reord
 	{
 		preorder_ctrl->indicate_seq = seq_num;
 		#ifdef DBG_RX_SEQ
-		DBG_8192D("DBG_RX_SEQ %s:%d init IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+		DBG_8192D("DBG_RX_SEQ %s:%d init IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 			preorder_ctrl->indicate_seq, seq_num);
 		#endif
 
@@ -2422,7 +2422,7 @@ int check_indicate_seq(struct recv_reord
 		//DbgPrint("CheckRxTsIndicateSeq(): Packet Drop! IndicateSeq: %d, NewSeq: %d\n", precvpriv->indicate_seq, seq_num);
 
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("%s IndicateSeq: %d > NewSeq: %d\n", __FUNCTION__,
+		DBG_8192D("%s IndicateSeq: %d > NewSeq: %d\n", __func__,
 			preorder_ctrl->indicate_seq, seq_num);
 		#endif
 
@@ -2439,7 +2439,7 @@ int check_indicate_seq(struct recv_reord
 	{
 		preorder_ctrl->indicate_seq = (preorder_ctrl->indicate_seq + 1) & 0xFFF;
 		#ifdef DBG_RX_SEQ
-		DBG_8192D("DBG_RX_SEQ %s:%d SN_EQUAL IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+		DBG_8192D("DBG_RX_SEQ %s:%d SN_EQUAL IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 			preorder_ctrl->indicate_seq, seq_num);
 		#endif
 	}
@@ -2455,7 +2455,7 @@ int check_indicate_seq(struct recv_reord
 			preorder_ctrl->indicate_seq = 0xFFF - (wsize - (seq_num + 1)) + 1;
 
 		#ifdef DBG_RX_SEQ
-		DBG_8192D("DBG_RX_SEQ %s:%d SN_LESS(wend, seq_num) IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+		DBG_8192D("DBG_RX_SEQ %s:%d SN_LESS(wend, seq_num) IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 			preorder_ctrl->indicate_seq, seq_num);
 		#endif
 	}
@@ -2548,7 +2548,7 @@ int recv_indicatepkts_in_order(struct rt
 	        pattrib = &prframe->u.hdr.attrib;
 		preorder_ctrl->indicate_seq = pattrib->seq_num;
 		#ifdef DBG_RX_SEQ
-		DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+		DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 			preorder_ctrl->indicate_seq, pattrib->seq_num);
 		#endif
 	}
@@ -2574,7 +2574,7 @@ int recv_indicatepkts_in_order(struct rt
 			{
 				preorder_ctrl->indicate_seq = (preorder_ctrl->indicate_seq + 1) & 0xFFF;
 				#ifdef DBG_RX_SEQ
-				DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+				DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 					preorder_ctrl->indicate_seq, pattrib->seq_num);
 				#endif
 			}
@@ -2665,7 +2665,7 @@ int recv_indicatepkt_reorder(struct rtw_
 			}
 
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s pattrib->qos !=1\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s pattrib->qos !=1\n", __func__);
 			#endif
 
 			return _FAIL;
@@ -2677,7 +2677,7 @@ int recv_indicatepkt_reorder(struct rtw_
 			//indicate this recv_frame
 			preorder_ctrl->indicate_seq = pattrib->seq_num;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq, pattrib->seq_num);
 			#endif
 
@@ -2685,7 +2685,7 @@ int recv_indicatepkt_reorder(struct rtw_
 
 			preorder_ctrl->indicate_seq = (preorder_ctrl->indicate_seq + 1)%4096;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq, pattrib->seq_num);
 			#endif
 
@@ -2705,7 +2705,7 @@ int recv_indicatepkt_reorder(struct rtw_
 		{
 			preorder_ctrl->indicate_seq = pattrib->seq_num;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq, pattrib->seq_num);
 			#endif
 
@@ -2713,13 +2713,13 @@ int recv_indicatepkt_reorder(struct rtw_
 
 			preorder_ctrl->indicate_seq = (preorder_ctrl->indicate_seq + 1)%4096;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, NewSeq: %d\n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq, pattrib->seq_num);
 			#endif
 
 			if(retval != _SUCCESS){
 				#ifdef DBG_RX_DROP_FRAME
-				DBG_8192D("DBG_RX_DROP_FRAME %s amsdu_to_msdu fail\n", __FUNCTION__);
+				DBG_8192D("DBG_RX_DROP_FRAME %s amsdu_to_msdu fail\n", __func__);
 				#endif
 			}
 
@@ -2747,7 +2747,7 @@ int recv_indicatepkt_reorder(struct rtw_
 		//return _FAIL;
 
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s check_indicate_seq fail\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s check_indicate_seq fail\n", __func__);
 		#endif
 		goto _err_exit;
 	}
@@ -2760,7 +2760,7 @@ int recv_indicatepkt_reorder(struct rtw_
 		//spin_unlock_irqrestore(&ppending_recvframe_queue->lock, &irql);
 		//return _FAIL;
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s enqueue_reorder_recvframe fail\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s enqueue_reorder_recvframe fail\n", __func__);
 		#endif
 		goto _err_exit;
 	}
@@ -2853,7 +2853,7 @@ int process_recv_indicatepkts(struct rtw
 		if(recv_indicatepkt_reorder(padapter, prframe)!=_SUCCESS)// including perform A-MPDU Rx Ordering Buffer Control
 		{
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s recv_indicatepkt_reorder error!\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s recv_indicatepkt_reorder error!\n", __func__);
 			#endif
 
 			if ((padapter->bDriverStopped == false) &&
@@ -2872,7 +2872,7 @@ int process_recv_indicatepkts(struct rtw
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("wlanhdr_to_ethhdr: drop pkt \n"));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s wlanhdr_to_ethhdr error!\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s wlanhdr_to_ethhdr error!\n", __func__);
 			#endif
 			return retval;
 		}
@@ -2966,7 +2966,7 @@ int recv_func_posthandle(struct rtw_adap
 	if (prframe == NULL) {
 		RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("decryptor: drop pkt\n"));
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s decryptor: drop pkt\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s decryptor: drop pkt\n", __func__);
 		#endif
 		ret = _FAIL;
 		goto _recv_data_drop;
@@ -2989,7 +2989,7 @@ int recv_func_posthandle(struct rtw_adap
 	if(prframe==NULL)	{
 		RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("recvframe_chk_defrag: drop pkt\n"));
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s recvframe_chk_defrag: drop pkt\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s recvframe_chk_defrag: drop pkt\n", __func__);
 		#endif
 		goto _recv_data_drop;
 	}
@@ -2998,7 +2998,7 @@ int recv_func_posthandle(struct rtw_adap
 	if (prframe == NULL) {
 		RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("portctrl: drop pkt \n"));
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s portctrl: drop pkt\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s portctrl: drop pkt\n", __func__);
 		#endif
 		ret = _FAIL;
 		goto _recv_data_drop;
@@ -3019,7 +3019,7 @@ int recv_func_posthandle(struct rtw_adap
 	{
 		RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("recv_func: process_recv_indicatepkts fail! \n"));
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s recv_func: process_recv_indicatepkts fail!\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s recv_func: process_recv_indicatepkts fail!\n", __func__);
 		#endif
 		rtw_free_recvframe(orig_prframe, pfree_recv_queue);//free this recv_frame
 		goto _recv_data_drop;
@@ -3034,7 +3034,7 @@ int recv_func_posthandle(struct rtw_adap
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("wlanhdr_to_ethhdr: drop pkt \n"));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s wlanhdr_to_ethhdr: drop pkt\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s wlanhdr_to_ethhdr: drop pkt\n", __func__);
 			#endif
 			rtw_free_recvframe(orig_prframe, pfree_recv_queue);//free this recv_frame
 			goto _recv_data_drop;
@@ -3048,7 +3048,7 @@ int recv_func_posthandle(struct rtw_adap
 			if (ret != _SUCCESS)
 			{
 				#ifdef DBG_RX_DROP_FRAME
-				DBG_8192D("DBG_RX_DROP_FRAME %s rtw_recv_indicatepkt fail!\n", __FUNCTION__);
+				DBG_8192D("DBG_RX_DROP_FRAME %s rtw_recv_indicatepkt fail!\n", __func__);
 				#endif
 				goto _recv_data_drop;
 			}
@@ -3058,7 +3058,7 @@ int recv_func_posthandle(struct rtw_adap
 			RT_TRACE(_module_rtl871x_recv_c_, _drv_alert_, ("@@@@  recv_func: rtw_free_recvframe\n" ));
 			RT_TRACE(_module_rtl871x_recv_c_, _drv_debug_, ("recv_func:bDriverStopped(%d) OR bSurpriseRemoved(%d)", padapter->bDriverStopped, padapter->bSurpriseRemoved));
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s ecv_func:bDriverStopped(%d) OR bSurpriseRemoved(%d)\n", __FUNCTION__,
+			DBG_8192D("DBG_RX_DROP_FRAME %s ecv_func:bDriverStopped(%d) OR bSurpriseRemoved(%d)\n", __func__,
 				padapter->bDriverStopped, padapter->bSurpriseRemoved);
 			#endif
 			ret = _FAIL;
@@ -3073,7 +3073,7 @@ int recv_func_posthandle(struct rtw_adap
 		if(ret != _SUCCESS)
 		{
 			#ifdef DBG_RX_DROP_FRAME
-			DBG_8192D("DBG_RX_DROP_FRAME %s amsdu_to_msdu fail\n", __FUNCTION__);
+			DBG_8192D("DBG_RX_DROP_FRAME %s amsdu_to_msdu fail\n", __func__);
 			#endif
 			rtw_free_recvframe(orig_prframe, pfree_recv_queue);
 			goto _recv_data_drop;
@@ -3082,7 +3082,7 @@ int recv_func_posthandle(struct rtw_adap
 	else
 	{
 		#ifdef DBG_RX_DROP_FRAME
-		DBG_8192D("DBG_RX_DROP_FRAME %s what is this condition??\n", __FUNCTION__);
+		DBG_8192D("DBG_RX_DROP_FRAME %s what is this condition??\n", __func__);
 		#endif
 		goto _recv_data_drop;
 	}
@@ -3239,7 +3239,7 @@ void rtw_signal_stat_timer_hdl(RTW_TIMER
 			DBG_8192D("%s signal_strength:%3u, rssi:%3d, signal_qual:%3u"
 				", num_signal_strength:%u, num_signal_qual:%u"
 				"\n"
-				, __FUNCTION__
+				, __func__
 				, recvpriv->signal_strength
 				, recvpriv->rssi
 				, recvpriv->signal_qual
--- a/drivers/staging/rtl8192du/core/rtw_security.c
+++ b/drivers/staging/rtl8192du/core/rtw_security.c
@@ -782,7 +782,7 @@ _func_enter_;
 				if(psecuritypriv->binstallGrpkey==false)
 				{
 					res=_FAIL;
-					DBG_8192D("%s:rx bc/mc packets,but didn't install group key!!!!!!!!!!\n",__FUNCTION__);
+					DBG_8192D("%s:rx bc/mc packets,but didn't install group key!!!!!!!!!!\n",__func__);
 					goto exit;
 				}
 				//DBG_8192D("rx bc/mc packets, to perform sw rtw_tkip_decrypt\n");
@@ -1553,7 +1553,7 @@ _func_enter_;
 				ptdls_sta=rtw_get_stainfo(&padapter->stapriv ,&pattrib->dst[0] );
 				if((ptdls_sta != NULL) && (ptdls_sta->tdls_sta_state & TDLS_LINKED_STATE) )
 				{
-					DBG_8192D("[%s] for tdls link\n", __FUNCTION__);
+					DBG_8192D("[%s] for tdls link\n", __func__);
 					prwskey=&ptdls_sta->tpk.tk[0];
 				}
 			}
@@ -1903,7 +1903,7 @@ _func_enter_;
 				//prwskey = psecuritypriv->dot118021XGrpKey[psecuritypriv->dot118021XGrpKeyid].skey;
 				if(psecuritypriv->binstallGrpkey==false) {
 					res=_FAIL;
-					DBG_8192D("%s:rx bc/mc packets,but didn't install group key!!!!!!!!!!\n",__FUNCTION__);
+					DBG_8192D("%s:rx bc/mc packets,but didn't install group key!!!!!!!!!!\n",__func__);
 					goto exit;
 				}
 				prwskey = psecuritypriv->dot118021XGrpKey[prxattrib->key_index].skey;
@@ -2805,7 +2805,7 @@ int tdls_verify_mic(u8 *kck, u8 trans_se
 	}
 
 	//Invalid MIC
-	DBG_8192D( "[%s] Invalid MIC\n", __FUNCTION__);
+	DBG_8192D( "[%s] Invalid MIC\n", __func__);
 	return 0;
 
 }
--- a/drivers/staging/rtl8192du/core/rtw_sreset.c
+++ b/drivers/staging/rtl8192du/core/rtw_sreset.c
@@ -65,10 +65,10 @@ u8 sreset_get_wifi_status(_adapter *pada
 
 	if(WIFI_STATUS_SUCCESS !=psrtpriv->Wifi_Error_Status)
 	{
-		DBG_8192C("==>%s error_status(0x%x) \n",__FUNCTION__,psrtpriv->Wifi_Error_Status);
+		DBG_8192C("==>%s error_status(0x%x) \n",__func__,psrtpriv->Wifi_Error_Status);
 		status = (psrtpriv->Wifi_Error_Status &( ~(USB_READ_PORT_FAIL|USB_WRITE_PORT_FAIL)));
 	}
-	DBG_8192C("==> %s wifi_status(0x%x)\n",__FUNCTION__,status);
+	DBG_8192C("==> %s wifi_status(0x%x)\n",__func__,status);
 
 	//status restore
 	psrtpriv->Wifi_Error_Status = WIFI_STATUS_SUCCESS;
--- a/drivers/staging/rtl8192du/core/rtw_sta_mgt.c
+++ b/drivers/staging/rtl8192du/core/rtw_sta_mgt.c
@@ -387,7 +387,7 @@ _func_enter_;
 
 			preorder_ctrl->indicate_seq = 0xffff;
 			#ifdef DBG_RX_SEQ
-			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d\n", __FUNCTION__, __LINE__,
+			DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d\n", __func__, __LINE__,
 				preorder_ctrl->indicate_seq);
 			#endif
 			preorder_ctrl->wend_b= 0xffff;
--- a/drivers/staging/rtl8192du/core/rtw_tdls.c
+++ b/drivers/staging/rtl8192du/core/rtw_tdls.c
@@ -426,12 +426,12 @@ void rtw_tdls_process_wfd_ie(struct tdls
 		u32	attr_contentlen = 0;
 		int	i;
 
-		DBG_871X( "[%s] WFD IE Found!!\n", __FUNCTION__ );
+		DBG_871X( "[%s] WFD IE Found!!\n", __func__ );
 		rtw_get_wfd_attr_content( wfd_ie, wfd_ielen, WFD_ATTR_DEVICE_INFO, attr_content, &attr_contentlen);
 		if ( attr_contentlen )
 		{
 			ptdlsinfo->wfd_info->peer_rtsp_ctrlport = RTW_GET_BE16( attr_content + 2 );
-			DBG_871X( "[%s] Peer PORT NUM = %d\n", __FUNCTION__, ptdlsinfo->wfd_info->peer_rtsp_ctrlport );
+			DBG_871X( "[%s] Peer PORT NUM = %d\n", __func__, ptdlsinfo->wfd_info->peer_rtsp_ctrlport );
 		}
 
 		memset( attr_content, 0x00, 10);
@@ -440,7 +440,7 @@ void rtw_tdls_process_wfd_ie(struct tdls
 		if ( attr_contentlen )
 		{
 			memcpy(ptdlsinfo->wfd_info->peer_ip_address, ( attr_content + 1 ), 4);
-			DBG_871X( "[%s] Peer IP = %02u.%02u.%02u.%02u \n", __FUNCTION__,
+			DBG_871X( "[%s] Peer IP = %02u.%02u.%02u.%02u \n", __func__,
 				ptdlsinfo->wfd_info->peer_ip_address[0], ptdlsinfo->wfd_info->peer_ip_address[1],
 				ptdlsinfo->wfd_info->peer_ip_address[2], ptdlsinfo->wfd_info->peer_ip_address[3]
 				);
@@ -457,7 +457,7 @@ void issue_tunneled_probe_req(_adapter *
 	struct xmit_priv			*pxmitpriv = &(padapter->xmitpriv);
 	u8 baddr[ETH_ALEN] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
 
-	DBG_871X("[%s]\n", __FUNCTION__);
+	DBG_871X("[%s]\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -500,7 +500,7 @@ void issue_tunneled_probe_rsp(_adapter *
 	struct xmit_priv			*pxmitpriv = &(padapter->xmitpriv);
 	struct rx_pkt_attrib	*rx_pkt_pattrib = &precv_frame->u.hdr.attrib;
 
-	DBG_871X("[%s]\n", __FUNCTION__);
+	DBG_871X("[%s]\n", __func__);
 
 	if ((pmgntframe = alloc_mgtxmitframe(pxmitpriv)) == NULL)
 	{
@@ -1330,7 +1330,7 @@ int On_TDLS_Setup_Rsp(_adapter *adapter,
 
 	if(stat_code!=0)
 	{
-		DBG_871X( "[%s] status_code = %d, free_tdls_sta\n", __FUNCTION__, stat_code );
+		DBG_871X( "[%s] status_code = %d, free_tdls_sta\n", __func__, stat_code );
 		free_tdls_sta(adapter, ptdls_sta);
 		return _FAIL;
 	}
@@ -1494,7 +1494,7 @@ int On_TDLS_Setup_Cfm(_adapter *adapter,
 	memcpy(&stat_code, ptr+2, 2);
 
 	if(stat_code!=0){
-		DBG_871X( "[%s] stat_code = %d\n, free_tdls_sta", __FUNCTION__, stat_code );
+		DBG_871X( "[%s] stat_code = %d\n, free_tdls_sta", __func__, stat_code );
 		free_tdls_sta(adapter, ptdls_sta);
 		return _FAIL;
 	}
@@ -2147,7 +2147,7 @@ void rtw_build_tdls_setup_rsp_ies(_adapt
 
 	if(ptdls_sta == NULL )
 	{
-		DBG_871X("[%s] %d\n", __FUNCTION__, __LINE__);
+		DBG_871X("[%s] %d\n", __func__, __LINE__);
 		return;
 	}
 
--- a/drivers/staging/rtl8192du/core/rtw_wlan_util.c
+++ b/drivers/staging/rtl8192du/core/rtw_wlan_util.c
@@ -514,7 +514,7 @@ void set_channel_bwmode(struct rtw_adapt
 
 	if ( padapter->bNotifyChannelChange )
 	{
-		DBG_8192D( "[%s] ch = %d, offset = %d, bwmode = %d\n", __FUNCTION__, channel, channel_offset, bwmode );
+		DBG_8192D( "[%s] ch = %d, offset = %d, bwmode = %d\n", __func__, channel, channel_offset, bwmode );
 	}
 
 	if((bwmode == HT_CHANNEL_WIDTH_20)||(channel_offset == HAL_PRIME_CHNL_OFFSET_DONT_CARE))
@@ -718,7 +718,7 @@ void write_cam(struct rtw_adapter *padap
 		//cmd = CAM_POLLINIG | CAM_WRITE | (addr + j);
 		//rtw_write32(padapter, RWCAM, cmd);
 
-		//DBG_8192D("%s=> cam write: %x, %x\n",__FUNCTION__, cmd, val);
+		//DBG_8192D("%s=> cam write: %x, %x\n",__func__, cmd, val);
 
 	}
 
@@ -820,18 +820,18 @@ int WFD_info_handler(struct rtw_adapter
 		u8	attr_content[ 10 ] = { 0x00 };
 		u32	attr_contentlen = 0;
 
-		printk( "[%s] Found WFD IE\n", __FUNCTION__ );
+		printk( "[%s] Found WFD IE\n", __func__ );
 		rtw_get_wfd_attr_content( wfd_ie, wfd_ielen, WFD_ATTR_DEVICE_INFO, attr_content, &attr_contentlen);
 		if ( attr_contentlen )
 		{
 			pwdinfo->wfd_info->peer_rtsp_ctrlport = RTW_GET_BE16( attr_content + 2 );
-			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __FUNCTION__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
+			DBG_8192D( "[%s] Peer PORT NUM = %d\n", __func__, pwdinfo->wfd_info->peer_rtsp_ctrlport );
 			return( true );
 		}
 	}
 	else
 	{
-		printk( "[%s] NO WFD IE\n", __FUNCTION__ );
+		printk( "[%s] NO WFD IE\n", __func__ );
 
 	}
 	return( _FAIL );
@@ -1173,7 +1173,7 @@ void HTOnAssocRsp(struct rtw_adapter *pa
 	struct mlme_ext_priv	*pmlmeext = &padapter->mlmeextpriv;
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if ((pmlmeinfo->HT_info_enable) && (pmlmeinfo->HT_caps_enable))
 	{
@@ -1929,7 +1929,7 @@ void process_addba_req(struct rtw_adapte
 		#ifdef CONFIG_UPDATE_INDICATE_SEQ_WHILE_PROCESS_ADDBA_REQ
 		preorder_ctrl->indicate_seq = start_seq;
 		#ifdef DBG_RX_SEQ
-		DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, start_seq: %d\n", __FUNCTION__, __LINE__,
+		DBG_8192D("DBG_RX_SEQ %s:%d IndicateSeq: %d, start_seq: %d\n", __func__, __LINE__,
 			preorder_ctrl->indicate_seq, start_seq);
 		#endif
 		#else
@@ -1982,20 +1982,20 @@ int rtw_handle_dualmac(struct rtw_adapte
 
 		/* For SMSP on 92DU-VC, driver do not probe another Interface. */
 		if ((dvobj->DualMacMode != true) && (dvobj->InterfaceNumber != 0)) {
-			DBG_8192D("%s(): Do not init another USB Interface because SMSP\n",__FUNCTION__);
+			DBG_8192D("%s(): Do not init another USB Interface because SMSP\n",__func__);
 			status = _FAIL;
 			goto exit;
 		}
 #ifdef CONFIG_DUALMAC_CONCURRENT
 		if (pbuddy_padapter == NULL) {
 			pbuddy_padapter = adapter;
-			DBG_8192D("%s(): pbuddy_padapter == NULL, Set pbuddy_padapter\n",__FUNCTION__);
+			DBG_8192D("%s(): pbuddy_padapter == NULL, Set pbuddy_padapter\n",__func__);
 		} else {
 			adapter->pbuddy_adapter = pbuddy_padapter;
 			pbuddy_padapter->pbuddy_adapter = adapter;
 			// clear global value
 			pbuddy_padapter = NULL;
-			DBG_8192D("%s(): pbuddy_padapter exist, Exchange Information\n",__FUNCTION__);
+			DBG_8192D("%s(): pbuddy_padapter exist, Exchange Information\n",__func__);
 		}
 
 		if (dvobj->InterfaceNumber == 0) {
@@ -2003,13 +2003,13 @@ int rtw_handle_dualmac(struct rtw_adapte
 			adapter->isprimary = true;
 			adapter->adapter_type = PRIMARY_ADAPTER;
 			adapter->iface_type = IFACE_PORT0;
-			DBG_8192D("%s(): PRIMARY_ADAPTER\n",__FUNCTION__);
+			DBG_8192D("%s(): PRIMARY_ADAPTER\n",__func__);
 		} else {
 			//set adapter_type/iface type
 			adapter->isprimary = false;
 			adapter->adapter_type = SECONDARY_ADAPTER;
 			adapter->iface_type = IFACE_PORT1;
-			DBG_8192D("%s(): SECONDARY_ADAPTER\n",__FUNCTION__);
+			DBG_8192D("%s(): SECONDARY_ADAPTER\n",__func__);
 		}
 #endif
 	}else {
--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -664,7 +664,7 @@ static s32 update_attrib(struct rtw_adap
 		if (psta == NULL)	{ // if we cannot get psta => drrp the pkt
 			RT_TRACE(_module_rtl871x_xmit_c_, _drv_alert_, ("\nupdate_attrib => get sta_info fail, ra:%pM\n", pattrib->ra));
 			#ifdef DBG_TX_DROP_FRAME
-			DBG_8192D("DBG_TX_DROP_FRAME %s get sta_info fail, ra:%pM\n", __FUNCTION__, pattrib->ra);
+			DBG_8192D("DBG_TX_DROP_FRAME %s get sta_info fail, ra:%pM\n", __func__, pattrib->ra);
 			#endif
 			res =_FAIL;
 			goto exit;
@@ -686,7 +686,7 @@ static s32 update_attrib(struct rtw_adap
 		// if we cannot get psta => drop the pkt
 		RT_TRACE(_module_rtl871x_xmit_c_, _drv_alert_, ("\nupdate_attrib => get sta_info fail, ra:%pM\n", pattrib->ra));
 		#ifdef DBG_TX_DROP_FRAME
-		DBG_8192D("DBG_TX_DROP_FRAME %s get sta_info fail, ra:%pM\n", __FUNCTION__, pattrib->ra);
+		DBG_8192D("DBG_TX_DROP_FRAME %s get sta_info fail, ra:%pM\n", __func__, pattrib->ra);
 		#endif
 		res = _FAIL;
 		goto exit;
@@ -730,7 +730,7 @@ static s32 update_attrib(struct rtw_adap
 		{
 			RT_TRACE(_module_rtl871x_xmit_c_,_drv_err_,("\npsta->ieee8021x_blocked == true,  pattrib->ether_type(%.4x) != 0x888e\n",pattrib->ether_type));
 			#ifdef DBG_TX_DROP_FRAME
-			DBG_8192D("DBG_TX_DROP_FRAME %s psta->ieee8021x_blocked == true,  pattrib->ether_type(%.4x) != 0x888e\n", __FUNCTION__,pattrib->ether_type);
+			DBG_8192D("DBG_TX_DROP_FRAME %s psta->ieee8021x_blocked == true,  pattrib->ether_type(%.4x) != 0x888e\n", __func__,pattrib->ether_type);
 			#endif
 			res = _FAIL;
 			goto exit;
@@ -777,7 +777,7 @@ static s32 update_attrib(struct rtw_adap
 			{
 				RT_TRACE(_module_rtl871x_xmit_c_,_drv_err_,("\npadapter->securitypriv.busetkipkey(%d)==_FAIL drop packet\n", padapter->securitypriv.busetkipkey));
 				#ifdef DBG_TX_DROP_FRAME
-				DBG_8192D("DBG_TX_DROP_FRAME %s padapter->securitypriv.busetkipkey(%d)==_FAIL drop packet\n", __FUNCTION__, padapter->securitypriv.busetkipkey);
+				DBG_8192D("DBG_TX_DROP_FRAME %s padapter->securitypriv.busetkipkey(%d)==_FAIL drop packet\n", __func__, padapter->securitypriv.busetkipkey);
 				#endif
 				res =_FAIL;
 				goto exit;
@@ -1691,7 +1691,7 @@ _func_enter_;
 
 			break;
 		} else {
-			RT_TRACE(_module_rtl871x_xmit_c_, _drv_err_, ("%s: There're still something in packet!\n", __FUNCTION__));
+			RT_TRACE(_module_rtl871x_xmit_c_, _drv_err_, ("%s: There're still something in packet!\n", __func__));
 		}
 
 		addr = (SIZE_PTR)(pframe);
@@ -2560,7 +2560,7 @@ int rtw_br_client_tx(struct rtw_adapter
 				}
 
 				if (skb_is_nonlinear(skb))
-					ERR_8192D("%s(): skb_is_nonlinear!!\n", __FUNCTION__);
+					ERR_8192D("%s(): skb_is_nonlinear!!\n", __func__);
 
 
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 18))
@@ -2584,7 +2584,7 @@ int rtw_br_client_tx(struct rtw_adapter
 
 					}
 					// we just print warning message and let it go
-					//DEBUG_WARN("%s()-%d: nat25_db_handle INSERT Warning!\n", __FUNCTION__, __LINE__);
+					//DEBUG_WARN("%s()-%d: nat25_db_handle INSERT Warning!\n", __func__, __LINE__);
 					//return -1; // return -1 will cause system crash on 2011/08/30!
 					return 0;
 				}
@@ -2674,7 +2674,7 @@ s32 rtw_xmit(struct rtw_adapter *padapte
 	if (pxmitframe == NULL) {
 		RT_TRACE(_module_xmit_osdep_c_, _drv_err_, ("rtw_xmit: no more pxmitframe\n"));
 		#ifdef DBG_TX_DROP_FRAME
-		DBG_8192D("DBG_TX_DROP_FRAME %s no more pxmitframe\n", __FUNCTION__);
+		DBG_8192D("DBG_TX_DROP_FRAME %s no more pxmitframe\n", __func__);
 		#endif
 		return -1;
 	}
@@ -2705,7 +2705,7 @@ s32 rtw_xmit(struct rtw_adapter *padapte
 	if (res == _FAIL) {
 		RT_TRACE(_module_xmit_osdep_c_, _drv_err_, ("rtw_xmit: update attrib fail\n"));
 		#ifdef DBG_TX_DROP_FRAME
-		DBG_8192D("DBG_TX_DROP_FRAME %s update attrib fail\n", __FUNCTION__);
+		DBG_8192D("DBG_TX_DROP_FRAME %s update attrib fail\n", __func__);
 		#endif
 		rtw_free_xmitframe(pxmitpriv, pxmitframe);
 		return -1;
--- a/drivers/staging/rtl8192du/hal/hal_intf.c
+++ b/drivers/staging/rtl8192du/hal/hal_intf.c
@@ -228,7 +228,7 @@ void rtw_hal_enable_interrupt(struct rtw
 	if (padapter->HalFunc.enable_interrupt)
 		padapter->HalFunc.enable_interrupt(padapter);
 	else
-		DBG_8192D("%s: HalFunc.enable_interrupt is NULL!\n", __FUNCTION__);
+		DBG_8192D("%s: HalFunc.enable_interrupt is NULL!\n", __func__);
 
 }
 void rtw_hal_disable_interrupt(struct rtw_adapter *padapter)
@@ -236,7 +236,7 @@ void rtw_hal_disable_interrupt(struct rt
 	if (padapter->HalFunc.disable_interrupt)
 		padapter->HalFunc.disable_interrupt(padapter);
 	else
-		DBG_8192D("%s: HalFunc.disable_interrupt is NULL!\n", __FUNCTION__);
+		DBG_8192D("%s: HalFunc.disable_interrupt is NULL!\n", __func__);
 
 }
 
@@ -246,7 +246,7 @@ u32	rtw_hal_inirp_init(struct rtw_adapte
 	if(padapter->HalFunc.inirp_init)
 		rst = padapter->HalFunc.inirp_init(padapter);
 	else
-		DBG_8192D(" %s HalFunc.inirp_init is NULL!!!\n",__FUNCTION__);
+		DBG_8192D(" %s HalFunc.inirp_init is NULL!!!\n",__func__);
 	return rst;
 }
 
--- a/drivers/staging/rtl8192du/hal/rtl8192d_cmd.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_cmd.c
@@ -376,7 +376,7 @@ void rtl8192d_set_FwPwrMode_cmd(struct r
 
 _func_enter_;
 
-	DBG_8192D("%s(): Mode = %d, SmartPS = %d\n", __FUNCTION__,Mode,pwrpriv->smart_ps);
+	DBG_8192D("%s(): Mode = %d, SmartPS = %d\n", __func__,Mode,pwrpriv->smart_ps);
 
 	SET_H2CCMD_PWRMODE_PARM_MODE(u1H2CSetPwrMode, Mode);
 	SET_H2CCMD_PWRMODE_PARM_SMART_PS(u1H2CSetPwrMode, pwrpriv->smart_ps);
@@ -399,7 +399,7 @@ void ConstructBeacon(struct rtw_adapter
 	u8	bc_addr[] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
 
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	pwlanhdr = (struct rtw_ieee80211_hdr *)pframe;
 
@@ -487,7 +487,7 @@ _ConstructBeacon:
 
 	*pLength = pktlen;
 
-	//DBG_8192D("%s bcn_sz=%u\n", __FUNCTION__, pktlen);
+	//DBG_8192D("%s bcn_sz=%u\n", __func__, pktlen);
 
 }
 
@@ -499,7 +499,7 @@ void ConstructPSPoll(struct rtw_adapter
 	struct mlme_ext_priv	*pmlmeext = &(padapter->mlmeextpriv);
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	pwlanhdr = (struct rtw_ieee80211_hdr *)pframe;
 
@@ -532,7 +532,7 @@ void ConstructNullFunctionData(struct rt
 	struct mlme_ext_priv	*pmlmeext = &(padapter->mlmeextpriv);
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
 
-	//DBG_8192D("%s:%d\n", __FUNCTION__, bForcePowerSave);
+	//DBG_8192D("%s:%d\n", __func__, bForcePowerSave);
 
 	pwlanhdr = (struct rtw_ieee80211_hdr *)pframe;
 
@@ -587,7 +587,7 @@ void ConstructProbeRsp(struct rtw_adapte
 	struct wlan_bssid_ex	*cur_network = &(pmlmeinfo->network);
 
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	pwlanhdr = (struct rtw_ieee80211_hdr *)pframe;
 
@@ -697,11 +697,11 @@ void SetFwRsvdPagePkt(struct rtw_adapter
 	u8	u1RsvdPageLoc[3]={0};
 	bool	dlok = false;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	reservedpagepacket = (u8*)rtw_malloc(1000);
 	if(reservedpagepacket == NULL){
-		DBG_8192D("%s(): alloc reservedpagepacket fail !!!\n", __FUNCTION__);
+		DBG_8192D("%s(): alloc reservedpagepacket fail !!!\n", __func__);
 		return;
 	}
 
@@ -830,7 +830,7 @@ void rtl8192d_set_FwJoinBssReport_cmd(st
 
 _func_enter_;
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	if(mstatus == 1)
 	{
@@ -955,7 +955,7 @@ _func_enter_;
 							pwdinfo->noa_count[i]--;
 					}
 				}
-				//DBG_8192D("%s(): start_time = %x\n",__FUNCTION__,start_time);
+				//DBG_8192D("%s(): start_time = %x\n",__func__,start_time);
 				rtw_write32(padapter, 0x5E8, start_time);
 
 				rtw_write8(padapter, 0x5EC, pwdinfo->noa_count[i]);
@@ -1090,18 +1090,18 @@ _func_enter_;
 		rtw_write8(padapter, 0xf8, test);
 
 		pwowlan_parm.mode |=FW_WOWLAN_FUN_EN;
-		//printk("\n %s 1.pwowlan_parm.mode=0x%x \n",__FUNCTION__,pwowlan_parm.mode );
+		//printk("\n %s 1.pwowlan_parm.mode=0x%x \n",__func__,pwowlan_parm.mode );
 		if(pwrpriv->wowlan_pattern ==true){
 			pwowlan_parm.mode |= FW_WOWLAN_PATTERN_MATCH;
-		//printk("\n %s 2.pwowlan_parm.mode=0x%x \n",__FUNCTION__,pwowlan_parm.mode );
+		//printk("\n %s 2.pwowlan_parm.mode=0x%x \n",__func__,pwowlan_parm.mode );
 		}
 		if(pwrpriv->wowlan_magic ==true){
 			//pwowlan_parm.mode |=FW_WOWLAN_MAGIC_PKT;
-		//printk("\n %s 3.pwowlan_parm.mode=0x%x \n",__FUNCTION__,pwowlan_parm.mode );
+		//printk("\n %s 3.pwowlan_parm.mode=0x%x \n",__func__,pwowlan_parm.mode );
 		}
 		if(pwrpriv->wowlan_unicast ==true){
 			pwowlan_parm.mode |=FW_WOWLAN_UNICAST;
-		//printk("\n %s 4.pwowlan_parm.mode=0x%x \n",__FUNCTION__,pwowlan_parm.mode );
+		//printk("\n %s 4.pwowlan_parm.mode=0x%x \n",__func__,pwowlan_parm.mode );
 		}
 
 		rtl8192d_set_FwJoinBssReport_cmd(padapter, 1);
@@ -1119,9 +1119,9 @@ _func_enter_;
 
 		pwowlan_parm.second_mode|=FW_WOWLAN_GPIO_WAKEUP_EN;
 		pwowlan_parm.second_mode|=FW_FW_PARSE_MAGIC_PKT;
-		//printk("\n %s 5.pwowlan_parm.mode=0x%x \n",__FUNCTION__,pwowlan_parm.mode );
+		//printk("\n %s 5.pwowlan_parm.mode=0x%x \n",__func__,pwowlan_parm.mode );
 		{	u8 *ptr=(u8 *)&pwowlan_parm;
-			printk("\n %s H2C_WO_WLAN=%x %02x:%02x:%02x:%02x:%02x \n",__FUNCTION__,H2C_WO_WLAN_CMD,ptr[0],ptr[1],ptr[2],ptr[3],ptr[4] );
+			printk("\n %s H2C_WO_WLAN=%x %02x:%02x:%02x:%02x:%02x \n",__func__,H2C_WO_WLAN_CMD,ptr[0],ptr[1],ptr[2],ptr[3],ptr[4] );
 		}
 		FillH2CCmd92D(padapter, H2C_WO_WLAN_CMD, 4, (u8 *)&pwowlan_parm);
 
@@ -1130,20 +1130,20 @@ _func_enter_;
 		pwowlan_parm.mode =3;
 		pwowlan_parm.gpio_index=3;
 		FillH2CCmd92D(padapter, KEEP_ALIVE_CONTROL_CMD, 2, (u8 *)&pwowlan_parm);
-		printk("%s after KEEP_ALIVE_CONTROL_CMD register 0x81=%x \n",__FUNCTION__,rtw_read8(padapter, 0x85));
+		printk("%s after KEEP_ALIVE_CONTROL_CMD register 0x81=%x \n",__func__,rtw_read8(padapter, 0x85));
 
 		pwowlan_parm.mode =1;
 		pwowlan_parm.gpio_index=0;
 		pwowlan_parm.gpio_duration=0;
 		FillH2CCmd92D(padapter, DISCONNECT_DECISION_CTRL_CMD, 3, (u8 *)&pwowlan_parm);
-		printk("%s after DISCONNECT_DECISION_CTRL_CMD register 0x81=%x \n",__FUNCTION__,rtw_read8(padapter, 0x85));
+		printk("%s after DISCONNECT_DECISION_CTRL_CMD register 0x81=%x \n",__func__,rtw_read8(padapter, 0x85));
 
 		//enable GPIO wakeup
 		pwowlan_parm.mode =1;
 		pwowlan_parm.gpio_index=0;
 		pwowlan_parm.gpio_duration=0;
 		FillH2CCmd92D(padapter, REMOTE_WAKE_CTRL_CMD, 1, (u8 *)&pwowlan_parm);
-		printk("%s after DISCONNECT_DECISION_CTRL_CMD register \n",__FUNCTION__);
+		printk("%s after DISCONNECT_DECISION_CTRL_CMD register \n",__func__);
 
 	}
 	else
--- a/drivers/staging/rtl8192du/hal/rtl8192d_hal_init.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_hal_init.c
@@ -74,7 +74,7 @@ _FWDownloadEnable(
 		{
 			u8 val;
 			if( (val=rtw_read8(Adapter, REG_MCUFWDL)))
-				DBG_8192D("DBG_SHOW_MCUFWDL_BEFORE_51_ENABLE %s:%d REG_MCUFWDL:0x%02x\n", __FUNCTION__, __LINE__, val);
+				DBG_8192D("DBG_SHOW_MCUFWDL_BEFORE_51_ENABLE %s:%d REG_MCUFWDL:0x%02x\n", __func__, __LINE__, val);
 		}
 		#endif
 		// 8051 enable
@@ -402,13 +402,13 @@ int FirmwareDownload92D(
 	#ifdef CONFIG_FILE_FWIMG
 	if(rtw_is_file_readable(rtw_fw_file_path) == true)
 	{
-		DBG_8192D("%s accquire FW from file:%s\n", __FUNCTION__, rtw_fw_file_path);
+		DBG_8192D("%s accquire FW from file:%s\n", __func__, rtw_fw_file_path);
 		pFirmware->eFWSource = FW_SOURCE_IMG_FILE; // We should decided by Reg.
 	}
 	else
 	#endif //CONFIG_FILE_FWIMG
 	{
-		DBG_8192D("%s accquire FW from embedded image\n", __FUNCTION__);
+		DBG_8192D("%s accquire FW from embedded image\n", __func__);
 		pFirmware->eFWSource = FW_SOURCE_HEADER_FILE;
 	}
 
@@ -568,7 +568,7 @@ int FirmwareDownload92D(
 		)
 			break;
 
-		DBG_8192D("%s writeFW_retry:%u, time after fwdl_start_time:%ums\n", __FUNCTION__
+		DBG_8192D("%s writeFW_retry:%u, time after fwdl_start_time:%ums\n", __func__
 			, writeFW_retry
 			, rtw_get_passing_time_ms(fwdl_start_time)
 		);
@@ -2351,7 +2351,7 @@ static s32 c2h_handler_8192d(struct rtw_
 	u8 i = 0;
 
 	if (c2h_evt == NULL) {
-		DBG_8192D("%s c2h_evt is NULL\n", __FUNCTION__);
+		DBG_8192D("%s c2h_evt is NULL\n", __func__);
 		ret = _FAIL;
 		goto exit;
 	}
--- a/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
@@ -3253,7 +3253,7 @@ static void _PHY_SwChnl8192D(struct rtw_
 
 	if ( Adapter->bNotifyChannelChange )
 	{
-		DBG_8192D( "[%s] ch = %d\n", __FUNCTION__, channel );
+		DBG_8192D( "[%s] ch = %d\n", __func__, channel );
 	}
 
 	if(pHalData->BandSet92D == BAND_ON_BOTH){
@@ -7002,7 +7002,7 @@ void PHY_ConfigMacPhyModeInfo92D(struct
 			Adapter->registrypriv.wireless_mode = WIRELESS_11ABGN;
 			break;
 	}
-	DBG_8192D("%s(): wireless_mode = %x\n",__FUNCTION__,Adapter->registrypriv.wireless_mode);
+	DBG_8192D("%s(): wireless_mode = %x\n",__func__,Adapter->registrypriv.wireless_mode);
 }
 
 //
--- a/drivers/staging/rtl8192du/hal/rtl8192du_xmit.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192du_xmit.c
@@ -1049,7 +1049,7 @@ s32 rtl8192du_hostap_mgnt_xmit_entry(str
 	struct dvobj_priv *pdvobj = adapter_to_dvobj(padapter);
 
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	skb = pkt;
 
--- a/drivers/staging/rtl8192du/hal/usb_halinit.c
+++ b/drivers/staging/rtl8192du/hal/usb_halinit.c
@@ -1941,7 +1941,7 @@ HAL_INIT_PROFILE_TAG(HAL_INIT_STAGES_DOW
 
 	rtl8192d_PHY_InitRxSetting(padapter);
 	RELEASE_GLOBAL_MUTEX(GlobalMutexForPowerAndEfuse);
-	DBG_8192D("%s(): Don't Download Firmware !!\n",__FUNCTION__);
+	DBG_8192D("%s(): Don't Download Firmware !!\n",__func__);
 	padapter->bFWReady = false;
 	pHalData->fw_ractrl = false;
 
@@ -2344,7 +2344,7 @@ exit:
 
 HAL_INIT_PROFILE_TAG(HAL_INIT_STAGES_END);
 
-	DBG_8192D("%s in %dms\n", __FUNCTION__, rtw_get_passing_time_ms(init_start_time));
+	DBG_8192D("%s in %dms\n", __func__, rtw_get_passing_time_ms(init_start_time));
 
 	#ifdef DBG_HAL_INIT_PROFILING
 	hal_init_stages_timestamp[HAL_INIT_STAGES_END]=rtw_get_current_time();
@@ -2651,7 +2651,7 @@ _ResetDigitalProcedure1(
 	{
 		u8 val;
 		if( (val=rtw_read8(Adapter, REG_MCUFWDL)))
-			DBG_8192D("DBG_SHOW_MCUFWDL_BEFORE_51_ENABLE %s:%d REG_MCUFWDL:0x%02x\n", __FUNCTION__, __LINE__, val);
+			DBG_8192D("DBG_SHOW_MCUFWDL_BEFORE_51_ENABLE %s:%d REG_MCUFWDL:0x%02x\n", __func__, __LINE__, val);
 	}
 	#endif
 
@@ -3484,7 +3484,7 @@ static int _ReadAdapterInfo8192DU(struct
 {
 	u32 start=rtw_get_current_time();
 
-	DBG_8192D("====> %s\n", __FUNCTION__);
+	DBG_8192D("====> %s\n", __func__);
 
 	//rtl8192d_ReadChipVersion(Adapter);
 	_ReadRFType(Adapter);
@@ -3493,7 +3493,7 @@ static int _ReadAdapterInfo8192DU(struct
 	_InitOtherVariable(Adapter);
 
 	//For 92DU Phy and Mac mode set ,will initialize by EFUSE/EPPROM     zhiyuan 2010/03/25
-	DBG_8192D("<==== %s in %d ms\n", __FUNCTION__, rtw_get_passing_time_ms(start));
+	DBG_8192D("<==== %s in %d ms\n", __func__, rtw_get_passing_time_ms(start));
 
 	return _SUCCESS;
 }
@@ -3722,7 +3722,7 @@ static void hw_var_set_opmode(struct rtw
 		//reset TSF1
 		rtw_write8(Adapter, REG_DUAL_TSF_RST, BIT(1));
 
-		DBG_8192D("%s()-%d mode = %d\n", __FUNCTION__, __LINE__, mode);
+		DBG_8192D("%s()-%d mode = %d\n", __func__, __LINE__, mode);
 
 		if((mode == _HW_STATE_STATION_) || (mode == _HW_STATE_NOLINK_))
 		{
@@ -3767,7 +3767,7 @@ static void hw_var_set_opmode(struct rtw
 			//don't enable update TSF1 for if2 (due to TSF update when beacon/probe rsp are received)
 			rtw_write8(Adapter, REG_BCN_CTRL_1, (DIS_TSF_UDT0_NORMAL_CHIP|EN_BCN_FUNCTION | EN_TXBCN_RPT|BIT(1)));
 
-			DBG_8192D("%s()-%d: REG_BCN_CTRL_1 = %02x\n", __FUNCTION__, __LINE__, rtw_read8(Adapter, REG_BCN_CTRL_1));
+			DBG_8192D("%s()-%d: REG_BCN_CTRL_1 = %02x\n", __func__, __LINE__, rtw_read8(Adapter, REG_BCN_CTRL_1));
 
 			if(check_buddy_fwstate(Adapter, WIFI_FW_NULL_STATE))
 				rtw_write8(Adapter, REG_BCN_CTRL,
@@ -3780,7 +3780,7 @@ static void hw_var_set_opmode(struct rtw
 			if ( check_buddy_fwstate(Adapter, (WIFI_STATION_STATE|WIFI_ASOC_STATE)) ) {
 				if (reset_tsf(Adapter, IFACE_PORT1) == false)
 					DBG_8192D("ERROR! %s()-%d: Reset port1 TSF fail\n",
-						__FUNCTION__, __LINE__);
+						__func__, __LINE__);
 			}
 #endif	// CONFIG_TSF_RESET_OFFLOAD
 		}
@@ -3800,7 +3800,7 @@ static void hw_var_set_opmode(struct rtw
 		//reset TSF0
 		rtw_write8(Adapter, REG_DUAL_TSF_RST, BIT(0));
 
-		DBG_8192D("%s()-%d mode = %d\n", __FUNCTION__, __LINE__, mode);
+		DBG_8192D("%s()-%d mode = %d\n", __func__, __LINE__, mode);
 
 		if((mode == _HW_STATE_STATION_) || (mode == _HW_STATE_NOLINK_))
 		{
@@ -3860,7 +3860,7 @@ static void hw_var_set_opmode(struct rtw
 			if ( check_buddy_fwstate(Adapter, (WIFI_STATION_STATE|WIFI_ASOC_STATE)) ) {
 				if (reset_tsf(Adapter, IFACE_PORT0) == false)
 					DBG_8192D("ERROR! %s()-%d: Reset port0 TSF fail\n",
-						__FUNCTION__, __LINE__);
+						__func__, __LINE__);
 			}
 #endif // CONFIG_TSF_RESET_OFFLOAD
 #endif // CONFIG_CONCURRENT_MODE
@@ -3985,7 +3985,7 @@ static void hw_var_set_correct_tsf(struc
 			&& check_buddy_fwstate(Adapter, WIFI_AP_STATE) ) {
 			if (reset_tsf(Adapter, IFACE_PORT0) == false)
 				DBG_8192D("ERROR! %s()-%d: Reset port0 TSF fail\n",
-					__FUNCTION__, __LINE__);
+					__func__, __LINE__);
 		}
 #endif	// CONFIG_TSF_RESET_OFFLOAD
 
@@ -4026,7 +4026,7 @@ static void hw_var_set_correct_tsf(struc
 			&& check_buddy_fwstate(Adapter, WIFI_AP_STATE) ) {
 			if (reset_tsf(Adapter, IFACE_PORT1) == false)
 				DBG_8192D("ERROR! %s()-%d: Reset port1 TSF fail\n",
-					__FUNCTION__, __LINE__);
+					__func__, __LINE__);
 		}
 #endif	// CONFIG_TSF_RESET_OFFLOAD
 	}
@@ -4065,10 +4065,10 @@ static void hw_var_set_mlme_disconnect(s
 
 #ifdef CONFIG_BEACON_DISABLE_OFFLOAD
 		u8 reg_bcn_disable_cnt = rtw_read8(Adapter, REG_FW_BCN_DIS_CNT);
-		DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __FUNCTION__, __LINE__, reg_bcn_disable_cnt);
+		DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __func__, __LINE__, reg_bcn_disable_cnt);
 
 		reg_bcn_ctrl_1 = rtw_read8(Adapter, REG_BCN_CTRL_1);
-		DBG_8192D("%s()-%d: reg_bcn_ctrl_1=%02x\n", __FUNCTION__, __LINE__, reg_bcn_ctrl_1);
+		DBG_8192D("%s()-%d: reg_bcn_ctrl_1=%02x\n", __func__, __LINE__, reg_bcn_ctrl_1);
 
 		// b. driver set h2c cmd
 		rtl8192c_dis_beacon_fun_cmd(Adapter);
@@ -4092,17 +4092,17 @@ static void hw_var_set_mlme_disconnect(s
 		for (i=0; i< 10; i++) {
 			reg_bcn_ctrl_1 = rtw_read8(Adapter, REG_BCN_CTRL_1);
 			if ( (reg_bcn_ctrl_1 & BIT(3)) == 0 ) {
-				//DBG_8192D("%s()-%d: BEACON_DISABLE_OFFLOAD finished! reg=%02x\n", __FUNCTION__, __LINE__, reg);
+				//DBG_8192D("%s()-%d: BEACON_DISABLE_OFFLOAD finished! reg=%02x\n", __func__, __LINE__, reg);
 				break;
 			}
-			DBG_8192D("%s()-%d: BEACON_DISABLE_OFFLOAD not finished! REG_BCN_CTRL_1=%02x\n", __FUNCTION__, __LINE__, reg_bcn_ctrl_1);
-			DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __FUNCTION__, __LINE__, rtw_read8(Adapter, REG_FW_BCN_DIS_CNT));
-			DBG_8192D("%s()-%d: REG_BCN_CTRL=%02x\n", __FUNCTION__, __LINE__, rtw_read8(Adapter, REG_BCN_CTRL));
-			DBG_8192D("%s()-%d: FWISR=%08x\n", __FUNCTION__, __LINE__, rtw_read32(Adapter, REG_FWISR));
+			DBG_8192D("%s()-%d: BEACON_DISABLE_OFFLOAD not finished! REG_BCN_CTRL_1=%02x\n", __func__, __LINE__, reg_bcn_ctrl_1);
+			DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __func__, __LINE__, rtw_read8(Adapter, REG_FW_BCN_DIS_CNT));
+			DBG_8192D("%s()-%d: REG_BCN_CTRL=%02x\n", __func__, __LINE__, rtw_read8(Adapter, REG_BCN_CTRL));
+			DBG_8192D("%s()-%d: FWISR=%08x\n", __func__, __LINE__, rtw_read32(Adapter, REG_FWISR));
 			rtw_msleep_os(100);
 		}
-		DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __FUNCTION__, __LINE__, rtw_read8(Adapter, REG_FW_BCN_DIS_CNT));
-		DBG_8192D("%s()-%d: reg_bcn_ctrl_1=%02x\n", __FUNCTION__, __LINE__, reg_bcn_ctrl_1);
+		DBG_8192D("%s()-%d: reg_bcn_disable_cnt=%02x\n", __func__, __LINE__, rtw_read8(Adapter, REG_FW_BCN_DIS_CNT));
+		DBG_8192D("%s()-%d: reg_bcn_ctrl_1=%02x\n", __func__, __LINE__, reg_bcn_ctrl_1);
 
 #else   // CONFIG_BEACON_DISABLE_OFFLOAD
 
@@ -4280,7 +4280,7 @@ static void hw_var_set_mlme_join(struct
 			RetryLimit = 0x7;
 		}
 
-		DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__FUNCTION__);
+		DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__func__);
 		pHalData->bNeedIQK = true; //for 92D IQK
 	}
 	else if(type == 1) //joinbss_event call back when join res < 0
@@ -4507,7 +4507,7 @@ _func_enter_;
 #endif
 				if(check_fwstate(&Adapter->mlmepriv, WIFI_AP_STATE) == true)
 				{
-					DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__FUNCTION__);
+					DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__func__);
 					pHalData->bNeedIQK = true; //for 92D IQK
 				}
 #ifdef CONFIG_DUALMAC_CONCURRENT
@@ -4714,7 +4714,7 @@ _func_enter_;
 						RetryLimit = 0x7;
 					}
 
-					DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__FUNCTION__);
+					DBG_8192D("%s(): pHalData->bNeedIQK = true\n",__func__);
 					pHalData->bNeedIQK = true; //for 92D IQK
 #ifdef CONFIG_DUALMAC_CONCURRENT
 					if((BuddyAdapter !=NULL) && (pHalData->bSlaveOfDMSP))
@@ -4755,11 +4755,11 @@ _func_enter_;
 
 		case HW_VAR_ON_RCR_AM:
 			rtw_write32(Adapter, REG_RCR, rtw_read32(Adapter, REG_RCR)|RCR_AM);
-			DBG_8192D("%s, %d, RCR= %x \n", __FUNCTION__,__LINE__, rtw_read32(Adapter, REG_RCR));
+			DBG_8192D("%s, %d, RCR= %x \n", __func__,__LINE__, rtw_read32(Adapter, REG_RCR));
 			break;
 		case HW_VAR_OFF_RCR_AM:
 			rtw_write32(Adapter, REG_RCR, rtw_read32(Adapter, REG_RCR)& (~RCR_AM));
-			DBG_8192D("%s, %d, RCR= %x \n", __FUNCTION__,__LINE__, rtw_read32(Adapter, REG_RCR));
+			DBG_8192D("%s, %d, RCR= %x \n", __func__,__LINE__, rtw_read32(Adapter, REG_RCR));
 			break;
 
 		case HW_VAR_BEACON_INTERVAL:
@@ -5133,7 +5133,7 @@ _func_enter_;
 						if(poidparam->subcode_value==1){
 							//rtw_write8(Adapter, REG_WOW_CTRL, (rtw_read8(Adapter, REG_WOW_CTRL)|BIT(1)));
 							Adapter->pwrctrlpriv.wowlan_pattern=true;
-							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_pattern=%x\n",__FUNCTION__,Adapter->pwrctrlpriv.wowlan_pattern);
+							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_pattern=%x\n",__func__,Adapter->pwrctrlpriv.wowlan_pattern);
 						}
 						else{
 							//rtw_write8(Adapter, REG_WOW_CTRL, (rtw_read8(Adapter, REG_WOW_CTRL)&~BIT(1)));
@@ -5146,7 +5146,7 @@ _func_enter_;
 						if(poidparam->subcode_value==1){
 							//rtw_write8(Adapter, REG_WOW_CTRL, (rtw_read8(Adapter, REG_WOW_CTRL)|BIT(2)));
 							Adapter->pwrctrlpriv.wowlan_magic=true;
-							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_magic=%x\n",__FUNCTION__,Adapter->pwrctrlpriv.wowlan_magic);
+							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_magic=%x\n",__func__,Adapter->pwrctrlpriv.wowlan_magic);
 						}
 						else{
 							//rtw_write8(Adapter, REG_WOW_CTRL, (rtw_read8(Adapter, REG_WOW_CTRL)&~BIT(2)));
@@ -5162,7 +5162,7 @@ _func_enter_;
 						else{
 							//rtw_write8(Adapter, REG_WOW_CTRL, (rtw_read8(Adapter, REG_WOW_CTRL)&~BIT(3)));
 							Adapter->pwrctrlpriv.wowlan_unicast=false;
-							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_unicast=%x\n",__FUNCTION__,Adapter->pwrctrlpriv.wowlan_unicast);
+							DBG_8192D("%s Adapter->pwrctrlpriv.wowlan_unicast=%x\n",__func__,Adapter->pwrctrlpriv.wowlan_unicast);
 						}
 						break;
 					case WOWLAN_SET_PATTERN:
--- a/drivers/staging/rtl8192du/hal/usb_ops_linux.c
+++ b/drivers/staging/rtl8192du/hal/usb_ops_linux.c
@@ -57,7 +57,7 @@ static int usbctrl_vendorreq(struct intf
 #endif
 
 
-	//DBG_8192D("%s %s:%d\n",__FUNCTION__, current->comm, current->pid);
+	//DBG_8192D("%s %s:%d\n",__func__, current->comm, current->pid);
 
 	if((padapter->bSurpriseRemoved) ||(padapter->pwrctrlpriv.pnp_bstop_trx)){
 		RT_TRACE(_module_hci_ops_os_c_,_drv_err_,("usbctrl_vendorreq:(padapter->bSurpriseRemoved ||adapter->pwrctrlpriv.pnp_bstop_trx)!!!\n"));
@@ -66,7 +66,7 @@ static int usbctrl_vendorreq(struct intf
 	}
 
 	if(len>MAX_VENDOR_REQ_CMD_SIZE){
-		DBG_8192D( "[%s] Buffer len error ,vendor request failed\n", __FUNCTION__ );
+		DBG_8192D( "[%s] Buffer len error ,vendor request failed\n", __func__ );
 		status = -EINVAL;
 		goto exit;
 	}
@@ -94,7 +94,7 @@ static int usbctrl_vendorreq(struct intf
 #endif
 
 	if ( pIo_buf== NULL) {
-		DBG_8192D( "[%s] pIo_buf == NULL \n", __FUNCTION__ );
+		DBG_8192D( "[%s] pIo_buf == NULL \n", __func__ );
 		status = -ENOMEM;
 		goto release_mutex;
 	}
@@ -647,7 +647,7 @@ static int recvbuf2recvframe(struct rtw_
 		if(precvframe==NULL)
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("recvbuf2recvframe: precvframe==NULL\n"));
-			DBG_8192D("%s()-%d: rtw_alloc_recvframe() failed! RX Drop!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s()-%d: rtw_alloc_recvframe() failed! RX Drop!\n", __func__, __LINE__);
 			goto _exit_recvbuf2recvframe;
 		}
 
@@ -668,7 +668,7 @@ static int recvbuf2recvframe(struct rtw_
 		if((pattrib->pkt_len<=0) || (pkt_offset>transfer_len))
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_info_,("recvbuf2recvframe: pkt_len<=0\n"));
-			DBG_8192D("%s()-%d: RX Warning!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s()-%d: RX Warning!\n", __func__, __LINE__);
 			rtw_free_recvframe(precvframe, pfree_recv_queue);
 			goto _exit_recvbuf2recvframe;
 		}
@@ -981,7 +981,7 @@ static int recvbuf2recvframe(struct rtw_
 		if(precvframe==NULL)
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("recvbuf2recvframe: precvframe==NULL\n"));
-			DBG_8192D("%s()-%d: rtw_alloc_recvframe() failed! RX Drop!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s()-%d: rtw_alloc_recvframe() failed! RX Drop!\n", __func__, __LINE__);
 			goto _exit_recvbuf2recvframe;
 		}
 
@@ -1002,7 +1002,7 @@ static int recvbuf2recvframe(struct rtw_
 		if((pattrib->pkt_len<=0) || (pkt_offset>transfer_len))
 		{
 			RT_TRACE(_module_rtl871x_recv_c_,_drv_info_,("recvbuf2recvframe: pkt_len<=0\n"));
-			DBG_8192D("%s()-%d: RX Warning!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s()-%d: RX Warning!\n", __func__, __LINE__);
 			rtw_free_recvframe(precvframe, pfree_recv_queue);
 			goto _exit_recvbuf2recvframe;
 		}
--- a/drivers/staging/rtl8192du/include/osdep_service.h
+++ b/drivers/staging/rtl8192du/include/osdep_service.h
@@ -347,8 +347,8 @@ extern void	rtw_usleep_os(int us);
 extern u32	rtw_atoi(u8* s);
 
 #ifdef DBG_DELAY_OS
-#define rtw_mdelay_os(ms) _rtw_mdelay_os((ms), __FUNCTION__, __LINE__)
-#define rtw_udelay_os(ms) _rtw_udelay_os((ms), __FUNCTION__, __LINE__)
+#define rtw_mdelay_os(ms) _rtw_mdelay_os((ms), __func__, __LINE__)
+#define rtw_udelay_os(ms) _rtw_udelay_os((ms), __func__, __LINE__)
 extern void _rtw_mdelay_os(int ms, const char *func, const int line);
 extern void _rtw_udelay_os(int us, const char *func, const int line);
 #else
--- a/drivers/staging/rtl8192du/include/rtw_debug.h
+++ b/drivers/staging/rtl8192du/include/rtw_debug.h
@@ -191,7 +191,7 @@
 		do {	\
 			if (GlobalDebugLevel >= _drv_debug_) \
 			{																	\
-				_dbgdump("\n %s : %s enters at %d\n", RTL871X_MODULE_NAME, __FUNCTION__, __LINE__);\
+				_dbgdump("\n %s : %s enters at %d\n", RTL871X_MODULE_NAME, __func__, __LINE__);\
 			}		\
 		} while(0)
 
@@ -200,7 +200,7 @@
 		do {	\
 			if (GlobalDebugLevel >= _drv_debug_) \
 			{																	\
-				_dbgdump("\n %s : %s exits at %d\n", RTL871X_MODULE_NAME, __FUNCTION__, __LINE__); \
+				_dbgdump("\n %s : %s exits at %d\n", RTL871X_MODULE_NAME, __func__, __LINE__); \
 			}	\
 		} while(0)
 
--- a/drivers/staging/rtl8192du/include/rtw_io.h
+++ b/drivers/staging/rtl8192du/include/rtw_io.h
@@ -355,17 +355,17 @@ extern int dbg_rtw_write16(struct rtw_ad
 extern int dbg_rtw_write32(struct rtw_adapter *adapter, u32 addr, u32 val, const char *caller, const int line);
 extern int dbg_rtw_writeN(struct rtw_adapter *adapter, u32 addr ,u32 length , u8 *data, const char *caller, const int line);
 
-#define rtw_read8(adapter, addr) dbg_rtw_read8((adapter), (addr), __FUNCTION__, __LINE__)
-#define rtw_read16(adapter, addr) dbg_rtw_read16((adapter), (addr), __FUNCTION__, __LINE__)
-#define rtw_read32(adapter, addr) dbg_rtw_read32((adapter), (addr), __FUNCTION__, __LINE__)
+#define rtw_read8(adapter, addr) dbg_rtw_read8((adapter), (addr), __func__, __LINE__)
+#define rtw_read16(adapter, addr) dbg_rtw_read16((adapter), (addr), __func__, __LINE__)
+#define rtw_read32(adapter, addr) dbg_rtw_read32((adapter), (addr), __func__, __LINE__)
 #define rtw_read_mem(adapter, addr, cnt, mem) _rtw_read_mem((adapter), (addr), (cnt), (mem))
 #define rtw_read_port(adapter, addr, cnt, mem) _rtw_read_port((adapter), (addr), (cnt), (mem))
 #define rtw_read_port_cancel(adapter) _rtw_read_port_cancel((adapter))
 
-#define  rtw_write8(adapter, addr, val) dbg_rtw_write8((adapter), (addr), (val), __FUNCTION__, __LINE__)
-#define  rtw_write16(adapter, addr, val) dbg_rtw_write16((adapter), (addr), (val), __FUNCTION__, __LINE__)
-#define  rtw_write32(adapter, addr, val) dbg_rtw_write32((adapter), (addr), (val), __FUNCTION__, __LINE__)
-#define  rtw_writeN(adapter, addr, length, data) dbg_rtw_writeN((adapter), (addr), (length), (data), __FUNCTION__, __LINE__)
+#define  rtw_write8(adapter, addr, val) dbg_rtw_write8((adapter), (addr), (val), __func__, __LINE__)
+#define  rtw_write16(adapter, addr, val) dbg_rtw_write16((adapter), (addr), (val), __func__, __LINE__)
+#define  rtw_write32(adapter, addr, val) dbg_rtw_write32((adapter), (addr), (val), __func__, __LINE__)
+#define  rtw_writeN(adapter, addr, length, data) dbg_rtw_writeN((adapter), (addr), (length), (data), __func__, __LINE__)
 
 #define rtw_write8_async(adapter, addr, val) _rtw_write8_async((adapter), (addr), (val))
 #define rtw_write16_async(adapter, addr, val) _rtw_write16_async((adapter), (addr), (val))
--- a/drivers/staging/rtl8192du/include/rtw_ioctl.h
+++ b/drivers/staging/rtl8192du/include/rtw_ioctl.h
@@ -66,7 +66,7 @@
 #define DEBUG_OID(dbg, str)			\
        if((!dbg))							\
 	{								\
-	   RT_TRACE(_module_rtl871x_ioctl_c_,_drv_info_,("%s(%d): %s", __FUNCTION__, __LINE__, str));	\
+	   RT_TRACE(_module_rtl871x_ioctl_c_,_drv_info_,("%s(%d): %s", __func__, __LINE__, str));	\
 	}
 
 
--- a/drivers/staging/rtl8192du/include/rtw_iol.h
+++ b/drivers/staging/rtl8192du/include/rtw_iol.h
@@ -65,9 +65,9 @@ int rtw_IOL_exec_empty_cmds_sync(struct
 int dbg_rtw_IOL_append_WB_cmd(struct xmit_frame *xmit_frame, u16 addr, u8 value, const char *caller, const int line);
 int dbg_rtw_IOL_append_WW_cmd(struct xmit_frame *xmit_frame, u16 addr, u16 value, const char *caller, const int line);
 int dbg_rtw_IOL_append_WD_cmd(struct xmit_frame *xmit_frame, u16 addr, u32 value, const char *caller, const int line);
-#define rtw_IOL_append_WB_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WB_cmd((xmit_frame), (addr), (value), __FUNCTION__, __LINE__)
-#define rtw_IOL_append_WW_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WW_cmd((xmit_frame), (addr), (value), __FUNCTION__, __LINE__)
-#define rtw_IOL_append_WD_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WD_cmd((xmit_frame), (addr), (value), __FUNCTION__, __LINE__)
+#define rtw_IOL_append_WB_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WB_cmd((xmit_frame), (addr), (value), __func__, __LINE__)
+#define rtw_IOL_append_WW_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WW_cmd((xmit_frame), (addr), (value), __func__, __LINE__)
+#define rtw_IOL_append_WD_cmd(xmit_frame, addr, value) dbg_rtw_IOL_append_WD_cmd((xmit_frame), (addr), (value), __func__, __LINE__)
 #else
 #define rtw_IOL_append_WB_cmd(xmit_frame, addr, value) _rtw_IOL_append_WB_cmd((xmit_frame), (addr), (value))
 #define rtw_IOL_append_WW_cmd(xmit_frame, addr, value) _rtw_IOL_append_WW_cmd((xmit_frame), (addr), (value))
--- a/drivers/staging/rtl8192du/include/rtw_mlme_ext.h
+++ b/drivers/staging/rtl8192du/include/rtw_mlme_ext.h
@@ -669,13 +669,13 @@ void addba_timer_hdl(struct sta_info *ps
 
 #define set_survey_timer(mlmeext, ms) \
 	do { \
-		/*DBG_871X("%s set_survey_timer(%p, %d)\n", __FUNCTION__, (mlmeext), (ms));*/ \
+		/*DBG_871X("%s set_survey_timer(%p, %d)\n", __func__, (mlmeext), (ms));*/ \
 		_set_timer(&(mlmeext)->survey_timer, (ms)); \
 	} while(0)
 
 #define set_link_timer(mlmeext, ms) \
 	do { \
-		/*DBG_871X("%s set_link_timer(%p, %d)\n", __FUNCTION__, (mlmeext), (ms));*/ \
+		/*DBG_871X("%s set_link_timer(%p, %d)\n", __func__, (mlmeext), (ms));*/ \
 		_set_timer(&(mlmeext)->link_timer, (ms)); \
 	} while(0)
 
--- a/drivers/staging/rtl8192du/include/rtw_p2p.h
+++ b/drivers/staging/rtl8192du/include/rtw_p2p.h
@@ -120,10 +120,10 @@ void dbg_rtw_p2p_set_state(struct wifidi
 void dbg_rtw_p2p_set_pre_state(struct wifidirect_info *wdinfo, enum P2P_STATE state, const char *caller, int line);
 //void dbg_rtw_p2p_restore_state(struct wifidirect_info *wdinfo, const char *caller, int line);
 void dbg_rtw_p2p_set_role(struct wifidirect_info *wdinfo, enum P2P_ROLE role, const char *caller, int line);
-#define rtw_p2p_set_state(wdinfo, state) dbg_rtw_p2p_set_state(wdinfo, state, __FUNCTION__, __LINE__)
-#define rtw_p2p_set_pre_state(wdinfo, state) dbg_rtw_p2p_set_pre_state(wdinfo, state, __FUNCTION__, __LINE__)
-#define rtw_p2p_set_role(wdinfo, role) dbg_rtw_p2p_set_role(wdinfo, role, __FUNCTION__, __LINE__)
-//#define rtw_p2p_restore_state(wdinfo) dbg_rtw_p2p_restore_state(wdinfo, __FUNCTION__, __LINE__)
+#define rtw_p2p_set_state(wdinfo, state) dbg_rtw_p2p_set_state(wdinfo, state, __func__, __LINE__)
+#define rtw_p2p_set_pre_state(wdinfo, state) dbg_rtw_p2p_set_pre_state(wdinfo, state, __func__, __LINE__)
+#define rtw_p2p_set_role(wdinfo, role) dbg_rtw_p2p_set_role(wdinfo, role, __func__, __LINE__)
+//#define rtw_p2p_restore_state(wdinfo) dbg_rtw_p2p_restore_state(wdinfo, __func__, __LINE__)
 #else //CONFIG_DBG_P2P
 #define rtw_p2p_set_state(wdinfo, state) _rtw_p2p_set_state(wdinfo, state)
 #define rtw_p2p_set_pre_state(wdinfo, state) _rtw_p2p_set_pre_state(wdinfo, state)
--- a/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
+++ b/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
@@ -270,7 +270,7 @@ struct pwrctrl_priv
 
 #define _rtw_set_pwr_state_check_timer(pwrctrlpriv, ms) \
 	do { \
-		/*DBG_871X("%s _rtw_set_pwr_state_check_timer(%p, %d)\n", __FUNCTION__, (pwrctrlpriv), (ms));*/ \
+		/*DBG_871X("%s _rtw_set_pwr_state_check_timer(%p, %d)\n", __func__, (pwrctrlpriv), (ms));*/ \
 		_set_timer(&(pwrctrlpriv)->pwr_state_check_timer, (ms)); \
 	} while(0)
 
@@ -336,8 +336,8 @@ void rtw_unregister_early_suspend(struct
 u8 rtw_interface_ps_func(struct rtw_adapter *padapter, enum HAL_INTF_PS_FUNC efunc_id,u8* val);
 void rtw_set_ips_deny(struct rtw_adapter *padapter, u32 ms);
 int _rtw_pwr_wakeup(struct rtw_adapter *padapter, u32 ips_deffer_ms, const char *caller);
-#define rtw_pwr_wakeup(adapter) _rtw_pwr_wakeup(adapter, RTW_PWR_STATE_CHK_INTERVAL, __FUNCTION__)
-#define rtw_pwr_wakeup_ex(adapter, ips_deffer_ms) _rtw_pwr_wakeup(adapter, ips_deffer_ms, __FUNCTION__)
+#define rtw_pwr_wakeup(adapter) _rtw_pwr_wakeup(adapter, RTW_PWR_STATE_CHK_INTERVAL, __func__)
+#define rtw_pwr_wakeup_ex(adapter, ips_deffer_ms) _rtw_pwr_wakeup(adapter, ips_deffer_ms, __func__)
 int rtw_pm_set_ips(struct rtw_adapter *padapter, u8 mode);
 int rtw_pm_set_lps(struct rtw_adapter *padapter, u8 mode);
 
--- a/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
@@ -342,7 +342,7 @@ static int rtw_cfg80211_inform_bss(_adap
 
 	bssinf_len = pnetwork->network.IELength+sizeof (struct rtw_ieee80211_hdr_3addr);
 	if(bssinf_len > MAX_BSSINFO_LEN){
-		DBG_871X("%s IE Length too long > %d byte \n",__FUNCTION__,MAX_BSSINFO_LEN);
+		DBG_871X("%s IE Length too long > %d byte \n",__func__,MAX_BSSINFO_LEN);
 		goto exit;
 	}
 
@@ -521,7 +521,7 @@ void rtw_cfg80211_indicate_connect(_adap
 		notify_channel = ieee80211_get_channel(wiphy, freq);
 		#endif
 
-		DBG_871X("%s call cfg80211_roamed\n", __FUNCTION__);
+		DBG_871X("%s call cfg80211_roamed\n", __func__);
 		cfg80211_roamed(padapter->pnetdev
 			#if LINUX_VERSION_CODE > KERNEL_VERSION(2, 6, 39) || defined(COMPAT_KERNEL_RELEASE)
 			, notify_channel
@@ -645,7 +645,7 @@ static int set_group_key(_adapter *padap
 	struct cmd_priv	*pcmdpriv=&(padapter->cmdpriv);
 	int res=_SUCCESS;
 
-	DBG_8192C("%s\n", __FUNCTION__);
+	DBG_8192C("%s\n", __func__);
 
 	pcmd = (struct cmd_obj*)rtw_zmalloc(sizeof(struct	cmd_obj));
 	if(pcmd==NULL){
@@ -733,7 +733,7 @@ static int rtw_cfg80211_ap_set_encryptio
 	struct security_priv* psecuritypriv=&(padapter->securitypriv);
 	struct sta_priv *pstapriv = &padapter->stapriv;
 
-	DBG_8192C("%s\n", __FUNCTION__);
+	DBG_8192C("%s\n", __func__);
 
 	param->u.crypt.err = 0;
 	param->u.crypt.alg[IEEE_CRYPT_ALG_NAME_LEN - 1] = '\0';
@@ -831,7 +831,7 @@ static int rtw_cfg80211_ap_set_encryptio
 		{
 			if(strcmp(param->u.crypt.alg, "WEP") == 0)
 			{
-				DBG_8192C("%s, set group_key, WEP\n", __FUNCTION__);
+				DBG_8192C("%s, set group_key, WEP\n", __func__);
 
 				memcpy(psecuritypriv->dot118021XGrpKey[param->u.crypt.idx].skey,  param->u.crypt.key, (param->u.crypt.key_len>16 ?16:param->u.crypt.key_len));
 
@@ -844,7 +844,7 @@ static int rtw_cfg80211_ap_set_encryptio
 			}
 			else if(strcmp(param->u.crypt.alg, "TKIP") == 0)
 			{
-				DBG_8192C("%s, set group_key, TKIP\n", __FUNCTION__);
+				DBG_8192C("%s, set group_key, TKIP\n", __func__);
 
 				psecuritypriv->dot118021XGrpPrivacy = _TKIP_;
 
@@ -860,7 +860,7 @@ static int rtw_cfg80211_ap_set_encryptio
 			}
 			else if(strcmp(param->u.crypt.alg, "CCMP") == 0)
 			{
-				DBG_8192C("%s, set group_key, CCMP\n", __FUNCTION__);
+				DBG_8192C("%s, set group_key, CCMP\n", __func__);
 
 				psecuritypriv->dot118021XGrpPrivacy = _AES_;
 
@@ -868,7 +868,7 @@ static int rtw_cfg80211_ap_set_encryptio
 			}
 			else
 			{
-				DBG_8192C("%s, set group_key, none\n", __FUNCTION__);
+				DBG_8192C("%s, set group_key, none\n", __func__);
 
 				psecuritypriv->dot118021XGrpPrivacy = _NO_PRIVACY_;
 			}
@@ -904,7 +904,7 @@ static int rtw_cfg80211_ap_set_encryptio
 
 				if(strcmp(param->u.crypt.alg, "WEP") == 0)
 				{
-					DBG_8192C("%s, set pairwise key, WEP\n", __FUNCTION__);
+					DBG_8192C("%s, set pairwise key, WEP\n", __func__);
 
 					psta->dot118021XPrivacy = _WEP40_;
 					if(param->u.crypt.key_len==13)
@@ -914,7 +914,7 @@ static int rtw_cfg80211_ap_set_encryptio
 				}
 				else if(strcmp(param->u.crypt.alg, "TKIP") == 0)
 				{
-					DBG_8192C("%s, set pairwise key, TKIP\n", __FUNCTION__);
+					DBG_8192C("%s, set pairwise key, TKIP\n", __func__);
 
 					psta->dot118021XPrivacy = _TKIP_;
 
@@ -929,13 +929,13 @@ static int rtw_cfg80211_ap_set_encryptio
 				else if(strcmp(param->u.crypt.alg, "CCMP") == 0)
 				{
 
-					DBG_8192C("%s, set pairwise key, CCMP\n", __FUNCTION__);
+					DBG_8192C("%s, set pairwise key, CCMP\n", __func__);
 
 					psta->dot118021XPrivacy = _AES_;
 				}
 				else
 				{
-					DBG_8192C("%s, set pairwise key, none\n", __FUNCTION__);
+					DBG_8192C("%s, set pairwise key, none\n", __func__);
 
 					psta->dot118021XPrivacy = _NO_PRIVACY_;
 				}
@@ -1592,7 +1592,7 @@ void rtw_cfg80211_indicate_scan_done(str
 		//struct cfg80211_scan_request *scan_request = pwdev_priv->scan_request;
 
 		#ifdef CONFIG_DEBUG_CFG80211
-		DBG_871X("%s with scan req\n", __FUNCTION__);
+		DBG_871X("%s with scan req\n", __func__);
 		#endif
 
 		//avoid WARN_ON(request != wiphy_to_dev(request->wiphy)->scan_req);
@@ -1610,7 +1610,7 @@ void rtw_cfg80211_indicate_scan_done(str
 
 	} else {
 		#ifdef CONFIG_DEBUG_CFG80211
-		DBG_871X("%s without scan req\n", __FUNCTION__);
+		DBG_871X("%s without scan req\n", __func__);
 		#endif
 	}
 	spin_unlock_bh(&pwdev_priv->scan_req_lock);
@@ -1701,7 +1701,7 @@ static int rtw_cfg80211_set_probe_req_wp
 
 			pmlmepriv->wps_probe_req_ie = rtw_malloc(wps_ielen);
 			if ( pmlmepriv->wps_probe_req_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -1729,7 +1729,7 @@ static int rtw_cfg80211_set_probe_req_wp
 
 			pmlmepriv->p2p_probe_req_ie = rtw_malloc(p2p_ielen);
 			if ( pmlmepriv->p2p_probe_req_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -1758,7 +1758,7 @@ static int rtw_cfg80211_set_probe_req_wp
 
 			pmlmepriv->wfd_probe_req_ie = rtw_malloc(wfd_ielen);
 			if ( pmlmepriv->wfd_probe_req_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -1829,7 +1829,7 @@ static int cfg80211_rtw_scan(struct wiph
 	{
 
 #ifdef CONFIG_DEBUG_CFG80211
-		DBG_871X("%s under WIFI_AP_STATE\n", __FUNCTION__);
+		DBG_871X("%s under WIFI_AP_STATE\n", __func__);
 #endif
 		//need_indicate_scan_done = true;
 		//goto check_need_indicate_scan_done;
@@ -2288,7 +2288,7 @@ static int rtw_cfg80211_set_wpa_ie(_adap
 		if((p2p_ie=rtw_get_p2p_ie(buf, ielen, NULL, &p2p_ielen)))
 		{
 			#ifdef CONFIG_DEBUG_CFG80211
-			DBG_8192C("%s p2p_assoc_req_ielen=%d\n", __FUNCTION__, p2p_ielen);
+			DBG_8192C("%s p2p_assoc_req_ielen=%d\n", __func__, p2p_ielen);
 			#endif
 
 			if(pmlmepriv->p2p_assoc_req_ie)
@@ -2301,7 +2301,7 @@ static int rtw_cfg80211_set_wpa_ie(_adap
 
 			pmlmepriv->p2p_assoc_req_ie = rtw_malloc(p2p_ielen);
 			if ( pmlmepriv->p2p_assoc_req_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				goto exit;
 			}
 			memcpy(pmlmepriv->p2p_assoc_req_ie, p2p_ie, p2p_ielen);
@@ -2319,7 +2319,7 @@ static int rtw_cfg80211_set_wpa_ie(_adap
 		if(rtw_get_wfd_ie(buf, ielen, NULL, &wfd_ielen))
 		{
 			#ifdef CONFIG_DEBUG_CFG80211
-			DBG_8192C("%s wfd_assoc_req_ielen=%d\n", __FUNCTION__, wfd_ielen);
+			DBG_8192C("%s wfd_assoc_req_ielen=%d\n", __func__, wfd_ielen);
 			#endif
 
 			if(pmlmepriv->wfd_assoc_req_ie)
@@ -2332,7 +2332,7 @@ static int rtw_cfg80211_set_wpa_ie(_adap
 
 			pmlmepriv->wfd_assoc_req_ie = rtw_malloc(wfd_ielen);
 			if ( pmlmepriv->wfd_assoc_req_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				goto exit;
 			}
 			rtw_get_wfd_ie(buf, ielen, pmlmepriv->wfd_assoc_req_ie, &pmlmepriv->wfd_assoc_req_ie_len);
@@ -2386,7 +2386,7 @@ static int cfg80211_rtw_connect(struct w
 	if(wdev_to_priv(padapter->rtw_wdev)->block == true)
 	{
 		ret = -EBUSY;
-		DBG_871X("%s wdev_priv.block is set\n", __FUNCTION__);
+		DBG_871X("%s wdev_priv.block is set\n", __func__);
 		goto exit;
 	}
 
@@ -2402,7 +2402,7 @@ static int cfg80211_rtw_connect(struct w
 
 #ifdef CONFIG_CONCURRENT_MODE
 	if (check_buddy_fwstate(padapter, _FW_UNDER_LINKING) == true) {
-		DBG_8192C("%s, but buddy_intf is under linking\n", __FUNCTION__);
+		DBG_8192C("%s, but buddy_intf is under linking\n", __func__);
 		ret = -EINVAL;
 		goto exit;
 	}
@@ -2437,7 +2437,7 @@ static int cfg80211_rtw_connect(struct w
 
 	if (check_fwstate(pmlmepriv, _FW_UNDER_LINKING) == true) {
 		ret = -EBUSY;
-		DBG_8192C("%s, fw_state=0x%x, goto exit\n", __FUNCTION__, pmlmepriv->fw_state);
+		DBG_8192C("%s, fw_state=0x%x, goto exit\n", __func__, pmlmepriv->fw_state);
 		goto exit;
 	}
 	if (check_fwstate(pmlmepriv, _FW_UNDER_SURVEY) == true) {
@@ -2561,7 +2561,7 @@ static int cfg80211_rtw_connect(struct w
 	{
 		u32 wep_key_idx, wep_key_len,wep_total_len;
 		NDIS_802_11_WEP	 *pwep = NULL;
-		DBG_871X("%s(): Shared/Auto WEP\n",__FUNCTION__);
+		DBG_871X("%s(): Shared/Auto WEP\n",__func__);
 
 		wep_key_idx = sme->key_idx;
 		wep_key_len = sme->key_len;
@@ -2638,7 +2638,7 @@ static int cfg80211_rtw_connect(struct w
 
 exit:
 
-	DBG_8192C("<=%s, ret %d\n",__FUNCTION__, ret);
+	DBG_8192C("<=%s, ret %d\n",__func__, ret);
 
 	return ret;
 }
@@ -2658,7 +2658,7 @@ static int cfg80211_rtw_disconnect(struc
 		LeaveAllPowerSaveMode(padapter);
 		rtw_disassoc_cmd(padapter, 500, false);
 
-		DBG_871X("%s...call rtw_indicate_disconnect\n", __FUNCTION__);
+		DBG_871X("%s...call rtw_indicate_disconnect\n", __func__);
 
 		padapter->mlmepriv.not_indic_disco = true;
 		rtw_indicate_disconnect(padapter);
@@ -3319,7 +3319,7 @@ static int rtw_add_beacon(_adapter *adap
 	//struct sta_priv *pstapriv = &padapter->stapriv;
 
 
-	DBG_8192C("%s beacon_head_len=%zu, beacon_tail_len=%zu\n", __FUNCTION__, head_len, tail_len);
+	DBG_8192C("%s beacon_head_len=%zu, beacon_tail_len=%zu\n", __func__, head_len, tail_len);
 
 
 	if(check_fwstate(pmlmepriv, WIFI_AP_STATE) != true)
@@ -3809,7 +3809,7 @@ void rtw_cfg80211_issue_p2p_provision_re
 	size_t frame_body_len = len - sizeof(struct rtw_ieee80211_hdr_3addr);
 
 
-	DBG_871X( "[%s] In\n", __FUNCTION__ );
+	DBG_871X( "[%s] In\n", __func__ );
 
 	//prepare for building provision_request frame
 	memcpy(pwdinfo->tx_prov_disc_info.peerIFAddr, GetAddr1Ptr(buf), ETH_ALEN);
@@ -4119,7 +4119,7 @@ static s32 cfg80211_rtw_remain_on_channe
 			//set_channel_bwmode(padapter, remain_ch, HAL_PRIME_CHNL_OFFSET_DONT_CARE, HT_CHANNEL_WIDTH_20);
 		}
 	} else {
-		DBG_871X("%s remain_ch:%u not in channel plan!!!!\n", __FUNCTION__, remain_ch);
+		DBG_871X("%s remain_ch:%u not in channel plan!!!!\n", __func__, remain_ch);
 	}
 
 
@@ -4515,7 +4515,7 @@ static int rtw_cfg80211_set_beacon_wpsp2
 
 			pmlmepriv->wps_beacon_ie = rtw_malloc(wps_ielen);
 			if ( pmlmepriv->wps_beacon_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -4547,7 +4547,7 @@ static int rtw_cfg80211_set_beacon_wpsp2
 
 			pmlmepriv->p2p_beacon_ie = rtw_malloc(p2p_ielen);
 			if ( pmlmepriv->p2p_beacon_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -4578,7 +4578,7 @@ static int rtw_cfg80211_set_beacon_wpsp2
 
 			pmlmepriv->wfd_beacon_ie = rtw_malloc(wfd_ielen);
 			if ( pmlmepriv->wfd_beacon_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -4631,7 +4631,7 @@ static int rtw_cfg80211_set_probe_resp_w
 
 			pmlmepriv->wps_probe_resp_ie = rtw_malloc(wps_ielen);
 			if ( pmlmepriv->wps_probe_resp_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -4672,7 +4672,7 @@ static int rtw_cfg80211_set_probe_resp_w
 			if( rtw_get_p2p_attr_content( p2p_ie, p2p_ielen, P2P_ATTR_CAPABILITY, (u8*)&cap_attr, (uint*) &attr_contentlen) )
 			{
 				u8 grp_cap=0;
-				//DBG_8192C( "[%s] Got P2P Capability Attr!!\n", __FUNCTION__ );
+				//DBG_8192C( "[%s] Got P2P Capability Attr!!\n", __func__ );
 				cap_attr = le16_to_cpu(cap_attr);
 				grp_cap = (u8)((cap_attr >> 8)&0xff);
 
@@ -4695,7 +4695,7 @@ static int rtw_cfg80211_set_probe_resp_w
 
 				pmlmepriv->p2p_probe_resp_ie = rtw_malloc(p2p_ielen);
 				if ( pmlmepriv->p2p_probe_resp_ie == NULL) {
-					DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+					DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 					return -EINVAL;
 
 				}
@@ -4714,7 +4714,7 @@ static int rtw_cfg80211_set_probe_resp_w
 
 				pmlmepriv->p2p_go_probe_resp_ie = rtw_malloc(p2p_ielen);
 				if ( pmlmepriv->p2p_go_probe_resp_ie == NULL) {
-					DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+					DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 					return -EINVAL;
 
 				}
@@ -4745,7 +4745,7 @@ static int rtw_cfg80211_set_probe_resp_w
 
 			pmlmepriv->wfd_probe_resp_ie = rtw_malloc(wfd_ielen);
 			if ( pmlmepriv->wfd_probe_resp_ie == NULL) {
-				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+				DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 				return -EINVAL;
 
 			}
@@ -4779,7 +4779,7 @@ static int rtw_cfg80211_set_assoc_resp_w
 
 		pmlmepriv->wps_assoc_resp_ie = rtw_malloc(len);
 		if ( pmlmepriv->wps_assoc_resp_ie == NULL) {
-			DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __FUNCTION__, __LINE__);
+			DBG_8192C("%s()-%d: rtw_malloc() ERROR!\n", __func__, __LINE__);
 			return -EINVAL;
 
 		}
--- a/drivers/staging/rtl8192du/os_dep/mlme_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/mlme_linux.c
@@ -337,7 +337,7 @@ static int mgnt_xmit_entry(struct sk_buf
 	struct hostapd_priv *phostapdpriv = rtw_netdev_priv(pnetdev);
 	struct rtw_adapter *padapter = (struct rtw_adapter *)phostapdpriv->padapter;
 
-	//DBG_8192D("%s\n", __FUNCTION__);
+	//DBG_8192D("%s\n", __func__);
 
 	return rtw_hal_hostap_mgnt_xmit_entry(padapter, skb);
 }
@@ -367,7 +367,7 @@ static int mgnt_netdev_close(struct net_
 {
 	struct hostapd_priv *phostapdpriv = rtw_netdev_priv(pnetdev);
 
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 
 	usb_kill_anchored_urbs(&phostapdpriv->anchored);
 
--- a/drivers/staging/rtl8192du/os_dep/os_intfs.c
+++ b/drivers/staging/rtl8192du/os_dep/os_intfs.c
@@ -2200,7 +2200,7 @@ void netdev_br_init(struct net_device *n
 				memcpy(adapter->br_mac, br_netdev->dev_addr, ETH_ALEN);
 				dev_put(br_netdev);
 			} else
-				printk("%s()-%d: dev_get_by_name(%s) failed!", __FUNCTION__, __LINE__, CONFIG_BR_EXT_BRNAME);
+				printk("%s()-%d: dev_get_by_name(%s) failed!", __func__, __LINE__, CONFIG_BR_EXT_BRNAME);
 		}
 
 		adapter->eth_br_ext_info.addPPPoETag = 1;
@@ -2337,7 +2337,7 @@ static int  ips_netdrv_open(struct rtw_a
 {
 	int status = _SUCCESS;
 	padapter->net_closed = false;
-	DBG_8192D("===> %s.........\n", __FUNCTION__);
+	DBG_8192D("===> %s.........\n", __func__);
 
 
 	padapter->bDriverStopped = false;
@@ -2403,7 +2403,7 @@ void rtw_ips_dev_unload(struct rtw_adapt
 {
 	struct net_device *pnetdev = (struct net_device*)padapter->pnetdev;
 	struct xmit_priv	*pxmitpriv = &(padapter->xmitpriv);
-	DBG_8192D("====> %s...\n", __FUNCTION__);
+	DBG_8192D("====> %s...\n", __func__);
 
 	rtw_hal_set_hwreg(padapter, HW_VAR_FIFO_CLEARN_UP, NULL);
 
--- a/drivers/staging/rtl8192du/os_dep/osdep_service.c
+++ b/drivers/staging/rtl8192du/os_dep/osdep_service.c
@@ -294,13 +294,13 @@ void rtw_usleep_os(int us)
 #ifdef DBG_DELAY_OS
 void _rtw_mdelay_os(int ms, const char *func, const int line)
 {
-	DBG_8192D("%s:%d %s(%d)\n", func, line, __FUNCTION__, ms);
+	DBG_8192D("%s:%d %s(%d)\n", func, line, __func__, ms);
 	mdelay((unsigned long)ms);
 }
 
 void _rtw_udelay_os(int us, const char *func, const int line)
 {
-	DBG_8192D("%s:%d %s(%d)\n", func, line, __FUNCTION__, us);
+	DBG_8192D("%s:%d %s(%d)\n", func, line, __func__, us);
       udelay((unsigned long)us);
 }
 #else
@@ -536,20 +536,20 @@ static int retriveFromFile(char *path, u
 
 	if(path && buf) {
 		if( 0 == (ret=openFile(&fp,path, O_RDONLY, 0)) ){
-			DBG_8192D("%s openFile path:%s fp=%p\n",__FUNCTION__, path ,fp);
+			DBG_8192D("%s openFile path:%s fp=%p\n",__func__, path ,fp);
 
 			oldfs = get_fs(); set_fs(get_ds());
 			ret=readFile(fp, buf, sz);
 			set_fs(oldfs);
 			closeFile(fp);
 
-			DBG_8192D("%s readFile, ret:%d\n",__FUNCTION__, ret);
+			DBG_8192D("%s readFile, ret:%d\n",__func__, ret);
 
 		} else {
-			DBG_8192D("%s openFile path:%s Fail, ret:%d\n",__FUNCTION__, path, ret);
+			DBG_8192D("%s openFile path:%s Fail, ret:%d\n",__func__, path, ret);
 		}
 	} else {
-		DBG_8192D("%s NULL pointer\n",__FUNCTION__);
+		DBG_8192D("%s NULL pointer\n",__func__);
 		ret =  -EINVAL;
 	}
 	return ret;
@@ -570,20 +570,20 @@ static int storeToFile(char *path, u8* b
 
 	if(path && buf) {
 		if( 0 == (ret=openFile(&fp, path, O_CREAT|O_WRONLY, 0666)) ) {
-			DBG_8192D("%s openFile path:%s fp=%p\n",__FUNCTION__, path ,fp);
+			DBG_8192D("%s openFile path:%s fp=%p\n",__func__, path ,fp);
 
 			oldfs = get_fs(); set_fs(get_ds());
 			ret=writeFile(fp, buf, sz);
 			set_fs(oldfs);
 			closeFile(fp);
 
-			DBG_8192D("%s writeFile, ret:%d\n",__FUNCTION__, ret);
+			DBG_8192D("%s writeFile, ret:%d\n",__func__, ret);
 
 		} else {
-			DBG_8192D("%s openFile path:%s Fail, ret:%d\n",__FUNCTION__, path, ret);
+			DBG_8192D("%s openFile path:%s Fail, ret:%d\n",__func__, path, ret);
 		}
 	} else {
-		DBG_8192D("%s NULL pointer\n",__FUNCTION__);
+		DBG_8192D("%s NULL pointer\n",__func__);
 		ret =  -EINVAL;
 	}
 	return ret;
--- a/drivers/staging/rtl8192du/os_dep/rtw_android.c
+++ b/drivers/staging/rtl8192du/os_dep/rtw_android.c
@@ -150,10 +150,10 @@ static int wl_android_set_pno_setup(stru
 		};
 #endif /* PNO_SET_DEBUG */
 
-	DHD_INFO(("%s: command=%s, len=%d\n", __FUNCTION__, command, total_len));
+	DHD_INFO(("%s: command=%s, len=%d\n", __func__, command, total_len));
 
 	if (total_len < (strlen(CMD_PNOSETUP_SET) + sizeof(struct cmd_tlv))) {
-		DBG_8192D("%s argument=%d less min size\n", __FUNCTION__, total_len);
+		DBG_8192D("%s argument=%d less min size\n", __func__, total_len);
 		goto exit_proc;
 	}
 
@@ -185,35 +185,35 @@ static int wl_android_set_pno_setup(stru
 		} else {
 			if ((str_ptr[0] != PNO_TLV_TYPE_TIME) || (tlv_size_left <= 1)) {
 				DBG_8192D("%s scan duration corrupted field size %d\n",
-					__FUNCTION__, tlv_size_left);
+					__func__, tlv_size_left);
 				goto exit_proc;
 			}
 			str_ptr++;
 			pno_time = simple_strtoul(str_ptr, &str_ptr, 16);
-			DHD_INFO(("%s: pno_time=%d\n", __FUNCTION__, pno_time));
+			DHD_INFO(("%s: pno_time=%d\n", __func__, pno_time));
 
 			if (str_ptr[0] != 0) {
 				if ((str_ptr[0] != PNO_TLV_FREQ_REPEAT)) {
 					DBG_8192D("%s pno repeat : corrupted field\n",
-						__FUNCTION__);
+						__func__);
 					goto exit_proc;
 				}
 				str_ptr++;
 				pno_repeat = simple_strtoul(str_ptr, &str_ptr, 16);
-				DHD_INFO(("%s :got pno_repeat=%d\n", __FUNCTION__, pno_repeat));
+				DHD_INFO(("%s :got pno_repeat=%d\n", __func__, pno_repeat));
 				if (str_ptr[0] != PNO_TLV_FREQ_EXPO_MAX) {
 					DBG_8192D("%s FREQ_EXPO_MAX corrupted field size\n",
-						__FUNCTION__);
+						__func__);
 					goto exit_proc;
 				}
 				str_ptr++;
 				pno_freq_expo_max = simple_strtoul(str_ptr, &str_ptr, 16);
 				DHD_INFO(("%s: pno_freq_expo_max=%d\n",
-					__FUNCTION__, pno_freq_expo_max));
+					__func__, pno_freq_expo_max));
 			}
 		}
 	} else {
-		DBG_8192D("%s get wrong TLV command\n", __FUNCTION__);
+		DBG_8192D("%s get wrong TLV command\n", __func__);
 		goto exit_proc;
 	}
 
@@ -346,13 +346,13 @@ int rtw_android_priv_cmd(struct net_devi
 	command = rtw_zmalloc(priv_cmd.total_len);
 	if (!command)
 	{
-		DBG_8192D("%s: failed to allocate memory\n", __FUNCTION__);
+		DBG_8192D("%s: failed to allocate memory\n", __func__);
 		ret = -ENOMEM;
 		goto exit;
 	}
 
 	if (!access_ok(VERIFY_READ, priv_cmd.buf, priv_cmd.total_len)){
-		DBG_8192D("%s: failed to access memory\n", __FUNCTION__);
+		DBG_8192D("%s: failed to access memory\n", __func__);
 		ret = -EFAULT;
 		goto exit;
 	 }
@@ -362,7 +362,7 @@ int rtw_android_priv_cmd(struct net_devi
 	}
 
 	DBG_8192D("%s: Android private cmd \"%s\" on %s\n"
-		, __FUNCTION__, command, ifr->ifr_name);
+		, __func__, command, ifr->ifr_name);
 
 	cmd_num = rtw_android_cmdstr_to_num(command);
 
@@ -376,7 +376,7 @@ int rtw_android_priv_cmd(struct net_devi
 
 	if (!g_wifi_on) {
 		DBG_8192D("%s: Ignore private cmd \"%s\" - iface %s is down\n"
-			,__FUNCTION__, command, ifr->ifr_name);
+			,__func__, command, ifr->ifr_name);
 		ret = 0;
 		goto exit;
 	}
@@ -525,14 +525,14 @@ response:
 		if ((bytes_written == 0) && (priv_cmd.total_len > 0))
 			command[0] = '\0';
 		if (bytes_written >= priv_cmd.total_len) {
-			DBG_8192D("%s: bytes_written = %d\n", __FUNCTION__, bytes_written);
+			DBG_8192D("%s: bytes_written = %d\n", __func__, bytes_written);
 			bytes_written = priv_cmd.total_len;
 		} else {
 			bytes_written++;
 		}
 		priv_cmd.used_len = bytes_written;
 		if (copy_to_user((void *)priv_cmd.buf, command, bytes_written)) {
-			DBG_8192D("%s: failed to copy data to user buffer\n", __FUNCTION__);
+			DBG_8192D("%s: failed to copy data to user buffer\n", __func__);
 			ret = -EFAULT;
 		}
 	}
@@ -570,7 +570,7 @@ int rtw_android_wifictrl_func_add(void)
 
 	ret = wifi_add_dev();
 	if (ret) {
-		DBG_8192D("%s: platform_driver_register failed\n", __FUNCTION__);
+		DBG_8192D("%s: platform_driver_register failed\n", __func__);
 		return ret;
 	}
 	g_wifidev_registered = 1;
@@ -578,7 +578,7 @@ int rtw_android_wifictrl_func_add(void)
 	/* Waiting callback after platform_driver_register is done or exit with error */
 	if (down_timeout(&wifi_control_sem,  msecs_to_jiffies(1000)) != 0) {
 		ret = -EINVAL;
-		DBG_8192D("%s: platform_driver_register timeout\n", __FUNCTION__);
+		DBG_8192D("%s: platform_driver_register timeout\n", __func__);
 	}
 
 	return ret;
@@ -625,7 +625,7 @@ int wifi_get_irq_number(unsigned long *i
 
 int wifi_set_power(int on, unsigned long msec)
 {
-	DBG_8192D("%s = %d\n", __FUNCTION__, on);
+	DBG_8192D("%s = %d\n", __func__, on);
 	if (wifi_control_data && wifi_control_data->set_power) {
 		wifi_control_data->set_power(on);
 	}
@@ -637,7 +637,7 @@ int wifi_set_power(int on, unsigned long
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 35))
 int wifi_get_mac_addr(unsigned char *buf)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 	if (!buf)
 		return -EINVAL;
 	if (wifi_control_data && wifi_control_data->get_mac_addr) {
@@ -650,7 +650,7 @@ int wifi_get_mac_addr(unsigned char *buf
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(2, 6, 39)) || defined(COMPAT_KERNEL_RELEASE)
 void *wifi_get_country_code(char *ccode)
 {
-	DBG_8192D("%s\n", __FUNCTION__);
+	DBG_8192D("%s\n", __func__);
 	if (!ccode)
 		return NULL;
 	if (wifi_control_data && wifi_control_data->get_country_code) {
@@ -662,7 +662,7 @@ void *wifi_get_country_code(char *ccode)
 
 static int wifi_set_carddetect(int on)
 {
-	DBG_8192D("%s = %d\n", __FUNCTION__, on);
+	DBG_8192D("%s = %d\n", __func__, on);
 	if (wifi_control_data && wifi_control_data->set_carddetect) {
 		wifi_control_data->set_carddetect(on);
 	}
@@ -674,7 +674,7 @@ static int wifi_probe(struct platform_de
 	struct wifi_platform_data *wifi_ctrl =
 		(struct wifi_platform_data *)(pdev->dev.platform_data);
 
-	DBG_8192D("## %s\n", __FUNCTION__);
+	DBG_8192D("## %s\n", __func__);
 	wifi_irqres = platform_get_resource_byname(pdev, IORESOURCE_IRQ, "bcmdhd_wlan_irq");
 	if (wifi_irqres == NULL)
 		wifi_irqres = platform_get_resource_byname(pdev,
@@ -693,7 +693,7 @@ static int wifi_remove(struct platform_d
 	struct wifi_platform_data *wifi_ctrl =
 		(struct wifi_platform_data *)(pdev->dev.platform_data);
 
-	DBG_8192D("## %s\n", __FUNCTION__);
+	DBG_8192D("## %s\n", __func__);
 	wifi_control_data = wifi_ctrl;
 
 	wifi_set_power(0, 0);	/* Power Off */
@@ -705,7 +705,7 @@ static int wifi_remove(struct platform_d
 
 static int wifi_suspend(struct platform_device *pdev, pm_message_t state)
 {
-	DBG_8192D("##> %s\n", __FUNCTION__);
+	DBG_8192D("##> %s\n", __func__);
 #if (LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 39)) && defined(OOB_INTR_ONLY)
 	bcmsdh_oob_intr_set(0);
 #endif
@@ -714,7 +714,7 @@ static int wifi_suspend(struct platform_
 
 static int wifi_resume(struct platform_device *pdev)
 {
-	DBG_8192D("##> %s\n", __FUNCTION__);
+	DBG_8192D("##> %s\n", __func__);
 #if (LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 39)) && defined(OOB_INTR_ONLY)
 	if (dhd_os_check_if_up(bcmsdh_get_drvdata()))
 		bcmsdh_oob_intr_set(1);
--- a/drivers/staging/rtl8192du/os_dep/usb_intf.c
+++ b/drivers/staging/rtl8192du/os_dep/usb_intf.c
@@ -570,7 +570,7 @@ static void rtw_dev_unload(struct rtw_ad
 			//DBG_8192D("r871x_dev_unload()->rtl871x_hal_deinit()\n");
 #ifdef CONFIG_WOWLAN
 			if((padapter->pwrctrlpriv.bSupportRemoteWakeup==true)&&(padapter->pwrctrlpriv.wowlan_mode==true)){
-				DBG_8192D("%s bSupportWakeOnWlan==true  do not run rtw_hal_deinit()\n",__FUNCTION__);
+				DBG_8192D("%s bSupportWakeOnWlan==true  do not run rtw_hal_deinit()\n",__func__);
 			}
 			else
 #endif //CONFIG_WOWLAN
@@ -695,7 +695,7 @@ int rtw_hw_suspend(struct rtw_adapter *p
 	return 0;
 
 error_exit:
-	DBG_8192D("%s, failed \n",__FUNCTION__);
+	DBG_8192D("%s, failed \n",__func__);
 	return (-1);
 
 }
@@ -746,7 +746,7 @@ int rtw_hw_resume(struct rtw_adapter *pa
 
 	return 0;
 error_exit:
-	DBG_8192D("%s, Open net dev failed \n",__FUNCTION__);
+	DBG_8192D("%s, Open net dev failed \n",__func__);
 	return (-1);
 }
 #endif
@@ -766,7 +766,7 @@ static int rtw_suspend(struct usb_interf
 	u32 start_time = rtw_get_current_time();
 	_func_enter_;
 
-	DBG_8192D("==> %s (%s:%d)\n",__FUNCTION__, current->comm, current->pid);
+	DBG_8192D("==> %s (%s:%d)\n",__func__, current->comm, current->pid);
 
 	if((!padapter->bup) || (padapter->bDriverStopped)||(padapter->bSurpriseRemoved))
 	{
@@ -820,8 +820,8 @@ static int rtw_suspend(struct usb_interf
 #ifdef CONFIG_LAYER2_ROAMING_RESUME
 	if(check_fwstate(pmlmepriv, WIFI_STATION_STATE) && check_fwstate(pmlmepriv, _FW_LINKED) )
 	{
-		//DBG_8192D("%s:%d assoc_ssid:%s\n", __FUNCTION__, __LINE__, pmlmepriv->assoc_ssid.Ssid);
-		DBG_8192D("%s:%d %s(%pM), length:%d assoc_ssid.length:%d\n",__FUNCTION__, __LINE__,
+		//DBG_8192D("%s:%d assoc_ssid:%s\n", __func__, __LINE__, pmlmepriv->assoc_ssid.Ssid);
+		DBG_8192D("%s:%d %s(%pM), length:%d assoc_ssid.length:%d\n",__func__, __LINE__,
 				pmlmepriv->cur_network.network.Ssid.Ssid,
 				pmlmepriv->cur_network.network.MacAddress,
 				pmlmepriv->cur_network.network.Ssid.SsidLength,
@@ -853,7 +853,7 @@ static int rtw_suspend(struct usb_interf
 		rtw_indicate_disconnect(padapter);
 
 exit:
-	DBG_8192D("<===  %s return %d.............. in %dms\n", __FUNCTION__
+	DBG_8192D("<===  %s return %d.............. in %dms\n", __func__
 		, ret, rtw_get_passing_time_ms(start_time));
 
 	_func_exit_;
@@ -899,7 +899,7 @@ int rtw_resume_process(struct rtw_adapte
 	u32 start_time = rtw_get_current_time();
 	_func_enter_;
 
-	DBG_8192D("==> %s (%s:%d)\n",__FUNCTION__, current->comm, current->pid);
+	DBG_8192D("==> %s (%s:%d)\n",__func__, current->comm, current->pid);
 
 	if(padapter) {
 		pnetdev= padapter->pnetdev;
@@ -974,7 +974,7 @@ exit:
 	#endif //CONFIG_RESUME_IN_WORKQUEUE
 
 	pwrpriv->bInSuspend = false;
-	DBG_8192D("<===  %s return %d.............. in %dms\n", __FUNCTION__
+	DBG_8192D("<===  %s return %d.............. in %dms\n", __func__
 		, ret, rtw_get_passing_time_ms(start_time));
 
 	_func_exit_;
@@ -1171,9 +1171,9 @@ struct rtw_adapter *rtw_usb_if1_init(str
 			usb_autopm_get_interface(dvobj->pusbintf );//init pm_usage_cnt ,let it start from 1
 
 			#if (LINUX_VERSION_CODE>=KERNEL_VERSION(2,6,32))
-			DBG_8192D("%s...pm_usage_cnt(%d).....\n",__FUNCTION__, atomic_read(&(dvobj->pusbintf ->pm_usage_cnt)));
+			DBG_8192D("%s...pm_usage_cnt(%d).....\n",__func__, atomic_read(&(dvobj->pusbintf ->pm_usage_cnt)));
 			#else
-			DBG_8192D("%s...pm_usage_cnt(%d).....\n",__FUNCTION__, dvobj->pusbintf ->pm_usage_cnt);
+			DBG_8192D("%s...pm_usage_cnt(%d).....\n",__func__, dvobj->pusbintf ->pm_usage_cnt);
 			#endif
 		}
 	}
--- a/drivers/staging/rtl8192du/os_dep/usb_ops_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/usb_ops_linux.c
@@ -380,7 +380,7 @@ _func_enter_;
 	{
 		RT_TRACE(_module_hci_ops_os_c_,_drv_err_,("usb_write_port_complete:bDriverStopped(%d) OR bSurpriseRemoved(%d)", padapter->bDriverStopped, padapter->bSurpriseRemoved));
 		DBG_8192D("%s(): TX Warning! bDriverStopped(%d) OR bSurpriseRemoved(%d) bWritePortCancel(%d) pxmitbuf->ext_tag(%x) \n",
-		__FUNCTION__,padapter->bDriverStopped, padapter->bSurpriseRemoved,padapter->bReadPortCancel,pxmitbuf->ext_tag);
+		__func__,padapter->bDriverStopped, padapter->bSurpriseRemoved,padapter->bReadPortCancel,pxmitbuf->ext_tag);
 
 		goto check_completion;
 	}
@@ -469,7 +469,7 @@ _func_enter_;
 
 	if ((padapter->bDriverStopped) || (padapter->bSurpriseRemoved) ||(padapter->pwrctrlpriv.pnp_bstop_trx)) {
 		#ifdef DBG_TX
-		DBG_8192D(" DBG_TX %s:%d bDriverStopped%d, bSurpriseRemoved:%d, pnp_bstop_trx:%d\n",__FUNCTION__, __LINE__
+		DBG_8192D(" DBG_TX %s:%d bDriverStopped%d, bSurpriseRemoved:%d, pnp_bstop_trx:%d\n",__func__, __LINE__
 			,padapter->bDriverStopped, padapter->bSurpriseRemoved, padapter->pwrctrlpriv.pnp_bstop_trx );
 		#endif
 		RT_TRACE(_module_hci_ops_os_c_,_drv_err_,("usb_write_port:( padapter->bDriverStopped ||padapter->bSurpriseRemoved ||adapter->pwrctrlpriv.pnp_bstop_trx)!!!\n"));
--- a/drivers/staging/rtl8192du/os_dep/xmit_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/xmit_linux.c
@@ -111,12 +111,12 @@ void rtw_set_tx_chksum_offload(struct sk
                                 udp->check = 0;
 #endif
                         } else {
-				DBG_8192D("%s-%d TCP CSUM offload Error!!\n", __FUNCTION__, __LINE__);
+				DBG_8192D("%s-%d TCP CSUM offload Error!!\n", __func__, __LINE__);
                                 WARN_ON(1);     /* we need a WARN() */
 			    }
 		}
 		else { // IP fragmentation case
-			DBG_8192D("%s-%d nr_frags != 0, using skb_checksum_help(skb);!!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s-%d nr_frags != 0, using skb_checksum_help(skb);!!\n", __func__, __LINE__);
 			skb_checksum_help(skb);
 		}
 	}
@@ -271,13 +271,13 @@ int rtw_mlcst2unicst(struct rtw_adapter
 			memcpy(newskb->data, psta->hwaddr, 6);
 			res = rtw_xmit(padapter, &newskb);
 			if (res < 0) {
-				DBG_8192D("%s()-%d: rtw_xmit() return error!\n", __FUNCTION__, __LINE__);
+				DBG_8192D("%s()-%d: rtw_xmit() return error!\n", __func__, __LINE__);
 				pxmitpriv->tx_drop++;
 				dev_kfree_skb_any(newskb);
 			} else
 				pxmitpriv->tx_pkts++;
 		} else {
-			DBG_8192D("%s-%d: skb_copy() failed!\n", __FUNCTION__, __LINE__);
+			DBG_8192D("%s-%d: skb_copy() failed!\n", __func__, __LINE__);
 			pxmitpriv->tx_drop++;
 
 			spin_unlock_bh(&pstapriv->asoc_list_lock);
@@ -309,7 +309,7 @@ _func_enter_;
 	if (rtw_if_up(padapter) == false) {
 		RT_TRACE(_module_xmit_osdep_c_, _drv_err_, ("rtw_xmit_entry: rtw_if_up fail\n"));
 		#ifdef DBG_TX_DROP_FRAME
-		DBG_8192D("DBG_TX_DROP_FRAME %s if_up fail\n", __FUNCTION__);
+		DBG_8192D("DBG_TX_DROP_FRAME %s if_up fail\n", __func__);
 		#endif
 		goto drop_packet;
 	}
@@ -318,7 +318,7 @@ _func_enter_;
 	queue = skb_get_queue_mapping(pkt);
 	/* No free space for Tx, tx_worker is too slow */
 	if (pxmitpriv->hwxmits[queue].accnt > NR_XMITFRAME/2) {
-		//DBG_8192D("%s(): stop netif_subqueue[%d]\n", __FUNCTION__, queue);
+		//DBG_8192D("%s(): stop netif_subqueue[%d]\n", __func__, queue);
 		netif_stop_subqueue(padapter->pnetdev, queue);
 		return NETDEV_TX_BUSY;
 	}
@@ -345,7 +345,7 @@ _func_enter_;
 	res = rtw_xmit(padapter, &pkt);
 	if (res < 0) {
 		#ifdef DBG_TX_DROP_FRAME
-		DBG_8192D("DBG_TX_DROP_FRAME %s rtw_xmit fail\n", __FUNCTION__);
+		DBG_8192D("DBG_TX_DROP_FRAME %s rtw_xmit fail\n", __func__);
 		#endif
 		goto drop_packet;
 	}
