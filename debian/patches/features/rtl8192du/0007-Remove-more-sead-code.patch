From 934320bb7561e6fb100da33b3b38ce1596a1c3c4 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 00:43:39 -0500
Subject: [PATCH 007/210] Remove more sead code

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ioctl_rtl.c      | 1031 -----------------------------------
 core/rtw_mlme.c           |  237 +-------
 core/rtw_mp.c             | 1323 ---------------------------------------------
 core/rtw_recv.c           |  357 ++----------
 hal/rtl8192d_rf6052.c     |   59 --
 hal/usb_ops_linux.c       |   95 ----
 os_dep/rtw_android.c      |   55 --
 14 files changed, 62 insertions(+), 3099 deletions(-)
 delete mode 100644 core/rtw_ioctl_rtl.c
 delete mode 100644 core/rtw_mp.c

--- a/drivers/staging/rtl8192du/core/rtw_ioctl_rtl.c
+++ /dev/null
@@ -1,1031 +0,0 @@
-/******************************************************************************
- *
- * Copyright(c) 2007 - 2011 Realtek Corporation. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms of version 2 of the GNU General Public License as
- * published by the Free Software Foundation.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
- * more details.
- *
- * You should have received a copy of the GNU General Public License along with
- * this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA
- *
- *
- ******************************************************************************/
-#define  _RTW_IOCTL_RTL_C_
-
-#include <drv_conf.h>
-#include <osdep_service.h>
-#include <drv_types.h>
-#include <wlan_bssdef.h>
-#include <wifi.h>
-#include <rtw_ioctl.h>
-#include <rtw_ioctl_set.h>
-#include <rtw_ioctl_query.h>
-#include <rtw_ioctl_rtl.h>
-#include <mp_custom_oid.h>
-#ifdef CONFIG_MP_INCLUDED
-#include <rtw_mp.h>
-#include <rtw_mp_ioctl.h>
-#endif
-
-struct oid_obj_priv oid_rtl_seg_01_01[] =
-{
-	{1, &oid_null_function},										//0x80
-	{1, &oid_null_function},										//0x81
-	{1, &oid_null_function},										//0x82
-	{1, &oid_null_function},										//0x83//OID_RT_SET_SNIFFER_MODE
-	{1, &oid_rt_get_signal_quality_hdl},							//0x84
-	{1, &oid_rt_get_small_packet_crc_hdl},						//0x85
-	{1, &oid_rt_get_middle_packet_crc_hdl},						//0x86
-	{1, &oid_rt_get_large_packet_crc_hdl},						//0x87
-	{1, &oid_rt_get_tx_retry_hdl},								//0x88
-	{1, &oid_rt_get_rx_retry_hdl},								//0x89
-	{1, &oid_rt_pro_set_fw_dig_state_hdl},						//0x8A
-	{1, &oid_rt_pro_set_fw_ra_state_hdl}	,						//0x8B
-	{1, &oid_null_function},										//0x8C
-	{1, &oid_null_function},										//0x8D
-	{1, &oid_null_function},										//0x8E
-	{1, &oid_null_function},										//0x8F
-	{1, &oid_rt_get_rx_total_packet_hdl},							//0x90
-	{1, &oid_rt_get_tx_beacon_ok_hdl},							//0x91
-	{1, &oid_rt_get_tx_beacon_err_hdl},							//0x92
-	{1, &oid_rt_get_rx_icv_err_hdl},								//0x93
-	{1, &oid_rt_set_encryption_algorithm_hdl},					//0x94
-	{1, &oid_null_function},										//0x95
-	{1, &oid_rt_get_preamble_mode_hdl},							//0x96
-	{1, &oid_null_function},										//0x97
-	{1, &oid_rt_get_ap_ip_hdl},									//0x98
-	{1, &oid_rt_get_channelplan_hdl},							//0x99
-	{1, &oid_rt_set_preamble_mode_hdl},							//0x9A
-	{1, &oid_rt_set_bcn_intvl_hdl},								//0x9B
-	{1, &oid_null_function},										//0x9C
-	{1, &oid_rt_dedicate_probe_hdl},								//0x9D
-	{1, &oid_null_function},										//0x9E
-	{1, &oid_null_function},										//0x9F
-	{1, &oid_null_function},										//0xA0
-	{1, &oid_null_function},										//0xA1
-	{1, &oid_null_function},										//0xA2
-	{1, &oid_null_function},										//0xA3
-	{1, &oid_null_function},										//0xA4
-	{1, &oid_null_function},										//0xA5
-	{1, &oid_null_function},										//0xA6
-	{1, &oid_rt_get_total_tx_bytes_hdl},							//0xA7
-	{1, &oid_rt_get_total_rx_bytes_hdl},							//0xA8
-	{1, &oid_rt_current_tx_power_level_hdl},						//0xA9
-	{1, &oid_rt_get_enc_key_mismatch_count_hdl},				//0xAA
-	{1, &oid_rt_get_enc_key_match_count_hdl},					//0xAB
-	{1, &oid_rt_get_channel_hdl},								//0xAC
-	{1, &oid_rt_set_channelplan_hdl},								//0xAD
-	{1, &oid_rt_get_hardware_radio_off_hdl},						//0xAE
-	{1, &oid_null_function},										//0xAF
-	{1, &oid_null_function},										//0xB0
-	{1, &oid_null_function},										//0xB1
-	{1, &oid_null_function},										//0xB2
-	{1, &oid_null_function},										//0xB3
-	{1, &oid_rt_get_key_mismatch_hdl},							//0xB4
-	{1, &oid_null_function},										//0xB5
-	{1, &oid_null_function},										//0xB6
-	{1, &oid_null_function},										//0xB7
-	{1, &oid_null_function},										//0xB8
-	{1, &oid_null_function},										//0xB9
-	{1, &oid_null_function},										//0xBA
-	{1, &oid_rt_supported_wireless_mode_hdl},					//0xBB
-	{1, &oid_rt_get_channel_list_hdl},							//0xBC
-	{1, &oid_rt_get_scan_in_progress_hdl},						//0xBD
-	{1, &oid_null_function},										//0xBE
-	{1, &oid_null_function},										//0xBF
-	{1, &oid_null_function},										//0xC0
-	{1, &oid_rt_forced_data_rate_hdl},							//0xC1
-	{1, &oid_rt_wireless_mode_for_scan_list_hdl},					//0xC2
-	{1, &oid_rt_get_bss_wireless_mode_hdl},						//0xC3
-	{1, &oid_rt_scan_with_magic_packet_hdl},					//0xC4
-	{1, &oid_null_function},										//0xC5
-	{1, &oid_null_function},										//0xC6
-	{1, &oid_null_function},										//0xC7
-	{1, &oid_null_function},										//0xC8
-	{1, &oid_null_function},										//0xC9
-	{1, &oid_null_function},										//0xCA
-	{1, &oid_null_function},										//0xCB
-	{1, &oid_null_function},										//0xCC
-	{1, &oid_null_function},										//0xCD
-	{1, &oid_null_function},										//0xCE
-	{1, &oid_null_function},										//0xCF
-
-};
-
-struct oid_obj_priv oid_rtl_seg_01_03[] =
-{
-	{1, &oid_rt_ap_get_associated_station_list_hdl},				//0x00
-	{1, &oid_null_function},										//0x01
-	{1, &oid_rt_ap_switch_into_ap_mode_hdl},					//0x02
-	{1, &oid_null_function},										//0x03
-	{1, &oid_rt_ap_supported_hdl},								//0x04
-	{1, &oid_rt_ap_set_passphrase_hdl},							//0x05
-
-};
-
-struct oid_obj_priv oid_rtl_seg_01_11[] =
-{
-	{1, &oid_null_function},					//0xC0	OID_RT_PRO_RX_FILTER
-	{1, &oid_null_function},					//0xC1	OID_CE_USB_WRITE_REGISTRY
-	{1, &oid_null_function},					//0xC2	OID_CE_USB_READ_REGISTRY
-	{1, &oid_null_function},					//0xC3	OID_RT_PRO_SET_INITIAL_GAIN
-	{1, &oid_null_function},					//0xC4	OID_RT_PRO_SET_BB_RF_STANDBY_MODE
-	{1, &oid_null_function},					//0xC5	OID_RT_PRO_SET_BB_RF_SHUTDOWN_MODE
-	{1, &oid_null_function},					//0xC6	OID_RT_PRO_SET_TX_CHARGE_PUMP
-	{1, &oid_null_function},					//0xC7	OID_RT_PRO_SET_RX_CHARGE_PUMP
-	{1, &oid_rt_pro_rf_write_registry_hdl},	//0xC8
-	{1, &oid_rt_pro_rf_read_registry_hdl},	//0xC9
-	{1, &oid_null_function}					//0xCA	OID_RT_PRO_QUERY_RF_TYPE
-
-};
-
-struct oid_obj_priv oid_rtl_seg_03_00[] =
-{
-	{1, &oid_null_function},										//0x00
-	{1, &oid_rt_get_connect_state_hdl},							//0x01
-	{1, &oid_null_function},										//0x02
-	{1, &oid_null_function},										//0x03
-	{1, &oid_rt_set_default_key_id_hdl},							//0x04
-
-
-};
-
-
-//**************  oid_rtl_seg_01_01 section start **************
-
-NDIS_STATUS oid_rt_pro_set_fw_dig_state_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-#if 0
-	PADAPTER		Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	_irqL			oldirql;
-
-	_func_enter_;
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	_irqlevel_changed_(&oldirql,LOWER);
-	if(poid_par_priv->information_buf_len >= sizeof(struct setdig_parm))
-	{
-		//DEBUG_ERR(("===> oid_rt_pro_set_fw_dig_state_hdl. type:0x%02x.\n",*((unsigned char*)poid_par_priv->information_buf )));
-		if(!rtw_setfwdig_cmd(Adapter,*((unsigned char*)poid_par_priv->information_buf )))
-		{
-			status = NDIS_STATUS_NOT_ACCEPTED;
-		}
-
-	}
-	else{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-	}
-	_irqlevel_changed_(&oldirql,RAISE);
-	_func_exit_;
-#endif
-	return status;
-}
-//-----------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_fw_ra_state_hdl(struct oid_par_priv* poid_par_priv)
-{
-
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-#if 0
-	PADAPTER		Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	_irqL			oldirql;
-
-	_func_enter_;
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-
-	_irqlevel_changed_(&oldirql,LOWER);
-
-	if(poid_par_priv->information_buf_len >= sizeof(struct setra_parm))
-	{
-		//DEBUG_ERR(("===> oid_rt_pro_set_fw_ra_state_hdl. type:0x%02x.\n",*((unsigned char*)poid_par_priv->information_buf )));
-		if(!rtw_setfwra_cmd(Adapter,*((unsigned char*)poid_par_priv->information_buf )))
-		{
-			status = NDIS_STATUS_NOT_ACCEPTED;
-		}
-
-	}
-	else{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-	}
-	_irqlevel_changed_(&oldirql,RAISE);
-	_func_exit_;
-#endif
-	return status;
-}
-//-----------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_signal_quality_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	//DEBUG_ERR(("<**********************oid_rt_get_signal_quality_hdl \n"));
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-#if 0
-		if(pMgntInfo->mAssoc || pMgntInfo->mIbss)
-		{
-			ulInfo = pAdapter->RxStats.SignalQuality;
-			*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		}
-		else
-		{
-			ulInfo = 0xffffffff; // It stands for -1 in 4-byte integer.
-		}
-		break;
-#endif
-
-	return status;
-}
-
-//------------------------------------------------------------------------------
-
-NDIS_STATUS oid_rt_get_small_packet_crc_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if(poid_par_priv->information_buf_len >=  sizeof(ULONG) )
-	{
-		*(ULONG *)poid_par_priv->information_buf = padapter->recvpriv.rx_smallpacket_crcerr;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_middle_packet_crc_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if(poid_par_priv->information_buf_len >=  sizeof(ULONG) )
-	{
-		*(ULONG *)poid_par_priv->information_buf = padapter->recvpriv.rx_middlepacket_crcerr;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_large_packet_crc_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if(poid_par_priv->information_buf_len >=  sizeof(ULONG) )
-	{
-		*(ULONG *)poid_par_priv->information_buf = padapter->recvpriv.rx_largepacket_crcerr;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-
-	return status;
-}
-
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_tx_retry_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_rx_retry_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_rx_total_packet_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len >=  sizeof(ULONG) )
-	{
-		*(u64 *)poid_par_priv->information_buf = padapter->recvpriv.rx_pkts + padapter->recvpriv.rx_drop;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_tx_beacon_ok_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_tx_beacon_err_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_rx_icv_err_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len>= sizeof(u32))
-	{
-		//_rtw_memcpy(*(uint *)poid_par_priv->information_buf,padapter->recvpriv.rx_icv_err,sizeof(u32));
-		*(uint *)poid_par_priv->information_buf = padapter->recvpriv.rx_icv_err;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH ;
-	}
-
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_set_encryption_algorithm_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_preamble_mode_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	ULONG			preamblemode = 0 ;
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len>= sizeof(ULONG))
-	{
-		if(padapter->registrypriv.preamble == PREAMBLE_LONG)
-			preamblemode = 0;
-		else if (padapter->registrypriv.preamble == PREAMBLE_AUTO)
-			preamblemode = 1;
-		else if (padapter->registrypriv.preamble == PREAMBLE_SHORT)
-			preamblemode = 2;
-
-
-		*(ULONG *)poid_par_priv->information_buf = preamblemode ;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH ;
-	}
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_ap_ip_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_get_channelplan_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	struct eeprom_priv*	peeprompriv = &padapter->eeprompriv;
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	*(u16 *)poid_par_priv->information_buf = peeprompriv->channel_plan ;
-
-	return status;
-}
-NDIS_STATUS oid_rt_set_channelplan_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	struct eeprom_priv*	peeprompriv = &padapter->eeprompriv;
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	peeprompriv->channel_plan = *(u16 *)poid_par_priv->information_buf ;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_set_preamble_mode_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	ULONG			preamblemode = 0;
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if(poid_par_priv->information_buf_len>= sizeof(ULONG))
-	{
-		preamblemode = *(ULONG *)poid_par_priv->information_buf ;
-		if( preamblemode == 0)
-			padapter->registrypriv.preamble = PREAMBLE_LONG;
-		else if (preamblemode==1 )
-			padapter->registrypriv.preamble = PREAMBLE_AUTO;
-		else if ( preamblemode==2 )
-			padapter->registrypriv.preamble = PREAMBLE_SHORT;
-
-		*(ULONG *)poid_par_priv->information_buf = preamblemode ;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH ;
-	}
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_set_bcn_intvl_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_dedicate_probe_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_total_tx_bytes_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len>= sizeof(ULONG))
-	{
-		*(u64 *)poid_par_priv->information_buf = padapter->xmitpriv.tx_bytes;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH ;
-	}
-
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_total_rx_bytes_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len>= sizeof(ULONG))
-	{
-		//_rtw_memcpy(*(uint *)poid_par_priv->information_buf,padapter->recvpriv.rx_icv_err,sizeof(u32));
-		*(u64 *)poid_par_priv->information_buf = padapter->recvpriv.rx_bytes;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else
-	{
-		status = NDIS_STATUS_INVALID_LENGTH ;
-	}
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_current_tx_power_level_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_enc_key_mismatch_count_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_enc_key_match_count_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_channel_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	struct	mlme_priv	*pmlmepriv = &padapter->mlmepriv;
-	NDIS_802_11_CONFIGURATION		*pnic_Config;
-
-	ULONG   channelnum;
-
-	_func_enter_;
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if ( (check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE) ||
-		(check_fwstate(pmlmepriv, WIFI_ADHOC_MASTER_STATE) == _TRUE))
-		pnic_Config = &pmlmepriv->cur_network.network.Configuration;
-	else
-		pnic_Config = &padapter->registrypriv.dev_network.Configuration;
-
-	channelnum = pnic_Config->DSConfig;
-	*(ULONG *)poid_par_priv->information_buf = channelnum;
-
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	_func_exit_;
-
-
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_hardware_radio_off_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_key_mismatch_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_supported_wireless_mode_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-	ULONG			ulInfo = 0 ;
-	//DEBUG_ERR(("<**********************oid_rt_supported_wireless_mode_hdl \n"));
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	if(poid_par_priv->information_buf_len >= sizeof(ULONG)){
-		ulInfo |= 0x0100; //WIRELESS_MODE_B
-		ulInfo |= 0x0200; //WIRELESS_MODE_G
-		ulInfo |= 0x0400; //WIRELESS_MODE_A
-
-		*(ULONG *) poid_par_priv->information_buf = ulInfo;
-		//DEBUG_ERR(("<===oid_rt_supported_wireless_mode %x\n",ulInfo));
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	}
-	else{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_channel_list_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_scan_in_progress_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-
-
-NDIS_STATUS oid_rt_forced_data_rate_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-NDIS_STATUS oid_rt_wireless_mode_for_scan_list_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-NDIS_STATUS oid_rt_get_bss_wireless_mode_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_scan_with_magic_packet_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-//**************  oid_rtl_seg_01_01 section end **************
-
-//**************  oid_rtl_seg_01_03 section start **************
-NDIS_STATUS oid_rt_ap_get_associated_station_list_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-NDIS_STATUS oid_rt_ap_switch_into_ap_mode_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-NDIS_STATUS oid_rt_ap_supported_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	return status;
-}
-NDIS_STATUS oid_rt_ap_set_passphrase_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-
-//**************  oid_rtl_seg_01_03 section end **************
-
-//****************  oid_rtl_seg_01_11   section start ****************
-NDIS_STATUS oid_rt_pro_rf_write_registry_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	_irqL			oldirql;
-	_func_enter_;
-	//DEBUG_ERR(("<**********************oid_rt_pro_rf_write_registry_hdl \n"));
-	if(poid_par_priv->type_of_oid != SET_OID) //QUERY_OID
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	_irqlevel_changed_(&oldirql,LOWER);
-	if(poid_par_priv->information_buf_len== (sizeof(unsigned long)*3))
-	{
-		//RegOffsetValue	- The offset of RF register to write.
-		//RegDataWidth	- The data width of RF register to write.
-		//RegDataValue	- The value to write.
-		//RegOffsetValue = *((unsigned long*)InformationBuffer);
-		//RegDataWidth = *((unsigned long*)InformationBuffer+1);
-		//RegDataValue =  *((unsigned long*)InformationBuffer+2);
-		if(!rtw_setrfreg_cmd(Adapter,
-						*(unsigned char*)poid_par_priv->information_buf,
-						(unsigned long)(*((unsigned long*)poid_par_priv->information_buf+2))))
-		{
-			status = NDIS_STATUS_NOT_ACCEPTED;
-		}
-
-	}
-	else{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-	_irqlevel_changed_(&oldirql,RAISE);
-	_func_exit_;
-
-	return status;
-}
-
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_rf_read_registry_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-#if 0
-	PADAPTER		Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	_irqL	oldirql;
-	_func_enter_;
-
-	//DEBUG_ERR(("<**********************oid_rt_pro_rf_read_registry_hdl \n"));
-	if(poid_par_priv->type_of_oid != SET_OID) //QUERY_OID
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	_irqlevel_changed_(&oldirql,LOWER);
-	if(poid_par_priv->information_buf_len== (sizeof(unsigned long)*3))
-	{
-		if(Adapter->mppriv.act_in_progress == _TRUE)
-		{
-			status = NDIS_STATUS_NOT_ACCEPTED;
-		}
-		else
-		{
-			//init workparam
-			Adapter->mppriv.act_in_progress = _TRUE;
-			Adapter->mppriv.workparam.bcompleted= _FALSE;
-			Adapter->mppriv.workparam.act_type = MPT_READ_RF;
-			Adapter->mppriv.workparam.io_offset = *(unsigned long*)poid_par_priv->information_buf;
-			Adapter->mppriv.workparam.io_value = 0xcccccccc;
-
-			//RegOffsetValue	- The offset of RF register to read.
-			//RegDataWidth	- The data width of RF register to read.
-			//RegDataValue	- The value to read.
-			//RegOffsetValue = *((unsigned long*)InformationBuffer);
-			//RegDataWidth = *((unsigned long*)InformationBuffer+1);
-			//RegDataValue =  *((unsigned long*)InformationBuffer+2);
-			if(!rtw_getrfreg_cmd(Adapter,
-							*(unsigned char*)poid_par_priv->information_buf,
-							(unsigned char*)&Adapter->mppriv.workparam.io_value))
-			{
-				status = NDIS_STATUS_NOT_ACCEPTED;
-			}
-		}
-
-
-	}
-	else	{
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-	_irqlevel_changed_(&oldirql,RAISE);
-	_func_exit_;
-#endif
-	return status;
-}
-
-//****************  oid_rtl_seg_01_11   section end****************
-
-
-//**************  oid_rtl_seg_03_00 section start **************
-enum _CONNECT_STATE_{
-	CHECKINGSTATUS,
-	ASSOCIATED,
-	ADHOCMODE,
-	NOTASSOCIATED
-};
-
-NDIS_STATUS oid_rt_get_connect_state_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	struct mlme_priv	*pmlmepriv = &(padapter->mlmepriv);
-
-	ULONG ulInfo;
-
-	if(poid_par_priv->type_of_oid != QUERY_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	// nStatus==0	CheckingStatus
-	// nStatus==1	Associated
-	// nStatus==2	AdHocMode
-	// nStatus==3	NotAssociated
-
-	if(check_fwstate(pmlmepriv, _FW_UNDER_LINKING) == _TRUE)
-		ulInfo = CHECKINGSTATUS;
-	else if(check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE)
-		ulInfo = ASSOCIATED;
-	else if(check_fwstate(pmlmepriv, WIFI_ADHOC_STATE)== _TRUE)
-		ulInfo = ADHOCMODE;
-	else
-		ulInfo = NOTASSOCIATED ;
-
-	*(ULONG *)poid_par_priv->information_buf = ulInfo;
-	*poid_par_priv->bytes_rw =  poid_par_priv->information_buf_len;
-
-#if 0
-	// Rearrange the order to let the UI still shows connection when scan is in progress
-	RT_TRACE(COMP_OID_QUERY, DBG_LOUD, ("===> Query OID_RT_GET_CONNECT_STATE.\n"));
-	if(pMgntInfo->mAssoc)
-		ulInfo = 1;
-	else if(pMgntInfo->mIbss)
-		ulInfo = 2;
-	else if(pMgntInfo->bScanInProgress)
-		ulInfo = 0;
-	else
-		ulInfo = 3;
-	ulInfoLen = sizeof(ULONG);
-	RT_TRACE(COMP_OID_QUERY, DBG_LOUD, ("<=== Query OID_RT_GET_CONNECT_STATE: %d\n", ulInfo));
-#endif
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_set_default_key_id_hdl(struct oid_par_priv* poid_par_priv)
-{
-	NDIS_STATUS		status = NDIS_STATUS_SUCCESS;
-	PADAPTER		padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	if(poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	return status;
-}
-//**************  oid_rtl_seg_03_00 section end **************
--- a/drivers/staging/rtl8192du/core/rtw_mlme.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme.c
@@ -769,42 +769,6 @@ _func_enter_;
 			, dst->Ssid.Ssid, MAC_ARG(dst->MacAddress), dst->PhyInfo.SignalStrength, dst->PhyInfo.SignalQuality, dst->Rssi);
 	}
 	#endif
-
-#if 0 // old codes, may be useful one day...
-//	DBG_871X("update_network: rssi=0x%lx dst->Rssi=%d ,dst->Rssi=0x%lx , src->Rssi=0x%lx",(dst->Rssi+src->Rssi)/2,dst->Rssi,dst->Rssi,src->Rssi);
-	if (check_fwstate(&padapter->mlmepriv, _FW_LINKED) && is_same_network(&(padapter->mlmepriv.cur_network.network), src))
-	{
-
-		//DBG_871X("b:ssid=%s update_network: src->rssi=0x%d padapter->recvpriv.ui_rssi=%d\n",src->Ssid.Ssid,src->Rssi,padapter->recvpriv.signal);
-		if(padapter->recvpriv.signal_qual_data.total_num++ >= PHY_LINKQUALITY_SLID_WIN_MAX)
-	        {
-	              padapter->recvpriv.signal_qual_data.total_num = PHY_LINKQUALITY_SLID_WIN_MAX;
-	              last_evm = padapter->recvpriv.signal_qual_data.elements[padapter->recvpriv.signal_qual_data.index];
-	              padapter->recvpriv.signal_qual_data.total_val -= last_evm;
-	        }
-		padapter->recvpriv.signal_qual_data.total_val += query_rx_pwr_percentage(src->Rssi);
-
-		padapter->recvpriv.signal_qual_data.elements[padapter->recvpriv.signal_qual_data.index++] = query_rx_pwr_percentage(src->Rssi);
-                if(padapter->recvpriv.signal_qual_data.index >= PHY_LINKQUALITY_SLID_WIN_MAX)
-                       padapter->recvpriv.signal_qual_data.index = 0;
-
-		//DBG_871X("Total SQ=%d  pattrib->signal_qual= %d\n", padapter->recvpriv.signal_qual_data.total_val, src->Rssi);
-
-		// <1> Showed on UI for user,in percentage.
-		tmpVal = padapter->recvpriv.signal_qual_data.total_val/padapter->recvpriv.signal_qual_data.total_num;
-                padapter->recvpriv.signal=(u8)tmpVal;//Link quality
-
-		src->Rssi= translate_percentage_to_dbm(padapter->recvpriv.signal) ;
-	}
-	else{
-//	DBG_871X("ELSE:ssid=%s update_network: src->rssi=0x%d dst->rssi=%d\n",src->Ssid.Ssid,src->Rssi,dst->Rssi);
-		src->Rssi=(src->Rssi +dst->Rssi)/2;//dBM
-	}
-
-//	DBG_871X("a:update_network: src->rssi=0x%d padapter->recvpriv.ui_rssi=%d\n",src->Rssi,padapter->recvpriv.signal);
-
-#endif
-
 _func_exit_;
 }
 
@@ -814,13 +778,6 @@ static void update_current_network(_adap
 
 _func_enter_;
 
-#ifdef PLATFORM_OS_XP
-	if ((unsigned long)(&(pmlmepriv->cur_network.network)) < 0x7ffffff)
-	{
-		KeBugCheckEx(0x87111c1c, (ULONG_PTR)(&(pmlmepriv->cur_network.network)), 0, 0,0);
-	}
-#endif
-
 	if ( (check_fwstate(pmlmepriv, _FW_LINKED)== _TRUE) && (is_same_network(&(pmlmepriv->cur_network.network), pnetwork)))
 	{
 		//RT_TRACE(_module_rtl871x_mlme_c_,_drv_err_,"Same Network\n");
@@ -2264,13 +2221,6 @@ void _rtw_join_timeout_handler (_adapter
 	int do_join_r;
 #endif //CONFIG_LAYER2_ROAMING
 
-#if 0
-	if (adapter->bDriverStopped == _TRUE){
-		_rtw_up_sema(&pmlmepriv->assoc_terminate);
-		return;
-	}
-#endif
-
 _func_enter_;
 #ifdef PLATFORM_FREEBSD
 		rtw_mtx_lock(NULL);
@@ -2607,46 +2557,6 @@ static int rtw_check_join_candidate(stru
 		updated = _TRUE;
 	}
 
-#if 0
-	if(pmlmepriv->assoc_by_bssid==_TRUE) { // associate with bssid
-		if(	(*candidate == NULL ||(*candidate)->network.Rssi<competitor->network.Rssi )
-			&& _rtw_memcmp(competitor->network.MacAddress, pmlmepriv->assoc_bssid, ETH_ALEN)==_TRUE
-		) {
-			*candidate = competitor;
-			updated = _TRUE;
-		}
-	} else  if (pmlmepriv->assoc_ssid.SsidLength == 0 ) { // associate with ssid, but ssidlength is 0
-		if(	(*candidate == NULL ||(*candidate)->network.Rssi<competitor->network.Rssi ) ) {
-			*candidate = competitor;
-			updated = _TRUE;
-		}
-	} else
-#ifdef  CONFIG_LAYER2_ROAMING
-	if(rtw_to_roaming(adapter)) { // roaming
-		if(	(*candidate == NULL ||(*candidate)->network.Rssi<competitor->network.Rssi )
-			&& is_same_ess(&competitor->network, &pmlmepriv->cur_network.network)
-			//&&(!is_same_network(&competitor->network, &pmlmepriv->cur_network.network))
-			&& rtw_get_passing_time_ms((u32)competitor->last_scanned) < RTW_SCAN_RESULT_EXPIRE
-			&& rtw_is_desired_network(adapter, competitor)
-		) {
-			*candidate = competitor;
-			updated = _TRUE;
-		}
-
-	} else
-#endif
-	{ // associate with ssid
-		if(	(*candidate == NULL ||(*candidate)->network.Rssi<competitor->network.Rssi )
-			&& (competitor->network.Ssid.SsidLength==pmlmepriv->assoc_ssid.SsidLength)
-			&&((_rtw_memcmp(competitor->network.Ssid.Ssid, pmlmepriv->assoc_ssid.Ssid, pmlmepriv->assoc_ssid.SsidLength)) == _TRUE)
-			&& rtw_is_desired_network(adapter, competitor)
-		) {
-			*candidate = competitor;
-			updated = _TRUE;
-		}
-	}
-#endif
-
 	if(updated){
 		DBG_871X("[by_bssid:%u][assoc_ssid:%s]"
 			#ifdef  CONFIG_LAYER2_ROAMING
@@ -2709,12 +2619,7 @@ _func_enter_;
 
 		pmlmepriv->pscanned = get_next(pmlmepriv->pscanned);
 
-		#if 0
-		DBG_871X("MacAddress:"MAC_FMT" ssid:%s\n", MAC_ARG(pnetwork->network.MacAddress), pnetwork->network.Ssid.Ssid);
-		#endif
-
 		rtw_check_join_candidate(pmlmepriv, &candidate, pnetwork);
-
 	}
 
 	if(candidate == NULL) {
@@ -2733,23 +2638,9 @@ _func_enter_;
 	{
 		DBG_871X("%s: _FW_LINKED while ask_for_joinbss!!!\n", __FUNCTION__);
 
-		#if 0 // for WPA/WPA2 authentication, wpa_supplicant will expect authentication from AP, it is needed to reconnect AP...
-		if(is_same_network(&pmlmepriv->cur_network.network, &candidate->network))
-		{
-			DBG_871X("%s: _FW_LINKED and is same network, it needn't join again\n", __FUNCTION__);
-
-			rtw_indicate_connect(adapter);//rtw_indicate_connect again
-
-			ret = 2;
-			goto exit;
-		}
-		else
-		#endif
-		{
-			rtw_disassoc_cmd(adapter, 0, _TRUE);
-			rtw_indicate_disconnect(adapter);
-			rtw_free_assoc_resources(adapter, 0);
-		}
+		rtw_disassoc_cmd(adapter, 0, _TRUE);
+		rtw_indicate_disconnect(adapter);
+		rtw_free_assoc_resources(adapter, 0);
 	}
 
 	#ifdef CONFIG_ANTENNA_DIVERSITY
@@ -2813,31 +2704,14 @@ _func_enter_;
 
 		pmlmepriv->pscanned = get_next(pmlmepriv->pscanned);
 
-		#if 0
-		DBG_871X("MacAddress:"MAC_FMT" ssid:%s\n", MAC_ARG(pnetwork->network.MacAddress), pnetwork->network.Ssid.Ssid);
-		#endif
-
-		if(pmlmepriv->assoc_by_bssid==_TRUE)
-		{
-			if(_rtw_memcmp(pnetwork->network.MacAddress, pmlmepriv->assoc_bssid, ETH_ALEN)==_TRUE)
-			{
-				//remove the condition @ 20081125
-				//if((pmlmepriv->cur_network.network.InfrastructureMode==Ndis802_11AutoUnknown)||
-				//	pmlmepriv->cur_network.network.InfrastructureMode == pnetwork->network.InfrastructureMode)
-				//		goto ask_for_joinbss;
-
-				if (check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE)
-				{
-					if(is_same_network(&pmlmepriv->cur_network.network, &pnetwork->network))
-					{
-						//DBG_871X("select_and_join(1): _FW_LINKED and is same network, it needn't join again\n");
-
+		if(pmlmepriv->assoc_by_bssid==_TRUE) {
+			if(_rtw_memcmp(pnetwork->network.MacAddress, pmlmepriv->assoc_bssid, ETH_ALEN)==_TRUE) {
+				if (check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE) {
+					if(is_same_network(&pmlmepriv->cur_network.network, &pnetwork->network)) {
 						rtw_indicate_connect(adapter);//rtw_indicate_connect again
 						_exit_critical_bh(&(pmlmepriv->scanned_queue.lock), &irqL);
 						return 2;
-					}
-					else
-					{
+					} else {
 						rtw_disassoc_cmd(adapter, 0, _TRUE);
 						rtw_indicate_disconnect(adapter);
 						rtw_free_assoc_resources(adapter, 0);
@@ -2845,9 +2719,7 @@ _func_enter_;
 						goto ask_for_joinbss;
 
 					}
-				}
-				else
-				{
+				} else {
 					_exit_critical_bh(&(pmlmepriv->scanned_queue.lock), &irqL);
 					goto ask_for_joinbss;
 				}
@@ -2888,44 +2760,19 @@ _func_enter_;
 				(2==pnetwork->network.PhyInfo.Optimum_antenna)?"A":"B",
 				(2==CurrentAntenna)?"A":"B");
 #endif
-			//remove the condition @ 20081125
-			//if((pmlmepriv->cur_network.network.InfrastructureMode==Ndis802_11AutoUnknown)||
-			//	pmlmepriv->cur_network.network.InfrastructureMode == pnetwork->network.InfrastructureMode)
-			//{
-			//	_rtw_memcpy(pmlmepriv->assoc_bssid, pnetwork->network.MacAddress, ETH_ALEN);
-			//	goto ask_for_joinbss;
-			//}
 
 			if(pmlmepriv->assoc_by_rssi==_TRUE)//if the ssid is the same, select the bss which has the max rssi
 			{
 				if( NULL==pnetwork_max_rssi|| pnetwork->network.Rssi > pnetwork_max_rssi->network.Rssi)
 						pnetwork_max_rssi = pnetwork;
-			}
-			else if(rtw_is_desired_network(adapter, pnetwork) == _TRUE)
-			{
+			} else if(rtw_is_desired_network(adapter, pnetwork) == _TRUE) {
 				if (check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE)
 				{
-#if 0
-					if(is_same_network(&pmlmepriv->cur_network.network, &pnetwork->network))
-					{
-						DBG_871X("select_and_join(2): _FW_LINKED and is same network, it needn't join again\n");
-
-						rtw_indicate_connect(adapter);//rtw_indicate_connect again
-
-						return 2;
-					}
-					else
-#endif
-					{
-						rtw_disassoc_cmd(adapter, 0, _TRUE);
-						//rtw_indicate_disconnect(adapter);//
-						rtw_free_assoc_resources(adapter, 0);
-						_exit_critical_bh(&(pmlmepriv->scanned_queue.lock), &irqL);
-						goto ask_for_joinbss;
-					}
-				}
-				else
-				{
+					rtw_disassoc_cmd(adapter, 0, _TRUE);
+					rtw_free_assoc_resources(adapter, 0);
+					_exit_critical_bh(&(pmlmepriv->scanned_queue.lock), &irqL);
+					goto ask_for_joinbss;
+				} else {
 					_exit_critical_bh(&(pmlmepriv->scanned_queue.lock), &irqL);
 					goto ask_for_joinbss;
 				}
@@ -3325,16 +3172,6 @@ void rtw_update_registrypriv_dev_network
 
 _func_enter_;
 
-#if 0
-	pxmitpriv->vcs_setting = pregistrypriv->vrtl_carrier_sense;
-	pxmitpriv->vcs = pregistrypriv->vcs_type;
-	pxmitpriv->vcs_type = pregistrypriv->vcs_type;
-	//pxmitpriv->rts_thresh = pregistrypriv->rts_thresh;
-	pxmitpriv->frag_len = pregistrypriv->frag_thresh;
-
-	adapter->qospriv.qos_option = pregistrypriv->wmm_enable;
-#endif
-
 	pdev_network->Privacy = (psecuritypriv->dot11PrivacyAlgrthm > 0 ? 1 : 0) ; // adhoc no 802.1x
 
 	pdev_network->Rssi = 0;
@@ -3692,50 +3529,6 @@ void rtw_update_ht_cap(_adapter *padapte
 	// Config current HT Protection mode.
 	//
 	pmlmeinfo->HT_protection = pmlmeinfo->HT_info.infos[1] & 0x3;
-
-
-
-#if 0 //move to rtw_update_sta_info_client()
-	//for A-MPDU Rx reordering buffer control for bmc_sta & sta_info
-	//if A-MPDU Rx is enabled, reseting  rx_ordering_ctrl wstart_b(indicate_seq) to default value=0xffff
-	//todo: check if AP can send A-MPDU packets
-	bmc_sta = rtw_get_bcmc_stainfo(padapter);
-	if(bmc_sta)
-	{
-		for(i=0; i < 16 ; i++)
-		{
-			//preorder_ctrl = &precvpriv->recvreorder_ctrl[i];
-			preorder_ctrl = &bmc_sta->recvreorder_ctrl[i];
-			preorder_ctrl->enable = _FALSE;
-			preorder_ctrl->indicate_seq = 0xffff;
-			#ifdef DBG_RX_SEQ
-			DBG_871X("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
-				preorder_ctrl->indicate_seq);
-			#endif
-			preorder_ctrl->wend_b= 0xffff;
-			preorder_ctrl->wsize_b = 64;//max_ampdu_sz;//ex. 32(kbytes) -> wsize_b=32
-		}
-	}
-
-	psta = rtw_get_stainfo(&padapter->stapriv, pcur_network->network.MacAddress);
-	if(psta)
-	{
-		for(i=0; i < 16 ; i++)
-		{
-			//preorder_ctrl = &precvpriv->recvreorder_ctrl[i];
-			preorder_ctrl = &psta->recvreorder_ctrl[i];
-			preorder_ctrl->enable = _FALSE;
-			preorder_ctrl->indicate_seq = 0xffff;
-			#ifdef DBG_RX_SEQ
-			DBG_871X("DBG_RX_SEQ %s:%d indicate_seq:%u \n", __FUNCTION__, __LINE__,
-				preorder_ctrl->indicate_seq);
-			#endif
-			preorder_ctrl->wend_b= 0xffff;
-			preorder_ctrl->wsize_b = 64;//max_ampdu_sz;//ex. 32(kbytes) -> wsize_b=32
-		}
-	}
-#endif
-
 }
 
 void rtw_issue_addbareq_cmd(_adapter *padapter, struct xmit_frame *pxmitframe)
--- a/drivers/staging/rtl8192du/core/rtw_mp.c
+++ /dev/null
@@ -1,1323 +0,0 @@
-/******************************************************************************
- *
- * Copyright(c) 2007 - 2011 Realtek Corporation. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms of version 2 of the GNU General Public License as
- * published by the Free Software Foundation.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
- * more details.
- *
- * You should have received a copy of the GNU General Public License along with
- * this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA
- *
- *
- ******************************************************************************/
-#define _RTW_MP_C_
-
-#include <drv_types.h>
-
-#ifdef PLATFORM_FREEBSD
-#include <sys/unistd.h>		/* for RFHIGHPID */
-#endif
-
-#ifdef CONFIG_RTL8712
-#include <rtw_mp_phy_regdef.h>
-#endif
-#ifdef CONFIG_RTL8192C
-#include <rtl8192c_hal.h>
-#endif
-#ifdef CONFIG_RTL8192D
-#include <rtl8192d_hal.h>
-#endif
-#ifdef CONFIG_RTL8723A
-#include <rtl8723a_hal.h>
-#endif
-
-
-#ifdef CONFIG_MP_INCLUDED
-
-u32 read_macreg(_adapter *padapter, u32 addr, u32 sz)
-{
-	u32 val = 0;
-
-	switch(sz)
-	{
-		case 1:
-			val = rtw_read8(padapter, addr);
-			break;
-		case 2:
-			val = rtw_read16(padapter, addr);
-			break;
-		case 4:
-			val = rtw_read32(padapter, addr);
-			break;
-		default:
-			val = 0xffffffff;
-			break;
-	}
-
-	return val;
-
-}
-
-void write_macreg(_adapter *padapter, u32 addr, u32 val, u32 sz)
-{
-	switch(sz)
-	{
-		case 1:
-			rtw_write8(padapter, addr, (u8)val);
-			break;
-		case 2:
-			rtw_write16(padapter, addr, (u16)val);
-			break;
-		case 4:
-			rtw_write32(padapter, addr, val);
-			break;
-		default:
-			break;
-	}
-
-}
-
-u32 read_bbreg(_adapter *padapter, u32 addr, u32 bitmask)
-{
-	return rtw_hal_read_bbreg(padapter, addr, bitmask);
-}
-
-void write_bbreg(_adapter *padapter, u32 addr, u32 bitmask, u32 val)
-{
-	rtw_hal_write_bbreg(padapter, addr, bitmask, val);
-}
-
-u32 _read_rfreg(PADAPTER padapter, u8 rfpath, u32 addr, u32 bitmask)
-{
-	return rtw_hal_read_rfreg(padapter, (RF_RADIO_PATH_E)rfpath, addr, bitmask);
-}
-
-void _write_rfreg(PADAPTER padapter, u8 rfpath, u32 addr, u32 bitmask, u32 val)
-{
-	rtw_hal_write_rfreg(padapter, (RF_RADIO_PATH_E)rfpath, addr, bitmask, val);
-}
-
-u32 read_rfreg(PADAPTER padapter, u8 rfpath, u32 addr)
-{
-	return _read_rfreg(padapter, (RF_RADIO_PATH_E)rfpath, addr, bRFRegOffsetMask);
-}
-
-void write_rfreg(PADAPTER padapter, u8 rfpath, u32 addr, u32 val)
-{
-	_write_rfreg(padapter, (RF_RADIO_PATH_E)rfpath, addr, bRFRegOffsetMask, val);
-}
-
-static void _init_mp_priv_(struct mp_priv *pmp_priv)
-{
-	WLAN_BSSID_EX *pnetwork;
-
-	_rtw_memset(pmp_priv, 0, sizeof(struct mp_priv));
-
-	pmp_priv->mode = MP_OFF;
-
-	pmp_priv->channel = 1;
-	pmp_priv->bandwidth = HT_CHANNEL_WIDTH_20;
-	pmp_priv->prime_channel_offset = HAL_PRIME_CHNL_OFFSET_DONT_CARE;
-	pmp_priv->rateidx = MPT_RATE_1M;
-	pmp_priv->txpoweridx = 0x2A;
-
-	pmp_priv->antenna_tx = ANTENNA_A;
-	pmp_priv->antenna_rx = ANTENNA_AB;
-
-	pmp_priv->check_mp_pkt = 0;
-
-	pmp_priv->tx_pktcount = 0;
-
-	pmp_priv->rx_pktcount = 0;
-	pmp_priv->rx_crcerrpktcount = 0;
-
-	pmp_priv->network_macaddr[0] = 0x00;
-	pmp_priv->network_macaddr[1] = 0xE0;
-	pmp_priv->network_macaddr[2] = 0x4C;
-	pmp_priv->network_macaddr[3] = 0x87;
-	pmp_priv->network_macaddr[4] = 0x66;
-	pmp_priv->network_macaddr[5] = 0x55;
-
-	pnetwork = &pmp_priv->mp_network.network;
-	_rtw_memcpy(pnetwork->MacAddress, pmp_priv->network_macaddr, ETH_ALEN);
-
-	pnetwork->Ssid.SsidLength = 8;
-	_rtw_memcpy(pnetwork->Ssid.Ssid, "mp_871x", pnetwork->Ssid.SsidLength);
-}
-
-#ifdef PLATFORM_WINDOWS
-/*
-void mp_wi_callback(
-	IN NDIS_WORK_ITEM*	pwk_item,
-	IN PVOID			cntx
-	)
-{
-	_adapter* padapter =(_adapter *)cntx;
-	struct mp_priv *pmppriv=&padapter->mppriv;
-	struct mp_wi_cntx	*pmp_wi_cntx=&pmppriv->wi_cntx;
-
-	// Execute specified action.
-	if(pmp_wi_cntx->curractfunc != NULL)
-	{
-		LARGE_INTEGER	cur_time;
-		ULONGLONG start_time, end_time;
-		NdisGetCurrentSystemTime(&cur_time);	// driver version
-		start_time = cur_time.QuadPart/10; // The return value is in microsecond
-
-		pmp_wi_cntx->curractfunc(padapter);
-
-		NdisGetCurrentSystemTime(&cur_time);	// driver version
-		end_time = cur_time.QuadPart/10; // The return value is in microsecond
-
-		RT_TRACE(_module_mp_, _drv_info_,
-			 ("WorkItemActType: %d, time spent: %I64d us\n",
-			  pmp_wi_cntx->param.act_type, (end_time-start_time)));
-	}
-
-	NdisAcquireSpinLock(&(pmp_wi_cntx->mp_wi_lock));
-	pmp_wi_cntx->bmp_wi_progress= _FALSE;
-	NdisReleaseSpinLock(&(pmp_wi_cntx->mp_wi_lock));
-
-	if (pmp_wi_cntx->bmpdrv_unload)
-	{
-		NdisSetEvent(&(pmp_wi_cntx->mp_wi_evt));
-	}
-
-}
-*/
-
-static int init_mp_priv_by_os(struct mp_priv *pmp_priv)
-{
-	struct mp_wi_cntx *pmp_wi_cntx;
-
-	if (pmp_priv == NULL) return _FAIL;
-
-	pmp_priv->rx_testcnt = 0;
-	pmp_priv->rx_testcnt1 = 0;
-	pmp_priv->rx_testcnt2 = 0;
-
-	pmp_priv->tx_testcnt = 0;
-	pmp_priv->tx_testcnt1 = 0;
-
-	pmp_wi_cntx = &pmp_priv->wi_cntx
-	pmp_wi_cntx->bmpdrv_unload = _FALSE;
-	pmp_wi_cntx->bmp_wi_progress = _FALSE;
-	pmp_wi_cntx->curractfunc = NULL;
-
-	return _SUCCESS;
-}
-#endif
-
-#ifdef PLATFORM_LINUX
-static int init_mp_priv_by_os(struct mp_priv *pmp_priv)
-{
-	int i, res;
-	struct mp_xmit_frame *pmp_xmitframe;
-
-	if (pmp_priv == NULL) return _FAIL;
-
-	_rtw_init_queue(&pmp_priv->free_mp_xmitqueue);
-
-	pmp_priv->pallocated_mp_xmitframe_buf = NULL;
-	pmp_priv->pallocated_mp_xmitframe_buf = rtw_zmalloc(NR_MP_XMITFRAME * sizeof(struct mp_xmit_frame) + 4);
-	if (pmp_priv->pallocated_mp_xmitframe_buf == NULL) {
-		res = _FAIL;
-		goto _exit_init_mp_priv;
-	}
-
-	pmp_priv->pmp_xmtframe_buf = pmp_priv->pallocated_mp_xmitframe_buf + 4 - ((uint) (pmp_priv->pallocated_mp_xmitframe_buf) & 3);
-
-	pmp_xmitframe = (struct mp_xmit_frame*)pmp_priv->pmp_xmtframe_buf;
-
-	for (i = 0; i < NR_MP_XMITFRAME; i++)
-	{
-		_rtw_init_listhead(&pmp_xmitframe->list);
-		rtw_list_insert_tail(&pmp_xmitframe->list, &pmp_priv->free_mp_xmitqueue.queue);
-
-		pmp_xmitframe->pkt = NULL;
-		pmp_xmitframe->frame_tag = MP_FRAMETAG;
-		pmp_xmitframe->padapter = pmp_priv->papdater;
-
-		pmp_xmitframe++;
-	}
-
-	pmp_priv->free_mp_xmitframe_cnt = NR_MP_XMITFRAME;
-
-	res = _SUCCESS;
-
-_exit_init_mp_priv:
-
-	return res;
-}
-#endif
-
-static void mp_init_xmit_attrib(struct mp_tx *pmptx, PADAPTER padapter)
-{
-	struct pkt_attrib *pattrib;
-	struct tx_desc *desc;
-
-	// init xmitframe attribute
-	pattrib = &pmptx->attrib;
-	_rtw_memset(pattrib, 0, sizeof(struct pkt_attrib));
-	desc = &pmptx->desc;
-	_rtw_memset(desc, 0, TXDESC_SIZE);
-
-	pattrib->ether_type = 0x8712;
-	//_rtw_memcpy(pattrib->src, padapter->eeprompriv.mac_addr, ETH_ALEN);
-//	_rtw_memcpy(pattrib->ta, pattrib->src, ETH_ALEN);
-	_rtw_memset(pattrib->dst, 0xFF, ETH_ALEN);
-//	pattrib->pctrl = 0;
-//	pattrib->dhcp_pkt = 0;
-//	pattrib->pktlen = 0;
-	pattrib->ack_policy = 0;
-//	pattrib->pkt_hdrlen = ETH_HLEN;
-	pattrib->hdrlen = WLAN_HDR_A3_LEN;
-	pattrib->subtype = WIFI_DATA;
-	pattrib->priority = 0;
-	pattrib->qsel = pattrib->priority;
-//	do_queue_select(padapter, pattrib);
-	pattrib->nr_frags = 1;
-	pattrib->encrypt = 0;
-	pattrib->bswenc = _FALSE;
-	pattrib->qos_en = _FALSE;
-}
-
-s32 init_mp_priv(PADAPTER padapter)
-{
-	struct mp_priv *pmppriv = &padapter->mppriv;
-
-	_init_mp_priv_(pmppriv);
-	pmppriv->papdater = padapter;
-
-	pmppriv->tx.stop = 1;
-	mp_init_xmit_attrib(&pmppriv->tx, padapter);
-
-	switch (padapter->registrypriv.rf_config) {
-		case RF_1T1R:
-			pmppriv->antenna_tx = ANTENNA_A;
-			pmppriv->antenna_rx = ANTENNA_A;
-			break;
-		case RF_1T2R:
-		default:
-			pmppriv->antenna_tx = ANTENNA_A;
-			pmppriv->antenna_rx = ANTENNA_AB;
-			break;
-		case RF_2T2R:
-		case RF_2T2R_GREEN:
-			pmppriv->antenna_tx = ANTENNA_AB;
-			pmppriv->antenna_rx = ANTENNA_AB;
-			break;
-		case RF_2T4R:
-			pmppriv->antenna_tx = ANTENNA_AB;
-			pmppriv->antenna_rx = ANTENNA_ABCD;
-			break;
-	}
-
-	return _SUCCESS;
-}
-
-void free_mp_priv(struct mp_priv *pmp_priv)
-{
-	if (pmp_priv->pallocated_mp_xmitframe_buf) {
-		rtw_mfree(pmp_priv->pallocated_mp_xmitframe_buf, 0);
-		pmp_priv->pallocated_mp_xmitframe_buf = NULL;
-	}
-	pmp_priv->pmp_xmtframe_buf = NULL;
-}
-
-#ifdef CONFIG_RTL8192C
-#define PHY_IQCalibrate(a,b)	rtl8192c_PHY_IQCalibrate(a,b)
-#define PHY_LCCalibrate(a)	rtl8192c_PHY_LCCalibrate(a)
-#define dm_CheckTXPowerTracking(a)	rtl8192c_dm_CheckTXPowerTracking(a)
-#define PHY_SetRFPathSwitch(a,b)	rtl8192c_PHY_SetRFPathSwitch(a,b)
-#endif
-
-#ifdef CONFIG_RTL8192D
-#define PHY_IQCalibrate(a)	rtl8192d_PHY_IQCalibrate(a)
-#define PHY_LCCalibrate(a)	rtl8192d_PHY_LCCalibrate(a)
-#define dm_CheckTXPowerTracking(a)	rtl8192d_dm_CheckTXPowerTracking(a)
-#define PHY_SetRFPathSwitch(a,b)	rtl8192d_PHY_SetRFPathSwitch(a,b)
-#endif
-
-s32
-MPT_InitializeAdapter(
-	IN	PADAPTER			pAdapter,
-	IN	u8				Channel
-	)
-{
-	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(pAdapter);
-	s32		rtStatus = _SUCCESS;
-	PMPT_CONTEXT	pMptCtx = &pAdapter->mppriv.MptCtx;
-	u32		ledsetting;
-
-	//-------------------------------------------------------------------------
-	// HW Initialization for 8190 MPT.
-	//-------------------------------------------------------------------------
-	//-------------------------------------------------------------------------
-	// SW Initialization for 8190 MP.
-	//-------------------------------------------------------------------------
-	pMptCtx->bMptDrvUnload = _FALSE;
-	pMptCtx->bMassProdTest = _FALSE;
-	pMptCtx->bMptIndexEven = _TRUE;	//default gain index is -6.0db
-
-	/* Init mpt event. */
-#if 0 // for Windows
-	NdisInitializeEvent( &(pMptCtx->MptWorkItemEvent) );
-	NdisAllocateSpinLock( &(pMptCtx->MptWorkItemSpinLock) );
-
-	PlatformInitializeWorkItem(
-		Adapter,
-		&(pMptCtx->MptWorkItem),
-		(RT_WORKITEM_CALL_BACK)MPT_WorkItemCallback,
-		(PVOID)Adapter,
-		"MptWorkItem");
-#endif
-	pMptCtx->bMptWorkItemInProgress = _FALSE;
-	pMptCtx->CurrMptAct = NULL;
-	//-------------------------------------------------------------------------
-
-#if 1
-	// Don't accept any packets
-	rtw_write32(pAdapter, REG_RCR, 0);
-#else
-	// Accept CRC error and destination address
-	pHalData->ReceiveConfig |= (RCR_ACRC32|RCR_AAP);
-	rtw_write32(pAdapter, REG_RCR, pHalData->ReceiveConfig);
-#endif
-
-#if 0
-	// If EEPROM or EFUSE is empty,we assign as RF 2T2R for MP.
-	if (pHalData->AutoloadFailFlag == TRUE)
-	{
-		pHalData->RF_Type = RF_2T2R;
-	}
-#endif
-	ledsetting = rtw_read32(pAdapter, REG_LEDCFG0);
-	rtw_write32(pAdapter, REG_LEDCFG0, ledsetting & ~LED0DIS);
-
-#ifdef CONFIG_RTL8192C
-	PHY_IQCalibrate(pAdapter, _FALSE);
-	dm_CheckTXPowerTracking(pAdapter);	//trigger thermal meter
-	PHY_LCCalibrate(pAdapter);
-#endif
-
-#ifdef CONFIG_RTL8192D
-	PHY_IQCalibrate(pAdapter);
-	dm_CheckTXPowerTracking(pAdapter);	//trigger thermal meter
-	PHY_LCCalibrate(pAdapter);
-#endif
-
-#ifdef CONFIG_PCI_HCI
-	PHY_SetRFPathSwitch(pAdapter, 1/*pHalData->bDefaultAntenna*/);	//Wifi default use Main
-#else
-
-#ifdef CONFIG_RTL8192C
-#if 1
-	if (pHalData->BoardType == BOARD_MINICARD)
-		PHY_SetRFPathSwitch(pAdapter, 1/*pHalData->bDefaultAntenna*/); //default use Main
-#else
-	if(pAdapter->HalFunc.GetInterfaceSelectionHandler(pAdapter) == INTF_SEL2_MINICARD )
-		PHY_SetRFPathSwitch(Adapter, pAdapter->MgntInfo.bDefaultAntenna); //default use Main
-#endif
-
-#endif
-
-#endif
-
-	pMptCtx->backup0xc50 = (u1Byte)PHY_QueryBBReg(pAdapter, rOFDM0_XAAGCCore1, bMaskByte0);
-	pMptCtx->backup0xc58 = (u1Byte)PHY_QueryBBReg(pAdapter, rOFDM0_XBAGCCore1, bMaskByte0);
-	pMptCtx->backup0xc30 = (u1Byte)PHY_QueryBBReg(pAdapter, rOFDM0_RxDetector1, bMaskByte0);
-
-	return	rtStatus;
-}
-
-/*-----------------------------------------------------------------------------
- * Function:	MPT_DeInitAdapter()
- *
- * Overview:	Extra DeInitialization for Mass Production Test.
- *
- * Input:		PADAPTER	pAdapter
- *
- * Output:		NONE
- *
- * Return:		NONE
- *
- * Revised History:
- *	When		Who		Remark
- *	05/08/2007	MHC		Create Version 0.
- *	05/18/2007	MHC		Add normal driver MPHalt code.
- *
- *---------------------------------------------------------------------------*/
-VOID
-MPT_DeInitAdapter(
-	IN	PADAPTER	pAdapter
-	)
-{
-	PMPT_CONTEXT		pMptCtx = &pAdapter->mppriv.MptCtx;
-
-	pMptCtx->bMptDrvUnload = _TRUE;
-#if 0 // for Windows
-	PlatformFreeWorkItem( &(pMptCtx->MptWorkItem) );
-
-	while(pMptCtx->bMptWorkItemInProgress)
-	{
-		if(NdisWaitEvent(&(pMptCtx->MptWorkItemEvent), 50))
-		{
-			break;
-		}
-	}
-	NdisFreeSpinLock( &(pMptCtx->MptWorkItemSpinLock) );
-#endif
-}
-
-static u8 mpt_ProStartTest(PADAPTER padapter)
-{
-	PMPT_CONTEXT pMptCtx = &padapter->mppriv.MptCtx;
-
-	pMptCtx->bMassProdTest = _TRUE;
-	pMptCtx->bStartContTx = _FALSE;
-	pMptCtx->bCckContTx = _FALSE;
-	pMptCtx->bOfdmContTx = _FALSE;
-	pMptCtx->bSingleCarrier = _FALSE;
-	pMptCtx->bCarrierSuppression = _FALSE;
-	pMptCtx->bSingleTone = _FALSE;
-
-	return _SUCCESS;
-}
-
-/*
- * General use
- */
-s32 SetPowerTracking(PADAPTER padapter, u8 enable)
-{
-
-	Hal_SetPowerTracking( padapter, enable );
-	return 0;
-}
-
-void GetPowerTracking(PADAPTER padapter, u8 *enable)
-{
-	Hal_GetPowerTracking( padapter, enable );
-}
-
-static void disable_dm(PADAPTER padapter)
-{
-#ifndef CONFIG_RTL8723A
-	u8 v8;
-#endif
-	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(padapter);
-	struct dm_priv	*pdmpriv = &pHalData->dmpriv;
-
-
-	//3 1. disable firmware dynamic mechanism
-	// disable Power Training, Rate Adaptive
-#ifdef CONFIG_RTL8723A
-	SetBcnCtrlReg(padapter, 0, EN_BCN_FUNCTION);
-#else
-	v8 = rtw_read8(padapter, REG_BCN_CTRL);
-	v8 &= ~EN_BCN_FUNCTION;
-	rtw_write8(padapter, REG_BCN_CTRL, v8);
-#endif
-
-	//3 2. disable driver dynamic mechanism
-	// disable Dynamic Initial Gain
-	// disable High Power
-	// disable Power Tracking
-	Switch_DM_Func(padapter, DYNAMIC_FUNC_DISABLE, _FALSE);
-
-	// enable APK, LCK and IQK but disable power tracking
-	pdmpriv->TxPowerTrackControl = _FALSE;
-	Switch_DM_Func(padapter, DYNAMIC_FUNC_SS, _TRUE);
-}
-
-//This function initializes the DUT to the MP test mode
-s32 mp_start_test(PADAPTER padapter)
-{
-	WLAN_BSSID_EX bssid;
-	struct sta_info *psta;
-	u32 length;
-	u8 val8;
-
-	_irqL irqL;
-	s32 res = _SUCCESS;
-
-	struct mp_priv *pmppriv = &padapter->mppriv;
-	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
-	struct wlan_network *tgt_network = &pmlmepriv->cur_network;
-
-
-	//3 disable dynamic mechanism
-	disable_dm(padapter);
-
-	//3 0. update mp_priv
-#if  defined (CONFIG_RTL8192C)  ||  defined (CONFIG_RTL8192D)
-	if (padapter->registrypriv.rf_config == RF_819X_MAX_TYPE) {
-//		HAL_DATA_TYPE *phal = GET_HAL_DATA(padapter);
-//		switch (phal->rf_type) {
-		switch (GET_RF_TYPE(padapter)) {
-			case RF_1T1R:
-				pmppriv->antenna_tx = ANTENNA_A;
-				pmppriv->antenna_rx = ANTENNA_A;
-				break;
-			case RF_1T2R:
-			default:
-				pmppriv->antenna_tx = ANTENNA_A;
-				pmppriv->antenna_rx = ANTENNA_AB;
-				break;
-			case RF_2T2R:
-			case RF_2T2R_GREEN:
-				pmppriv->antenna_tx = ANTENNA_AB;
-				pmppriv->antenna_rx = ANTENNA_AB;
-				break;
-			case RF_2T4R:
-				pmppriv->antenna_tx = ANTENNA_AB;
-				pmppriv->antenna_rx = ANTENNA_ABCD;
-				break;
-		}
-	}
-#endif
-	mpt_ProStartTest(padapter);
-
-	//3 1. initialize a new WLAN_BSSID_EX
-//	_rtw_memset(&bssid, 0, sizeof(WLAN_BSSID_EX));
-	_rtw_memcpy(bssid.MacAddress, pmppriv->network_macaddr, ETH_ALEN);
-	bssid.Ssid.SsidLength = strlen("mp_pseudo_adhoc");
-	_rtw_memcpy(bssid.Ssid.Ssid, (u8*)"mp_pseudo_adhoc", bssid.Ssid.SsidLength);
-	bssid.InfrastructureMode = Ndis802_11IBSS;
-	bssid.NetworkTypeInUse = Ndis802_11DS;
-	bssid.IELength = 0;
-
-	length = get_WLAN_BSSID_EX_sz(&bssid);
-	if (length % 4)
-		bssid.Length = ((length >> 2) + 1) << 2; //round up to multiple of 4 bytes.
-	else
-		bssid.Length = length;
-
-	_enter_critical_bh(&pmlmepriv->lock, &irqL);
-
-	if (check_fwstate(pmlmepriv, WIFI_MP_STATE) == _TRUE)
-		goto end_of_mp_start_test;
-
-	//init mp_start_test status
-	if (check_fwstate(pmlmepriv, _FW_LINKED) == _TRUE) {
-		rtw_disassoc_cmd(padapter, 500, _TRUE);
-		rtw_indicate_disconnect(padapter);
-		rtw_free_assoc_resources(padapter, 1);
-	}
-	pmppriv->prev_fw_state = get_fwstate(pmlmepriv);
-	pmlmepriv->fw_state = WIFI_MP_STATE;
-#if 0
-	if (pmppriv->mode == _LOOPBOOK_MODE_) {
-		set_fwstate(pmlmepriv, WIFI_MP_LPBK_STATE); //append txdesc
-		RT_TRACE(_module_mp_, _drv_notice_, ("+start mp in Lookback mode\n"));
-	} else {
-		RT_TRACE(_module_mp_, _drv_notice_, ("+start mp in normal mode\n"));
-	}
-#endif
-	set_fwstate(pmlmepriv, _FW_UNDER_LINKING);
-
-	//3 2. create a new psta for mp driver
-	//clear psta in the cur_network, if any
-	psta = rtw_get_stainfo(&padapter->stapriv, tgt_network->network.MacAddress);
-	if (psta) rtw_free_stainfo(padapter, psta);
-
-	psta = rtw_alloc_stainfo(&padapter->stapriv, bssid.MacAddress);
-	if (psta == NULL) {
-		RT_TRACE(_module_mp_, _drv_err_, ("mp_start_test: Can't alloc sta_info!\n"));
-		pmlmepriv->fw_state = pmppriv->prev_fw_state;
-		res = _FAIL;
-		goto end_of_mp_start_test;
-	}
-
-	//3 3. join psudo AdHoc
-	tgt_network->join_res = 1;
-	tgt_network->aid = psta->aid = 1;
-	_rtw_memcpy(&tgt_network->network, &bssid, length);
-
-	rtw_indicate_connect(padapter);
-	_clr_fwstate_(pmlmepriv, _FW_UNDER_LINKING);
-
-end_of_mp_start_test:
-
-	_exit_critical_bh(&pmlmepriv->lock, &irqL);
-
-	if (res == _SUCCESS)
-	{
-		// set MSR to WIFI_FW_ADHOC_STATE
-#if  defined (CONFIG_RTL8192C)  ||  defined (CONFIG_RTL8192D)
-		val8 = rtw_read8(padapter, MSR) & 0xFC; // 0x0102
-		val8 |= WIFI_FW_ADHOC_STATE;
-		rtw_write8(padapter, MSR, val8); // Link in ad hoc network
-#endif
-
-#if  !defined (CONFIG_RTL8192C)  &&  !defined (CONFIG_RTL8192D)
-		rtw_write8(padapter, MSR, 1); // Link in ad hoc network
-		rtw_write8(padapter, RCR, 0); // RCR : disable all pkt, 0x10250048
-		rtw_write8(padapter, RCR+2, 0x57); // RCR disable Check BSSID, 0x1025004a
-
-		// disable RX filter map , mgt frames will put in RX FIFO 0
-		rtw_write16(padapter, RXFLTMAP0, 0x0); // 0x10250116
-
-		val8 = rtw_read8(padapter, EE_9346CR); // 0x1025000A
-		if (!(val8 & _9356SEL))//boot from EFUSE
-			efuse_change_max_size(padapter);
-#endif
-	}
-
-	return res;
-}
-//------------------------------------------------------------------------------
-//This function change the DUT from the MP test mode into normal mode
-void mp_stop_test(PADAPTER padapter)
-{
-	struct mp_priv *pmppriv = &padapter->mppriv;
-	struct mlme_priv *pmlmepriv = &padapter->mlmepriv;
-	struct wlan_network *tgt_network = &pmlmepriv->cur_network;
-	struct sta_info *psta;
-
-	_irqL irqL;
-
-
-	_enter_critical_bh(&pmlmepriv->lock, &irqL);
-
-	if (check_fwstate(pmlmepriv, WIFI_MP_STATE) == _FALSE)
-		goto end_of_mp_stop_test;
-
-	//3 1. disconnect psudo AdHoc
-	rtw_indicate_disconnect(padapter);
-
-	//3 2. clear psta used in mp test mode.
-//	rtw_free_assoc_resources(padapter, 1);
-	psta = rtw_get_stainfo(&padapter->stapriv, tgt_network->network.MacAddress);
-	if (psta) rtw_free_stainfo(padapter, psta);
-
-	//3 3. return to normal state (default:station mode)
-	pmlmepriv->fw_state = pmppriv->prev_fw_state; // WIFI_STATION_STATE;
-
-	//flush the cur_network
-	_rtw_memset(tgt_network, 0, sizeof(struct wlan_network));
-
-	_clr_fwstate_(pmlmepriv, WIFI_MP_STATE);
-
-end_of_mp_stop_test:
-
-	_exit_critical_bh(&pmlmepriv->lock, &irqL);
-}
-/*---------------------------hal\rtl8192c\MPT_Phy.c---------------------------*/
-#if 0
-//#ifdef CONFIG_USB_HCI
-static VOID mpt_AdjustRFRegByRateByChan92CU(PADAPTER pAdapter, u8 RateIdx, u8 Channel, u8 BandWidthID)
-{
-	u8		eRFPath;
-	u32		rfReg0x26;
-	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(pAdapter);
-
-
-	if (RateIdx < MPT_RATE_6M) {	// CCK rate,for 88cu
-		rfReg0x26 = 0xf400;
-	}
-	else if ((RateIdx >= MPT_RATE_6M) && (RateIdx <= MPT_RATE_54M)) {// OFDM rate,for 88cu
-		if ((4 == Channel) || (8 == Channel) || (12 == Channel))
-			rfReg0x26 = 0xf000;
-		else if ((5 == Channel) || (7 == Channel) || (13 == Channel) || (14 == Channel))
-			rfReg0x26 = 0xf400;
-		else
-			rfReg0x26 = 0x4f200;
-	}
-	else if ((RateIdx >= MPT_RATE_MCS0) && (RateIdx <= MPT_RATE_MCS15)) {// MCS 20M ,for 88cu // MCS40M rate,for 88cu
-
-		if (HT_CHANNEL_WIDTH_20 == BandWidthID) {
-			if ((4 == Channel) || (8 == Channel))
-				rfReg0x26 = 0xf000;
-			else if ((5 == Channel) || (7 == Channel) || (13 == Channel) || (14 == Channel))
-				rfReg0x26 = 0xf400;
-			else
-				rfReg0x26 = 0x4f200;
-		}
-		else{
-			if ((4 == Channel) || (8 == Channel))
-				rfReg0x26 = 0xf000;
-			else if ((5 == Channel) || (7 == Channel))
-				rfReg0x26 = 0xf400;
-			else
-				rfReg0x26 = 0x4f200;
-		}
-	}
-
-//	RT_TRACE(COMP_CMD, DBG_LOUD, ("\n mpt_AdjustRFRegByRateByChan92CU():Chan:%d Rate=%d rfReg0x26:0x%08x\n",Channel, RateIdx,rfReg0x26));
-	for (eRFPath = 0; eRFPath < pHalData->NumTotalRFPath; eRFPath++) {
-		write_rfreg(pAdapter, eRFPath, RF_SYN_G2, rfReg0x26);
-	}
-}
-#endif
-/*-----------------------------------------------------------------------------
- * Function:	mpt_SwitchRfSetting
- *
- * Overview:	Change RF Setting when we siwthc channel/rate/BW for MP.
- *
- * Input:       IN	PADAPTER				pAdapter
- *
- * Output:      NONE
- *
- * Return:      NONE
- *
- * Revised History:
- * When			Who		Remark
- * 01/08/2009	MHC		Suggestion from SD3 Willis for 92S series.
- * 01/09/2009	MHC		Add CCK modification for 40MHZ. Suggestion from SD3.
- *
- *---------------------------------------------------------------------------*/
-static void mpt_SwitchRfSetting(PADAPTER pAdapter)
-{
-	Hal_mpt_SwitchRfSetting(pAdapter);
-    }
-
-/*---------------------------hal\rtl8192c\MPT_Phy.c---------------------------*/
-/*---------------------------hal\rtl8192c\MPT_HelperFunc.c---------------------------*/
-static void MPT_CCKTxPowerAdjust(PADAPTER Adapter, BOOLEAN bInCH14)
-{
-	Hal_MPT_CCKTxPowerAdjust(Adapter,bInCH14);
-}
-
-static void MPT_CCKTxPowerAdjustbyIndex(PADAPTER pAdapter, BOOLEAN beven)
-{
-	Hal_MPT_CCKTxPowerAdjustbyIndex(pAdapter,beven);
-	}
-
-/*---------------------------hal\rtl8192c\MPT_HelperFunc.c---------------------------*/
-
-/*
- * SetChannel
- * Description
- *	Use H2C command to change channel,
- *	not only modify rf register, but also other setting need to be done.
- */
-void SetChannel(PADAPTER pAdapter)
-{
-	Hal_SetChannel(pAdapter);
-
-}
-
-/*
- * Notice
- *	Switch bandwitdth may change center frequency(channel)
- */
-void SetBandwidth(PADAPTER pAdapter)
-{
-	Hal_SetBandwidth(pAdapter);
-
-}
-
-static void SetCCKTxPower(PADAPTER pAdapter, u8 *TxPower)
-{
-	Hal_SetCCKTxPower(pAdapter,TxPower);
-}
-
-static void SetOFDMTxPower(PADAPTER pAdapter, u8 *TxPower)
-{
-	Hal_SetOFDMTxPower(pAdapter,TxPower);
-	}
-
-
-void SetAntenna(PADAPTER pAdapter)
-	{
-	Hal_SetAntenna(pAdapter);
-}
-
-void	SetAntennaPathPower(PADAPTER pAdapter)
-{
-	Hal_SetAntennaPathPower(pAdapter);
-}
-
-void SetTxPower(PADAPTER pAdapter)
-{
-	Hal_SetTxPower(pAdapter);
-	}
-
-void SetTxAGCOffset(PADAPTER pAdapter, u32 ulTxAGCOffset)
-{
-	u32 TxAGCOffset_B, TxAGCOffset_C, TxAGCOffset_D,tmpAGC;
-
-	TxAGCOffset_B = (ulTxAGCOffset&0x000000ff);
-	TxAGCOffset_C = ((ulTxAGCOffset&0x0000ff00)>>8);
-	TxAGCOffset_D = ((ulTxAGCOffset&0x00ff0000)>>16);
-
-	tmpAGC = (TxAGCOffset_D<<8 | TxAGCOffset_C<<4 | TxAGCOffset_B);
-	write_bbreg(pAdapter, rFPGA0_TxGainStage,
-			(bXBTxAGC|bXCTxAGC|bXDTxAGC), tmpAGC);
-}
-
-void SetDataRate(PADAPTER pAdapter)
-{
-	Hal_SetDataRate(pAdapter);
-}
-
-#if  !defined (CONFIG_RTL8192C)  &&  !defined (CONFIG_RTL8192D)
-/*------------------------------Define structure----------------------------*/
-typedef struct _R_ANTENNA_SELECT_OFDM {
-	u32	r_tx_antenna:4;
-	u32	r_ant_l:4;
-	u32	r_ant_non_ht:4;
-	u32	r_ant_ht1:4;
-	u32	r_ant_ht2:4;
-	u32	r_ant_ht_s1:4;
-	u32	r_ant_non_ht_s1:4;
-	u32	OFDM_TXSC:2;
-	u32	Reserved:2;
-}R_ANTENNA_SELECT_OFDM;
-
-typedef struct _R_ANTENNA_SELECT_CCK {
-	u8	r_cckrx_enable_2:2;
-	u8	r_cckrx_enable:2;
-	u8	r_ccktx_enable:4;
-}R_ANTENNA_SELECT_CCK;
-#endif
-
-s32 SetThermalMeter(PADAPTER pAdapter, u8 target_ther)
-{
-	return Hal_SetThermalMeter( pAdapter, target_ther);
-}
-
-static void TriggerRFThermalMeter(PADAPTER pAdapter)
-{
-	Hal_TriggerRFThermalMeter(pAdapter);
-}
-
-static u8 ReadRFThermalMeter(PADAPTER pAdapter)
-{
-	return Hal_ReadRFThermalMeter(pAdapter);
-}
-
-void GetThermalMeter(PADAPTER pAdapter, u8 *value)
-{
-	Hal_GetThermalMeter(pAdapter,value);
-}
-
-void SetSingleCarrierTx(PADAPTER pAdapter, u8 bStart)
-{
-	Hal_SetSingleCarrierTx(pAdapter,bStart);
-}
-
-void SetSingleToneTx(PADAPTER pAdapter, u8 bStart)
-{
-	Hal_SetSingleToneTx(pAdapter,bStart);
-}
-
-void SetCarrierSuppressionTx(PADAPTER pAdapter, u8 bStart)
-{
-	Hal_SetCarrierSuppressionTx(pAdapter, bStart);
-}
-
-void SetCCKContinuousTx(PADAPTER pAdapter, u8 bStart)
-		{
-	Hal_SetCCKContinuousTx(pAdapter,bStart);
-		}
-
-void SetOFDMContinuousTx(PADAPTER pAdapter, u8 bStart)
-        {
-   Hal_SetOFDMContinuousTx( pAdapter, bStart);
-}/* mpt_StartOfdmContTx */
-
-void SetContinuousTx(PADAPTER pAdapter, u8 bStart)
-{
-	Hal_SetContinuousTx(pAdapter,bStart);
-}
-
-//------------------------------------------------------------------------------
-static void dump_mpframe(PADAPTER padapter, struct xmit_frame *pmpframe)
-{
-	rtw_hal_mgnt_xmit(padapter, pmpframe);
-}
-
-static struct xmit_frame *alloc_mp_xmitframe(struct xmit_priv *pxmitpriv)
-{
-	struct xmit_frame	*pmpframe;
-	struct xmit_buf	*pxmitbuf;
-
-	if ((pmpframe = rtw_alloc_xmitframe(pxmitpriv)) == NULL)
-	{
-		return NULL;
-	}
-
-	if ((pxmitbuf = rtw_alloc_xmitbuf(pxmitpriv)) == NULL)
-	{
-		rtw_free_xmitframe(pxmitpriv, pmpframe);
-		return NULL;
-	}
-
-	pmpframe->frame_tag = MP_FRAMETAG;
-
-	pmpframe->pxmitbuf = pxmitbuf;
-
-	pmpframe->buf_addr = pxmitbuf->pbuf;
-
-	pxmitbuf->priv_data = pmpframe;
-
-	return pmpframe;
-
-}
-
-static thread_return mp_xmit_packet_thread(thread_context context)
-{
-	struct xmit_frame	*pxmitframe;
-	struct mp_tx		*pmptx;
-	struct mp_priv	*pmp_priv;
-	struct xmit_priv	*pxmitpriv;
-	PADAPTER padapter;
-
-	pmp_priv = (struct mp_priv *)context;
-	pmptx = &pmp_priv->tx;
-	padapter = pmp_priv->papdater;
-	pxmitpriv = &(padapter->xmitpriv);
-
-	thread_enter("RTW_MP_THREAD");
-
-	DBG_871X("%s:pkTx Start\n", __func__);
-	while (1) {
-		pxmitframe = alloc_mp_xmitframe(pxmitpriv);
-		if (pxmitframe == NULL) {
-			if (pmptx->stop ||
-			    padapter->bSurpriseRemoved ||
-			    padapter->bDriverStopped) {
-				goto exit;
-			}
-			else {
-				rtw_msleep_os(1);
-				continue;
-			}
-		}
-
-		_rtw_memcpy((u8 *)(pxmitframe->buf_addr+TXDESC_OFFSET), pmptx->buf, pmptx->write_size);
-		_rtw_memcpy(&(pxmitframe->attrib), &(pmptx->attrib), sizeof(struct pkt_attrib));
-
-		dump_mpframe(padapter, pxmitframe);
-
-		pmptx->sended++;
-		pmp_priv->tx_pktcount++;
-
-		if (pmptx->stop ||
-		    padapter->bSurpriseRemoved ||
-		    padapter->bDriverStopped)
-			goto exit;
-		if ((pmptx->count != 0) &&
-		    (pmptx->count == pmptx->sended))
-			goto exit;
-
-		flush_signals_thread();
-	}
-
-exit:
-	//DBG_871X("%s:pkTx Exit\n", __func__);
-	rtw_mfree(pmptx->pallocated_buf, pmptx->buf_size);
-	pmptx->pallocated_buf = NULL;
-	pmptx->stop = 1;
-
-	thread_exit();
-}
-
-void fill_txdesc_for_mp(PADAPTER padapter, struct tx_desc *ptxdesc)
-{
-	struct mp_priv *pmp_priv = &padapter->mppriv;
-	_rtw_memcpy(ptxdesc, &(pmp_priv->tx.desc), TXDESC_SIZE);
-}
-
-void SetPacketTx(PADAPTER padapter)
-{
-	u8 *ptr, *pkt_start, *pkt_end;
-	u32 pkt_size;
-	struct tx_desc *desc;
-	struct rtw_ieee80211_hdr *hdr;
-	u8 payload;
-	s32 bmcast;
-	struct pkt_attrib *pattrib;
-	struct mp_priv *pmp_priv;
-
-
-	pmp_priv = &padapter->mppriv;
-	if (pmp_priv->tx.stop) return;
-	pmp_priv->tx.sended = 0;
-	pmp_priv->tx.stop = 0;
-	pmp_priv->tx_pktcount = 0;
-
-	//3 1. update_attrib()
-	pattrib = &pmp_priv->tx.attrib;
-	_rtw_memcpy(pattrib->src, padapter->eeprompriv.mac_addr, ETH_ALEN);
-	_rtw_memcpy(pattrib->ta, pattrib->src, ETH_ALEN);
-	_rtw_memcpy(pattrib->ra, pattrib->dst, ETH_ALEN);
-	bmcast = IS_MCAST(pattrib->ra);
-	if (bmcast) {
-		pattrib->mac_id = 1;
-		pattrib->psta = rtw_get_bcmc_stainfo(padapter);
-	} else {
-		pattrib->mac_id = 0;
-		pattrib->psta = rtw_get_stainfo(&padapter->stapriv, get_bssid(&padapter->mlmepriv));
-	}
-
-	pattrib->last_txcmdsz = pattrib->hdrlen + pattrib->pktlen;
-
-	//3 2. allocate xmit buffer
-	pkt_size = pattrib->last_txcmdsz;
-
-	if (pmp_priv->tx.pallocated_buf)
-		rtw_mfree(pmp_priv->tx.pallocated_buf, pmp_priv->tx.buf_size);
-	pmp_priv->tx.write_size = pkt_size;
-	pmp_priv->tx.buf_size = pkt_size + XMITBUF_ALIGN_SZ;
-	pmp_priv->tx.pallocated_buf = rtw_zmalloc(pmp_priv->tx.buf_size);
-	if (pmp_priv->tx.pallocated_buf == NULL) {
-		DBG_871X("%s: malloc(%d) fail!!\n", __func__, pmp_priv->tx.buf_size);
-		return;
-	}
-	pmp_priv->tx.buf = (u8 *)N_BYTE_ALIGMENT((SIZE_PTR)(pmp_priv->tx.pallocated_buf), XMITBUF_ALIGN_SZ);
-	ptr = pmp_priv->tx.buf;
-
-	desc = &(pmp_priv->tx.desc);
-	_rtw_memset(desc, 0, TXDESC_SIZE);
-	pkt_start = ptr;
-	pkt_end = pkt_start + pkt_size;
-
-	//3 3. init TX descriptor
-	// offset 0
-	//desc->txdw0 |= cpu_to_le32(pkt_size & 0x0000FFFF); // packet size
-	//desc->txdw0 |= cpu_to_le32(OWN | FSG | LSG);
-	//desc->txdw0 |= cpu_to_le32(((TXDESC_SIZE + OFFSET_SZ) << OFFSET_SHT) & 0x00FF0000); //32 bytes for TX Desc
-	//if (bmcast) desc->txdw0 |= cpu_to_le32(BMC); // broadcast packet
-
-	// offset 4
-	desc->txdw1 |= cpu_to_le32(BK); // don't aggregate(AMPDU)
-	desc->txdw1 |= cpu_to_le32((pattrib->mac_id) & 0x1F); //CAM_ID(MAC_ID)
-	desc->txdw1 |= cpu_to_le32((pattrib->qsel << QSEL_SHT) & 0x00001F00); // Queue Select, TID
-	desc->txdw1 |= cpu_to_le32((pattrib->raid << Rate_ID_SHT) & 0x000F0000); // Rate Adaptive ID
-
-	// offset 8
-	// offset 12
-	//desc->txdw3 |= cpu_to_le32((pattrib->seqnum << SEQ_SHT) & 0xffff0000);
-
-	// offset 16
-	//desc->txdw4 |= cpu_to_le32(QoS);
-	desc->txdw4 |= cpu_to_le32(HW_SEQ_EN);
-	desc->txdw4 |= cpu_to_le32(USERATE);
-	desc->txdw4 |= cpu_to_le32(DISDATAFB);
-
-	if( pmp_priv->preamble ){
-		if (pmp_priv->rateidx <=  MPT_RATE_54M)
-			desc->txdw4 |= cpu_to_le32(DATA_SHORT); // CCK Short Preamble
-	}
-	if (pmp_priv->bandwidth == HT_CHANNEL_WIDTH_40)
-		desc->txdw4 |= cpu_to_le32(DATA_BW);
-
-	// offset 20
-	desc->txdw5 |= cpu_to_le32(pmp_priv->rateidx & 0x0000001F);
-
-	if( pmp_priv->preamble ){
-		if (pmp_priv->rateidx > MPT_RATE_54M)
-			desc->txdw5 |= cpu_to_le32(SGI); // MCS Short Guard Interval
-	}
-	desc->txdw5 |= cpu_to_le32(0x0001FF00); // DATA/RTS Rate Fallback Limit
-
-	//3 4. make wlan header, make_wlanhdr()
-	hdr = (struct rtw_ieee80211_hdr *)pkt_start;
-	SetFrameSubType(&hdr->frame_ctl, pattrib->subtype);
-	_rtw_memcpy(hdr->addr1, pattrib->dst, ETH_ALEN); // DA
-	_rtw_memcpy(hdr->addr2, pattrib->src, ETH_ALEN); // SA
-	_rtw_memcpy(hdr->addr3, get_bssid(&padapter->mlmepriv), ETH_ALEN); // RA, BSSID
-
-	//3 5. make payload
-	ptr = pkt_start + pattrib->hdrlen;
-
-	switch (pmp_priv->tx.payload) {
-		case 0:
-			payload = 0x00;
-			break;
-		case 1:
-			payload = 0x5a;
-			break;
-		case 2:
-			payload = 0xa5;
-			break;
-		case 3:
-			payload = 0xff;
-			break;
-		default:
-			payload = 0x00;
-			break;
-	}
-
-	_rtw_memset(ptr, payload, pkt_end - ptr);
-
-	//3 6. start thread
-#ifdef PLATFORM_LINUX
-	pmp_priv->tx.PktTxThread = kthread_run(mp_xmit_packet_thread, pmp_priv, "RTW_MP_THREAD");
-	if (IS_ERR(pmp_priv->tx.PktTxThread))
-		DBG_871X("Create PktTx Thread Fail !!!!!\n");
-#endif
-#ifdef PLATFORM_FREEBSD
-{
-	struct proc *p;
-	struct thread *td;
-	pmp_priv->tx.PktTxThread = kproc_kthread_add(mp_xmit_packet_thread, pmp_priv,
-					&p, &td, RFHIGHPID, 0, "MPXmitThread", "MPXmitThread");
-
-	if (pmp_priv->tx.PktTxThread < 0)
-		DBG_871X("Create PktTx Thread Fail !!!!!\n");
-}
-#endif
-}
-
-void SetPacketRx(PADAPTER pAdapter, u8 bStartRx)
-{
-	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(pAdapter);
-
-	if(bStartRx)
-	{
-		pHalData->ReceiveConfig = AAP | APM | AM | AB | APP_ICV | ADF | AMF | HTC_LOC_CTRL | APP_MIC | APP_PHYSTS;
-
-		pHalData->ReceiveConfig |= ACRC32;
-
-		rtw_write32(pAdapter, REG_RCR, pHalData->ReceiveConfig);
-
-		// Accept all data frames
-		rtw_write16(pAdapter, REG_RXFLTMAP2, 0xFFFF);
-	}
-	else
-	{
-		rtw_write32(pAdapter, REG_RCR, 0);
-	}
-}
-
-void ResetPhyRxPktCount(PADAPTER pAdapter)
-{
-	u32 i, phyrx_set = 0;
-
-	for (i = 0; i <= 0xF; i++) {
-		phyrx_set = 0;
-		phyrx_set |= _RXERR_RPT_SEL(i);	//select
-		phyrx_set |= RXERR_RPT_RST;	// set counter to zero
-		rtw_write32(pAdapter, REG_RXERR_RPT, phyrx_set);
-	}
-}
-
-static u32 GetPhyRxPktCounts(PADAPTER pAdapter, u32 selbit)
-{
-	//selection
-	u32 phyrx_set = 0, count = 0;
-
-	phyrx_set = _RXERR_RPT_SEL(selbit & 0xF);
-	rtw_write32(pAdapter, REG_RXERR_RPT, phyrx_set);
-
-	//Read packet count
-	count = rtw_read32(pAdapter, REG_RXERR_RPT) & RXERR_COUNTER_MASK;
-
-	return count;
-}
-
-u32 GetPhyRxPktReceived(PADAPTER pAdapter)
-{
-	u32 OFDM_cnt = 0, CCK_cnt = 0, HT_cnt = 0;
-
-	OFDM_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_OFDM_MPDU_OK);
-	CCK_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_CCK_MPDU_OK);
-	HT_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_HT_MPDU_OK);
-
-	return OFDM_cnt + CCK_cnt + HT_cnt;
-}
-
-u32 GetPhyRxPktCRC32Error(PADAPTER pAdapter)
-{
-	u32 OFDM_cnt = 0, CCK_cnt = 0, HT_cnt = 0;
-
-	OFDM_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_OFDM_MPDU_FAIL);
-	CCK_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_CCK_MPDU_FAIL);
-	HT_cnt = GetPhyRxPktCounts(pAdapter, RXERR_TYPE_HT_MPDU_FAIL);
-
-	return OFDM_cnt + CCK_cnt + HT_cnt;
-}
-
-//reg 0x808[9:0]: FFT data x
-//reg 0x808[22]:  0  -->  1  to get 1 FFT data y
-//reg 0x8B4[15:0]: FFT data y report
-static u32 GetPSDData(PADAPTER pAdapter, u32 point)
-{
-	int psd_val;
-
-
-	psd_val = rtw_read32(pAdapter, 0x808);
-	psd_val &= 0xFFBFFC00;
-	psd_val |= point;
-
-	rtw_write32(pAdapter, 0x808, psd_val);
-	rtw_mdelay_os(1);
-	psd_val |= 0x00400000;
-
-	rtw_write32(pAdapter, 0x808, psd_val);
-	rtw_mdelay_os(1);
-	psd_val = rtw_read32(pAdapter, 0x8B4);
-
-	psd_val &= 0x0000FFFF;
-
-	return psd_val;
-}
-
-/*
- * pts	start_point_min		stop_point_max
- * 128	64			64 + 128 = 192
- * 256	128			128 + 256 = 384
- * 512	256			256 + 512 = 768
- * 1024	512			512 + 1024 = 1536
- *
- */
-u32 mp_query_psd(PADAPTER pAdapter, u8 *data)
-{
-	u32 i, psd_pts=0, psd_start=0, psd_stop=0;
-	u32 psd_data=0;
-
-#ifdef PLATFORM_LINUX
-	if (!netif_running(pAdapter->pnetdev)) {
-		RT_TRACE(_module_mp_, _drv_warning_, ("mp_query_psd: Fail! interface not opened!\n"));
-		return 0;
-	}
-#endif
-
-	if (check_fwstate(&pAdapter->mlmepriv, WIFI_MP_STATE) == _FALSE) {
-		RT_TRACE(_module_mp_, _drv_warning_, ("mp_query_psd: Fail! not in MP mode!\n"));
-		return 0;
-	}
-
-	if (strlen(data) == 0) { //default value
-		psd_pts = 128;
-		psd_start = 64;
-		psd_stop = 128;
-	} else {
-		sscanf(data, "pts=%d,start=%d,stop=%d", &psd_pts, &psd_start, &psd_stop);
-	}
-
-	_rtw_memset(data, '\0', sizeof(data));
-
-	i = psd_start;
-	while (i < psd_stop)
-	{
-		if (i >= psd_pts) {
-			psd_data = GetPSDData(pAdapter, i-psd_pts);
-		} else {
-			psd_data = GetPSDData(pAdapter, i);
-		}
-		sprintf(data, "%s%x ", data, psd_data);
-		i++;
-	}
-
-	#ifdef CONFIG_LONG_DELAY_ISSUE
-	rtw_msleep_os(100);
-	#else
-	rtw_mdelay_os(100);
-	#endif
-
-	return strlen(data)+1;
-}
-
-#endif
--- a/drivers/staging/rtl8192du/core/rtw_recv.c
+++ b/drivers/staging/rtl8192du/core/rtw_recv.c
@@ -681,43 +681,23 @@ _func_enter_;
 		&& (psecuritypriv->busetkipkey==1 || prxattrib->encrypt !=_TKIP_ )
 		)
 	{
-#if 0
-		if((prxstat->icv==1)&&(prxattrib->encrypt!=_AES_))
-		{
-			psecuritypriv->hw_decrypted=_FALSE;
-
-			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("psecuritypriv->hw_decrypted=_FALSE"));
-
-			rtw_free_recvframe(precv_frame, &padapter->recvpriv.free_recv_queue);
-
-			return_packet=NULL;
-
-		}
-		else
-#endif
-		{
-			psecuritypriv->hw_decrypted=_TRUE;
-			#ifdef DBG_RX_DECRYPTOR
-			DBG_871X("prxstat->bdecrypted:%d,  prxattrib->encrypt:%d,  Setting psecuritypriv->hw_decrypted = %d\n"
-			, prxattrib->bdecrypted ,prxattrib->encrypt, psecuritypriv->hw_decrypted);
-			#endif
+		psecuritypriv->hw_decrypted=_TRUE;
+		#ifdef DBG_RX_DECRYPTOR
+		DBG_871X("prxstat->bdecrypted:%d,  prxattrib->encrypt:%d,  Setting psecuritypriv->hw_decrypted = %d\n"
+		, prxattrib->bdecrypted ,prxattrib->encrypt, psecuritypriv->hw_decrypted);
+		#endif
 
-		}
-	}
-	else {
+	} else {
 		#ifdef DBG_RX_DECRYPTOR
 		DBG_871X("prxstat->bdecrypted:%d,  prxattrib->encrypt:%d,  psecuritypriv->hw_decrypted:%d\n"
 		, prxattrib->bdecrypted ,prxattrib->encrypt, psecuritypriv->hw_decrypted);
 		#endif
 	}
 
-	if(res == _FAIL)
-	{
+	if(res == _FAIL) {
 		rtw_free_recvframe(return_packet,&padapter->recvpriv.free_recv_queue);
 		return_packet = NULL;
-
 	}
-	//recvframe_chkmic(adapter, precv_frame);   //move to recvframme_defrag function
 
 _func_exit_;
 
@@ -1701,25 +1681,8 @@ union recv_frame* recvframe_chk_defrag(P
 sint validate_recv_mgnt_frame(PADAPTER padapter, union recv_frame *precv_frame);
 sint validate_recv_mgnt_frame(PADAPTER padapter, union recv_frame *precv_frame)
 {
-	//struct mlme_priv *pmlmepriv = &adapter->mlmepriv;
-
 	RT_TRACE(_module_rtl871x_recv_c_, _drv_info_, ("+validate_recv_mgnt_frame\n"));
 
-#if 0
-	if(check_fwstate(pmlmepriv, WIFI_AP_STATE) == _TRUE)
-	{
-#ifdef CONFIG_NATIVEAP_MLME
-		mgt_dispatcher(padapter, precv_frame);
-#else
-		rtw_hostapd_mlme_rx(padapter, precv_frame);
-#endif
-	}
-	else
-	{
-		mgt_dispatcher(padapter, precv_frame);
-	}
-#endif
-
 	precv_frame = recvframe_chk_defrag(padapter, precv_frame);
 	if (precv_frame == NULL) {
 		RT_TRACE(_module_rtl871x_recv_c_, _drv_notice_,("%s: fragment packet\n",__FUNCTION__));
@@ -1925,14 +1888,6 @@ _func_enter_;
 		goto exit;
 	}
 
-#if 0
-	if(psta->tdls_sta_state & TDLS_LINKED_STATE )
-	{
-		if(psta->dot118021XPrivacy==_AES_)
-			pattrib->encrypt=psta->dot118021XPrivacy;
-	}
-#endif //CONFIG_TDLS
-
 	if(pattrib->privacy){
 
 		RT_TRACE(_module_rtl871x_recv_c_,_drv_info_,("validate_recv_data_frame:pattrib->privacy=%x\n", pattrib->privacy));
@@ -2039,77 +1994,36 @@ _func_enter_;
 	pattrib->mdata = GetMData(ptr);
 	pattrib->privacy = GetPrivacy(ptr);
 	pattrib->order = GetOrder(ptr);
-#if 0 //for debug
-
-if(pHalData->bDumpRxPkt ==1){
-	int i;
-	DBG_871X("############################# \n");
-
-	for(i=0; i<64;i=i+8)
-		DBG_871X("%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X:\n", *(ptr+i),
-		*(ptr+i+1), *(ptr+i+2) ,*(ptr+i+3) ,*(ptr+i+4),*(ptr+i+5), *(ptr+i+6), *(ptr+i+7));
-	DBG_871X("############################# \n");
-}
-else if(pHalData->bDumpRxPkt ==2){
-	if(type== WIFI_MGT_TYPE){
-		int i;
-		DBG_871X("############################# \n");
-
-		for(i=0; i<64;i=i+8)
-			DBG_871X("%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X:\n", *(ptr+i),
-			*(ptr+i+1), *(ptr+i+2) ,*(ptr+i+3) ,*(ptr+i+4),*(ptr+i+5), *(ptr+i+6), *(ptr+i+7));
-		DBG_871X("############################# \n");
-	}
-}
-else if(pHalData->bDumpRxPkt ==3){
-	if(type== WIFI_DATA_TYPE){
-		int i;
-		DBG_871X("############################# \n");
-
-		for(i=0; i<64;i=i+8)
-			DBG_871X("%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X:\n", *(ptr+i),
-			*(ptr+i+1), *(ptr+i+2) ,*(ptr+i+3) ,*(ptr+i+4),*(ptr+i+5), *(ptr+i+6), *(ptr+i+7));
-		DBG_871X("############################# \n");
-	}
-}
-
-#endif
-	switch (type)
-	{
-		case WIFI_MGT_TYPE: //mgnt
-			retval = validate_recv_mgnt_frame(adapter, precv_frame);
-			if (retval == _FAIL)
-			{
-				RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_mgnt_frame fail\n"));
-			}
-			retval = _FAIL; // only data frame return _SUCCESS
-			break;
-		case WIFI_CTRL_TYPE: //ctrl
-			retval = validate_recv_ctrl_frame(adapter, precv_frame);
-			if (retval == _FAIL)
-			{
-				RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_ctrl_frame fail\n"));
-			}
-			retval = _FAIL; // only data frame return _SUCCESS
-			break;
-		case WIFI_DATA_TYPE: //data
-			rtw_led_control(adapter, LED_CTL_RX);
-			pattrib->qos = (subtype & BIT(7))? 1:0;
-			retval = validate_recv_data_frame(adapter, precv_frame);
-			if (retval == _FAIL)
-			{
-				struct recv_priv *precvpriv = &adapter->recvpriv;
-				RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_data_frame fail\n"));
-				precvpriv->rx_drop++;
-			}
-			break;
-		default:
-			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_data_frame fail! type=0x%x\n", type));
-			#ifdef DBG_RX_DROP_FRAME
-			DBG_871X("DBG_RX_DROP_FRAME validate_recv_data_frame fail! type=0x%x\n", type);
-			#endif
-			retval = _FAIL;
-			break;
+	switch (type) {
+	case WIFI_MGT_TYPE: //mgnt
+		retval = validate_recv_mgnt_frame(adapter, precv_frame);
+		if (retval == _FAIL)
+			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_mgnt_frame fail\n"));
+		retval = _FAIL; // only data frame return _SUCCESS
+		break;
+	case WIFI_CTRL_TYPE: //ctrl
+		retval = validate_recv_ctrl_frame(adapter, precv_frame);
+		if (retval == _FAIL)
+			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_ctrl_frame fail\n"));
+		retval = _FAIL; // only data frame return _SUCCESS
+		break;
+	case WIFI_DATA_TYPE: //data
+		rtw_led_control(adapter, LED_CTL_RX);
+		pattrib->qos = (subtype & BIT(7))? 1:0;
+		retval = validate_recv_data_frame(adapter, precv_frame);
+		if (retval == _FAIL) {
+			struct recv_priv *precvpriv = &adapter->recvpriv;
+			RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_data_frame fail\n"));
+			precvpriv->rx_drop++;
+		}
+		break;
+	default:
+		RT_TRACE(_module_rtl871x_recv_c_,_drv_err_,("validate_recv_data_frame fail! type=0x%x\n", type));
+		#ifdef DBG_RX_DROP_FRAME
+		DBG_871X("DBG_RX_DROP_FRAME validate_recv_data_frame fail! type=0x%x\n", type);
+		#endif
+		retval = _FAIL;
+		break;
 	}
 
 exit:
@@ -2855,19 +2769,6 @@ int amsdu_to_msdu(_adapter *padapter, un
 
 		/* Indicat the packets to upper layer */
 		if (sub_m) {
-
-#if 0
-#ifdef CONFIG_TCP_CSUM_OFFLOAD_RX
-			if ( (pattrib->tcpchk_valid == 1) && (pattrib->tcp_chkrpt == 1) ) {
-				sub_skb->ip_summed = CHECKSUM_UNNECESSARY;
-			} else {
-				sub_skb->ip_summed = CHECKSUM_NONE;
-			}
-#else /* !CONFIG_TCP_CSUM_OFFLOAD_RX */
-			sub_skb->ip_summed = CHECKSUM_NONE;
-#endif //CONFIG_TCP_CSUM_OFFLOAD_RX
-#endif //0
-
 			if ( ((u32)(mtod(sub_m, caddr_t) + 14) % 4) != 0)
 				printf("%s()-%d: mtod(sub_m) = %p\n", __FUNCTION__, __LINE__, mtod(sub_m, caddr_t));
 #ifdef CONFIG_RX_INDICATE_QUEUE
@@ -3043,119 +2944,22 @@ exit:
 
 		a_len -= (type_len + ETH_HLEN + padding_len) ;
 
-
-#if 0
-
-	if(a_len > ETH_HLEN)
-	{
-		pnrframe_new = rtw_alloc_recvframe(pfree_recv_queue);
-		if(pnrframe_new)
-		{
-			_pkt *pskb_copy;
-			unsigned int copy_len  = pnrframe->u.hdr.len;
-
-			_rtw_init_listhead(&pnrframe_new->u.hdr.list);
-
-	#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,18)) // http://www.mail-archive.com/netdev@vger.kernel.org/msg17214.html
-			pskb_copy = dev_alloc_skb(copy_len+64);
-	#else
-			pskb_copy = netdev_alloc_skb(padapter->pnetdev, copy_len + 64);
-	#endif
-			if(pskb_copy==NULL)
-			{
-				DBG_871X("amsdu_to_msdu:can not all(ocate memory for skb copy\n");
-			}
-
-			pnrframe_new->u.hdr.pkt = pskb_copy;
-
-			_rtw_memcpy(pskb_copy->data, pnrframe->u.hdr.rx_data, copy_len);
-
-			pnrframe_new->u.hdr.rx_data = pnrframe->u.hdr.rx_data;
-			pnrframe_new->u.hdr.rx_tail = pnrframe->u.hdr.rx_data + copy_len;
-
-
-			if ((padapter->bDriverStopped ==_FALSE)&&( padapter->bSurpriseRemoved==_FALSE))
-			{
-				rtw_recv_indicatepkt(padapter, pnrframe_new);//indicate this recv_frame
-			}
-			else
-			{
-				rtw_free_recvframe(pnrframe_new, pfree_recv_queue);//free this recv_frame
-			}
-
-		}
-		else
-		{
-			DBG_871X("amsdu_to_msdu:can not allocate memory for pnrframe_new\n");
-		}
-
-	}
-	else
-	{
-		if ((padapter->bDriverStopped ==_FALSE)&&( padapter->bSurpriseRemoved==_FALSE))
-		{
-			rtw_recv_indicatepkt(padapter, pnrframe);//indicate this recv_frame
-		}
-		else
-		{
-			rtw_free_recvframe(pnrframe, pfree_recv_queue);//free this recv_frame
-		}
-
-		pnrframe = NULL;
-
-	}
-
-#else // 0
-
-		//padding_len = (4) - ((type_len + ETH_HLEN)&(4-1));
-
-		//a_len -= (type_len + ETH_HLEN + padding_len) ;
-
 		pnrframe_new = NULL;
 
-
-		if(a_len > ETH_HLEN)
-		{
+		if(a_len > ETH_HLEN) {
 			pnrframe_new = rtw_alloc_recvframe(pfree_recv_queue);
 
-			if(pnrframe_new)
-			{
-
-
-				//pnrframe_new->u.hdr.precvbuf = precvbuf;//precvbuf is assigned before call rtw_init_recvframe()
-				//rtw_init_recvframe(pnrframe_new, precvpriv);
-				{
-#ifdef PLATFORM_LINUX
-						_pkt *pskb = pnrframe->u.hdr.pkt;
-#endif //PLATFORM_LINUX
-						_rtw_init_listhead(&pnrframe_new->u.hdr.list);
+			if(pnrframe_new) {
+				_pkt *pskb = pnrframe->u.hdr.pkt;
+				_rtw_init_listhead(&pnrframe_new->u.hdr.list);
 
-						pnrframe_new->u.hdr.len=0;
-
-#ifdef PLATFORM_LINUX
-						if(pskb)
-						{
-							pnrframe_new->u.hdr.pkt = skb_clone(pskb, GFP_ATOMIC);
-						}
-#endif //PLATFORM_LINUX
-
-				}
+				pnrframe_new->u.hdr.len=0;
 
+				if(pskb)
+					pnrframe_new->u.hdr.pkt = skb_clone(pskb, GFP_ATOMIC);
 				pdata += (type_len + ETH_HLEN + padding_len);
 				pnrframe_new->u.hdr.rx_head = pnrframe_new->u.hdr.rx_data = pnrframe_new->u.hdr.rx_tail = pdata;
 				pnrframe_new->u.hdr.rx_end = pdata + a_len + padding_len;//
-
-#ifdef PLATFORM_WINDOWS
-				pnrframe_new->u.hdr.precvbuf=precvbuf;
-				_enter_critical_bh(&precvbuf->recvbuf_lock, &irql);
-				precvbuf->ref_cnt++;
-				_exit_critical_bh(&precvbuf->recvbuf_lock, &irql);
-#endif //PLATFORM_WINDOWS
-
-			}
-			else
-			{
-				//panic("pnrframe_new=%x\n", pnrframe_new);
 			}
 		}
 
@@ -3176,9 +2980,6 @@ exit:
 			pnrframe = pnrframe_new;
 		}
 
-
-#endif // end defined (PLATFORM_LINUX) || defined (PLATFORM_FREEBSD)
-
 	}while(pnrframe);
 
 exit:
@@ -3340,12 +3141,6 @@ int recv_indicatepkts_in_order(_adapter
 	phead =		get_list_head(ppending_recvframe_queue);
 	plist = get_next(phead);
 
-#if 0
-	// Check if there is any other indication thread running.
-	if(pTS->RxIndicateState == RXTS_INDICATE_PROCESSING)
-		return;
-#endif
-
 	// Handling some condition for forced indicate case.
 	if(bforced==_TRUE)
 	{
@@ -3379,16 +3174,6 @@ int recv_indicatepkts_in_order(_adapter
 				 ("recv_indicatepkts_in_order: indicate=%d seq=%d amsdu=%d\n",
 				  preorder_ctrl->indicate_seq, pattrib->seq_num, pattrib->amsdu));
 
-#if 0
-			// This protect buffer from overflow.
-			if(index >= REORDER_WIN_SIZE)
-			{
-				RT_ASSERT(FALSE, ("IndicateRxReorderList(): Buffer overflow!! \n"));
-				bPktInBuf = TRUE;
-				break;
-			}
-#endif
-
 			plist = get_next(plist);
 			rtw_list_delete(&(prframe->u.hdr.list));
 
@@ -3401,43 +3186,15 @@ int recv_indicatepkts_in_order(_adapter
 				#endif
 			}
 
-#if 0
-			index++;
-			if(index==1)
-			{
-				//Cancel previous pending timer.
-				//PlatformCancelTimer(Adapter, &pTS->RxPktPendingTimer);
-				if(bforced!=_TRUE)
-				{
-					//DBG_871X("_cancel_timer(&preorder_ctrl->reordering_ctrl_timer, &bcancelled);\n");
-					_cancel_timer(&preorder_ctrl->reordering_ctrl_timer, &bcancelled);
-				}
-			}
-#endif
-
-			//Set this as a lock to make sure that only one thread is indicating packet.
-			//pTS->RxIndicateState = RXTS_INDICATE_PROCESSING;
-
-			// Indicate packets
-			//RT_ASSERT((index<=REORDER_WIN_SIZE), ("RxReorderIndicatePacket(): Rx Reorder buffer full!! \n"));
-
-
 			//indicate this recv_frame
-			//DbgPrint("recv_indicatepkts_in_order, indicate_seq=%d, seq_num=%d\n", precvpriv->indicate_seq, pattrib->seq_num);
 			if(!pattrib->amsdu)
 			{
-				//DBG_871X("recv_indicatepkts_in_order, amsdu!=1, indicate_seq=%d, seq_num=%d\n", preorder_ctrl->indicate_seq, pattrib->seq_num);
-
 				if ((padapter->bDriverStopped == _FALSE) &&
 				    (padapter->bSurpriseRemoved == _FALSE))
-				{
 
 					rtw_recv_indicatepkt(padapter, prframe);//indicate this recv_frame
 
-				}
-			}
-			else if(pattrib->amsdu==1)
-			{
+			} else if(pattrib->amsdu==1) {
 				if(amsdu_to_msdu(padapter, prframe)!=_SUCCESS)
 				{
 					rtw_free_recvframe(prframe, &precvpriv->free_recv_queue);
@@ -3600,15 +3357,7 @@ int recv_indicatepkt_reorder(_adapter *p
 		#ifdef DBG_RX_DROP_FRAME
 		DBG_871X("DBG_RX_DROP_FRAME %s check_indicate_seq fail\n", __FUNCTION__);
 		#endif
-#if 0
-		rtw_recv_indicatepkt(padapter, prframe);
-
-		_exit_critical_bh(&ppending_recvframe_queue->lock, &irql);
-
-		goto _success_exit;
-#else
 		goto _err_exit;
-#endif
 	}
 
 
@@ -3834,22 +3583,6 @@ int recv_func_posthandle(_adapter *padap
 		goto _recv_data_drop;
 	}
 
-#if 0
-	if ( padapter->adapter_type == PRIMARY_ADAPTER )
-	{
-		DBG_871X("+++\n");
-		{
-			int i;
-			u8	*ptr = get_recvframe_data(prframe);
-			for(i=0; i<140;i=i+8)
-				DBG_871X("%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X:", *(ptr+i),
-				*(ptr+i+1), *(ptr+i+2) ,*(ptr+i+3) ,*(ptr+i+4),*(ptr+i+5), *(ptr+i+6), *(ptr+i+7));
-
-		}
-		DBG_871X("---\n");
-	}
-#endif //RTK_DMP_PLATFORM
-
 #ifdef CONFIG_TDLS
 	//check TDLS frame
 	psnap_type = get_recvframe_data(orig_prframe);
--- a/drivers/staging/rtl8192du/hal/rtl8192d_rf6052.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_rf6052.c
@@ -98,49 +98,6 @@ void rtl8192d_RF_ChangeTxPath(	IN	PADAPT
 										IN	u16		DataRate)
 {
 // We do not support gain table change inACUT now !!!! Delete later !!!
-#if 0//(RTL92SE_FPGA_VERIFY == 0)
-	static	u1Byte	RF_Path_Type = 2;	// 1 = 1T 2= 2T
-	static	u4Byte	tx_gain_tbl1[6]
-			= {0x17f50, 0x11f40, 0x0cf30, 0x08720, 0x04310, 0x00100};
-	static	u4Byte	tx_gain_tbl2[6]
-			= {0x15ea0, 0x10e90, 0x0c680, 0x08250, 0x04040, 0x00030};
-	u1Byte	i;
-
-	if (RF_Path_Type == 2 && (DataRate&0xF) <= 0x7)
-	{
-		// Set TX SYNC power G2G3 loop filter
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G2, bRFRegOffsetMask, 0x0f000);
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G3, bRFRegOffsetMask, 0xeacf1);
-
-		// Change TX AGC gain table
-		for (i = 0; i < 6; i++)
-			PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-						RF_TX_AGC, bRFRegOffsetMask, tx_gain_tbl1[i]);
-
-		// Set PA to high value
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G2, bRFRegOffsetMask, 0x01e39);
-	}
-	else if (RF_Path_Type == 1 && (DataRate&0xF) >= 0x8)
-	{
-		// Set TX SYNC power G2G3 loop filter
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G2, bRFRegOffsetMask, 0x04440);
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G3, bRFRegOffsetMask, 0xea4f1);
-
-		// Change TX AGC gain table
-		for (i = 0; i < 6; i++)
-			PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-						RF_TX_AGC, bRFRegOffsetMask, tx_gain_tbl2[i]);
-
-		// Set PA low gain
-		PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)RF_PATH_A,
-					RF_TXPA_G2, bRFRegOffsetMask, 0x01e19);
-	}
-#endif
 
 }	/* RF_ChangeTxPath */
 
@@ -167,17 +124,14 @@ rtl8192d_PHY_RF6052SetBandwidth(
 	u8			eRFPath;
 	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(Adapter);
 
-	//RT_TRACE(COMP_MLME,DBG_LOUD,("====>PHY_RF6052SetBandwidth()Bandwidth:%d \n",Bandwidth));
 	switch(Bandwidth)
 	{
 		case HT_CHANNEL_WIDTH_20:
 			for(eRFPath=0;eRFPath<pHalData->NumTotalRFPath;eRFPath++)
 			{
 				pHalData->RfRegChnlVal[eRFPath] = ((pHalData->RfRegChnlVal[eRFPath] & 0xfffff3ff) | 0x0400);
-				//PHY_SetRFReg(Adapter, eRFPath, RF_CHNLBW, bRFRegOffsetMask, pHalData->RfRegChnlVal[eRFPath]);
 				PHY_SetRFReg(Adapter, (RF_RADIO_PATH_E)eRFPath, RF_CHNLBW, BIT10|BIT11, 0x01);
 
-				//RT_TRACE(COMP_RF, DBG_LOUD, ("PHY_RF6052SetBandwidth 20M RF 0x18 = 0x%x interface index %d\n",pHalData->RfRegChnlVal[eRFPath],  Adapter->interfaceIndex));
 			}
 			break;
 
@@ -254,19 +208,6 @@ rtl8192d_PHY_RF6052SetCckTxPower(
 // 20100427 Joseph: Driver dynamic Tx power shall not affect Tx power. It shall be determined by power training mechanism.
 // Currently, we cannot fully disable driver dynamic tx power mechanism because it is referenced by BT coexist mechanism.
 // In the future, two mechanism shall be separated from each other and maintained independantly. Thanks for Lanhsin's reminder.
-#if 0
-		if(pHalData->DynamicTxHighPowerLvl == TxHighPwrLevel_Level1)
-		{
-			TxAGC[RF_PATH_A] = 0x10101010;
-			TxAGC[RF_PATH_B] = 0x10101010;
-		}
-		else if(pHalData->DynamicTxHighPowerLvl == TxHighPwrLevel_Level1)
-		{
-			TxAGC[RF_PATH_A] = 0x00000000;
-			TxAGC[RF_PATH_B] = 0x00000000;
-		}
-		else
-#endif
 		{
 			for(idx1=RF_PATH_A; idx1<=RF_PATH_B; idx1++)
 			{
--- a/drivers/staging/rtl8192du/hal/usb_ops_linux.c
+++ b/drivers/staging/rtl8192du/hal/usb_ops_linux.c
@@ -121,14 +121,7 @@ static int usbctrl_vendorreq(struct intf
 			_rtw_memcpy( pIo_buf, pdata, len);
 		}
 
-		#if 0
-		//timeout test for firmware downloading
-		status = rtw_usb_control_msg(udev, pipe, request, reqtype, value, index, pIo_buf, len
-			, (value == FW_8192D_START_ADDRESS) ?RTW_USB_CONTROL_MSG_TIMEOUT_TEST : RTW_USB_CONTROL_MSG_TIMEOUT
-		);
-		#else
 		status = rtw_usb_control_msg(udev, pipe, request, reqtype, value, index, pIo_buf, len, RTW_USB_CONTROL_MSG_TIMEOUT);
-		#endif
 
 		if ( status == len)   // Success this control transfer.
 		{
@@ -533,81 +526,7 @@ static s32 pre_recv_entry(union recv_fra
 	}
 	else // Handle BC/MC Packets
 	{
-
 		u8 clone = _TRUE;
-#if 0
-		u8 type, subtype, *paddr2, *paddr3;
-
-		type =  GetFrameType(pbuf);
-		subtype = GetFrameSubType(pbuf); //bit(7)~bit(2)
-
-		switch (type)
-		{
-			case WIFI_MGT_TYPE: //Handle BC/MC mgnt Packets
-				if(subtype == WIFI_BEACON)
-				{
-					paddr3 = GetAddr3Ptr(precvframe->u.hdr.rx_data);
-
-					if (check_fwstate(&secondary_padapter->mlmepriv, _FW_LINKED) &&
-						_rtw_memcmp(paddr3, get_bssid(&secondary_padapter->mlmepriv), ETH_ALEN))
-					{
-						//change to secondary interface
-						precvframe->u.hdr.adapter = secondary_padapter;
-						clone = _FALSE;
-					}
-
-					if(check_fwstate(&primary_padapter->mlmepriv, _FW_LINKED) &&
-						_rtw_memcmp(paddr3, get_bssid(&primary_padapter->mlmepriv), ETH_ALEN))
-					{
-						if(clone==_FALSE)
-						{
-							clone = _TRUE;
-						}
-						else
-						{
-							clone = _FALSE;
-						}
-
-						precvframe->u.hdr.adapter = primary_padapter;
-					}
-
-					if(check_fwstate(&primary_padapter->mlmepriv, _FW_UNDER_SURVEY|_FW_UNDER_LINKING) ||
-						check_fwstate(&secondary_padapter->mlmepriv, _FW_UNDER_SURVEY|_FW_UNDER_LINKING))
-					{
-						clone = _TRUE;
-						precvframe->u.hdr.adapter = primary_padapter;
-					}
-
-				}
-				else if(subtype == WIFI_PROBEREQ)
-				{
-					//probe req frame is only for interface2
-					//change to secondary interface
-					precvframe->u.hdr.adapter = secondary_padapter;
-					clone = _FALSE;
-				}
-				break;
-			case WIFI_CTRL_TYPE: // Handle BC/MC ctrl Packets
-
-				break;
-			case WIFI_DATA_TYPE: //Handle BC/MC data Packets
-					//Notes: AP MODE never rx BC/MC data packets
-
-				paddr2 = GetAddr2Ptr(precvframe->u.hdr.rx_data);
-
-				if(_rtw_memcmp(paddr2, get_bssid(&secondary_padapter->mlmepriv), ETH_ALEN))
-				{
-					//change to secondary interface
-					precvframe->u.hdr.adapter = secondary_padapter;
-					clone = _FALSE;
-				}
-
-				break;
-			default:
-
-				break;
-		}
-#endif
 
 		if(_TRUE == clone)
 		{
@@ -723,13 +642,6 @@ static int recvbuf2recvframe(_adapter *p
 	prxstat = (struct recv_stat *)pbuf;
 	pkt_cnt = (le32_to_cpu(prxstat->rxdw2)>>16) & 0xff;
 
-#if 0 //temp remove when disable usb rx aggregation
-	if((pkt_cnt > 10) || (pkt_cnt < 1) || (transfer_len<RXDESC_SIZE) ||(pkt_len<=0))
-	{
-		return _FAIL;
-	}
-#endif
-
 	do{
 		RT_TRACE(_module_rtl871x_recv_c_, _drv_info_,
 			 ("recvbuf2recvframe: rxdesc=offsset 0:0x%08x, 4:0x%08x, 8:0x%08x, C:0x%08x\n",
@@ -1064,13 +976,6 @@ static int recvbuf2recvframe(_adapter *p
 	prxstat = (struct recv_stat *)pbuf;
 	pkt_cnt = (le32_to_cpu(prxstat->rxdw2)>>16) & 0xff;
 
-#if 0 //temp remove when disable usb rx aggregation
-	if((pkt_cnt > 10) || (pkt_cnt < 1) || (transfer_len<RXDESC_SIZE) ||(pkt_len<=0))
-	{
-		return _FAIL;
-	}
-#endif
-
 	do{
 		RT_TRACE(_module_rtl871x_recv_c_, _drv_info_,
 			 ("recvbuf2recvframe: rxdesc=offsset 0:0x%08x, 4:0x%08x, 8:0x%08x, C:0x%08x\n",
--- a/drivers/staging/rtl8192du/os_dep/rtw_android.c
+++ b/drivers/staging/rtl8192du/os_dep/rtw_android.c
@@ -384,76 +384,40 @@ int rtw_android_priv_cmd(struct net_devi
 	}
 
 	switch(cmd_num) {
-
 	case ANDROID_WIFI_CMD_STOP:
-		//bytes_written = wl_android_wifi_off(net);
 		break;
-
 	case ANDROID_WIFI_CMD_SCAN_ACTIVE:
-		//rtw_set_scan_mode((_adapter *)rtw_netdev_priv(net), SCAN_ACTIVE);
-#ifdef CONFIG_PLATFORM_MSTAR_TITANIA12
-#ifdef CONFIG_IOCTL_CFG80211
-		(wdev_to_priv(net->ieee80211_ptr))->bandroid_scan = _TRUE;
-#endif //CONFIG_IOCTL_CFG80211
-#endif //CONFIG_PLATFORM_MSTAR_TITANIA12
 		break;
 	case ANDROID_WIFI_CMD_SCAN_PASSIVE:
-		//rtw_set_scan_mode((_adapter *)rtw_netdev_priv(net), SCAN_PASSIVE);
 		break;
-
 	case ANDROID_WIFI_CMD_RSSI:
 		bytes_written = rtw_android_get_rssi(net, command, priv_cmd.total_len);
 		break;
 	case ANDROID_WIFI_CMD_LINKSPEED:
 		bytes_written = rtw_android_get_link_speed(net, command, priv_cmd.total_len);
 		break;
-
 	case ANDROID_WIFI_CMD_MACADDR:
 		bytes_written = rtw_android_get_macaddr(net, command, priv_cmd.total_len);
 		break;
-
 	case ANDROID_WIFI_CMD_BLOCK:
 		bytes_written = rtw_android_set_block(net, command, priv_cmd.total_len);
 		break;
-
 	case ANDROID_WIFI_CMD_RXFILTER_START:
-		//bytes_written = net_os_set_packet_filter(net, 1);
 		break;
 	case ANDROID_WIFI_CMD_RXFILTER_STOP:
-		//bytes_written = net_os_set_packet_filter(net, 0);
 		break;
 	case ANDROID_WIFI_CMD_RXFILTER_ADD:
-		//int filter_num = *(command + strlen(CMD_RXFILTER_ADD) + 1) - '0';
-		//bytes_written = net_os_rxfilter_add_remove(net, TRUE, filter_num);
 		break;
 	case ANDROID_WIFI_CMD_RXFILTER_REMOVE:
-		//int filter_num = *(command + strlen(CMD_RXFILTER_REMOVE) + 1) - '0';
-		//bytes_written = net_os_rxfilter_add_remove(net, FALSE, filter_num);
 		break;
-
 	case ANDROID_WIFI_CMD_BTCOEXSCAN_START:
-		/* TBD: BTCOEXSCAN-START */
 		break;
 	case ANDROID_WIFI_CMD_BTCOEXSCAN_STOP:
-		/* TBD: BTCOEXSCAN-STOP */
 		break;
 	case ANDROID_WIFI_CMD_BTCOEXMODE:
-		#if 0
-		uint mode = *(command + strlen(CMD_BTCOEXMODE) + 1) - '0';
-		if (mode == 1)
-			net_os_set_packet_filter(net, 0); /* DHCP starts */
-		else
-			net_os_set_packet_filter(net, 1); /* DHCP ends */
-#ifdef WL_CFG80211
-		bytes_written = wl_cfg80211_set_btcoex_dhcp(net, command);
-#endif
-		#endif
 		break;
-
 	case ANDROID_WIFI_CMD_SETSUSPENDOPT:
-		//bytes_written = wl_android_set_suspendopt(net, command, priv_cmd.total_len);
 		break;
-
 	case ANDROID_WIFI_CMD_SETBAND:
 	{
 		uint band = *(command + strlen("SETBAND") + 1) - '0';
@@ -465,41 +429,27 @@ int rtw_android_priv_cmd(struct net_devi
 		break;
 	}
 	case ANDROID_WIFI_CMD_GETBAND:
-		//bytes_written = wl_android_get_band(net, command, priv_cmd.total_len);
 		break;
-
 	case ANDROID_WIFI_CMD_COUNTRY:
 		bytes_written = rtw_android_set_country(net, command, priv_cmd.total_len);
 		break;
-
 #ifdef PNO_SUPPORT
 	case ANDROID_WIFI_CMD_PNOSSIDCLR_SET:
-		//bytes_written = dhd_dev_pno_reset(net);
 		break;
 	case ANDROID_WIFI_CMD_PNOSETUP_SET:
-		//bytes_written = wl_android_set_pno_setup(net, command, priv_cmd.total_len);
 		break;
 	case ANDROID_WIFI_CMD_PNOENABLE_SET:
-		//uint pfn_enabled = *(command + strlen(CMD_PNOENABLE_SET) + 1) - '0';
-		//bytes_written = dhd_dev_pno_enable(net, pfn_enabled);
 		break;
 #endif
-
 	case ANDROID_WIFI_CMD_P2P_DEV_ADDR:
 		bytes_written = rtw_android_get_p2p_dev_addr(net, command, priv_cmd.total_len);
 		break;
 	case ANDROID_WIFI_CMD_P2P_SET_NOA:
-		//int skip = strlen(CMD_P2P_SET_NOA) + 1;
-		//bytes_written = wl_cfg80211_set_p2p_noa(net, command + skip, priv_cmd.total_len - skip);
 		break;
 	case ANDROID_WIFI_CMD_P2P_GET_NOA:
-		//bytes_written = wl_cfg80211_get_p2p_noa(net, command, priv_cmd.total_len);
 		break;
 	case ANDROID_WIFI_CMD_P2P_SET_PS:
-		//int skip = strlen(CMD_P2P_SET_PS) + 1;
-		//bytes_written = wl_cfg80211_set_p2p_ps(net, command + skip, priv_cmd.total_len - skip);
 		break;
-
 #ifdef CONFIG_IOCTL_CFG80211
 	case ANDROID_WIFI_CMD_SET_AP_WPS_P2P_IE:
 	{
@@ -523,7 +473,6 @@ int rtw_android_priv_cmd(struct net_devi
 		pwfd_info->wfd_enable = _TRUE;
 		break;
 	}
-
 	case ANDROID_WIFI_CMD_WFD_DISABLE:
 	{
 		//	Commented by Albert 2012/07/24
@@ -551,11 +500,7 @@ int rtw_android_priv_cmd(struct net_devi
 		break;
 	}
 	case ANDROID_WIFI_CMD_WFD_SET_MAX_TPUT:
-	{
-
-
 		break;
-	}
 	case ANDROID_WIFI_CMD_WFD_SET_DEVTYPE:
 	{
 		//	Commented by Albert 2012/08/28
