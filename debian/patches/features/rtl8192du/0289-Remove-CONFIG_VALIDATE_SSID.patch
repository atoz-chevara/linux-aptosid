From 6de9582c6fc069ac6b53d63ccba513b88688af9e Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sat, 15 Mar 2014 15:24:51 -0500
Subject: [PATCH 289/390] Remove CONFIG_VALIDATE_SSID

This may be needed by Android.

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ioctl_set.c    | 8 --------
 include/drv_conf.h      | 5 -----
 os_dep/ioctl_cfg80211.c | 9 +--------
 os_dep/ioctl_linux.c    | 8 +-------
 4 files changed, 2 insertions(+), 28 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
+++ b/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
@@ -330,14 +330,6 @@ handle_tkip_countermeasure:
 			goto release_mlme_lock;
 		}
 	}
-
-	#ifdef CONFIG_VALIDATE_SSID
-	if (rtw_validate_ssid(ssid) == false) {
-		status = _FAIL;
-		goto release_mlme_lock;
-	}
-	#endif
-
 	memcpy(&pmlmepriv->assoc_ssid, ssid, sizeof(struct ndis_802_11_ssid));
 	pmlmepriv->assoc_by_bssid = false;
 
--- a/drivers/staging/rtl8192du/include/drv_conf.h
+++ b/drivers/staging/rtl8192du/include/drv_conf.h
@@ -19,11 +19,6 @@
 
 
 #ifdef CONFIG_ANDROID
-/* Some Android build will restart the UI while non-printable ascii is passed */
-/* between java and c/c++ layer (JNI). We force CONFIG_VALIDATE_SSID */
-/* for Android here. If you are sure there is no risk on your system about this, */
-/* mask this macro define to support non-printable ascii ssid. */
-/* define CONFIG_VALIDATE_SSID */
 /* Android expect dbm as the rx signal strength unit */
 #define CONFIG_SIGNAL_DISPLAY_DBM
 #endif
--- a/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_cfg80211.c
@@ -1419,15 +1419,8 @@ void rtw_cfg80211_surveydone_event_callb
 		pnetwork = container_of(plist, struct wlan_network, list);
 
 		/* report network only if the current channel set contains the channel to which this network belongs */
-		if (rtw_ch_set_search_ch(padapter->mlmeextpriv.channel_set, pnetwork->network.Configuration.DSConfig) >= 0
-			#ifdef CONFIG_VALIDATE_SSID
-			&& true == rtw_validate_ssid(&(pnetwork->network.Ssid))
-			#endif
-		)
-		{
-			/* ev=translate_scan(padapter, a, pnetwork, ev, stop); */
+		if (rtw_ch_set_search_ch(padapter->mlmeextpriv.channel_set, pnetwork->network.Configuration.DSConfig) >= 0)
 			rtw_cfg80211_inform_bss(padapter, pnetwork);
-		}
 
 		plist = plist->next;
 
--- a/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
+++ b/drivers/staging/rtl8192du/os_dep/ioctl_linux.c
@@ -1620,14 +1620,8 @@ static int rtw_wx_get_scan(struct net_de
 		pnetwork = container_of(plist, struct wlan_network, list);
 
 		/* report network only if the current channel set contains the channel to which this network belongs */
-		if (rtw_ch_set_search_ch(padapter->mlmeextpriv.channel_set, pnetwork->network.Configuration.DSConfig) >= 0
-			#ifdef CONFIG_VALIDATE_SSID
-			&& true == rtw_validate_ssid(&(pnetwork->network.Ssid))
-			#endif
-		)
-		{
+		if (rtw_ch_set_search_ch(padapter->mlmeextpriv.channel_set, pnetwork->network.Configuration.DSConfig) >= 0)
 			ev = translate_scan(padapter, a, pnetwork, ev, stop);
-		}
 
 		plist = plist->next;
 
