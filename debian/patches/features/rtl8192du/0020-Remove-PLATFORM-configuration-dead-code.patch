From 201cd79c5ad699c7baf7cc0ec95acd424d9ce413 Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 16:12:51 -0500
Subject: [PATCH 020/210] Remove PLATFORM configuration dead code

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_ioctl_set.c  |  125 ----
 core/rtw_mlme_ext.c   |   79 +--
 core/rtw_mp_ioctl.c   | 1597 -------------------------------------------------
 core/rtw_security.c   |   31 +-
 core/rtw_xmit.c       |   32 -
 hal/rtl8192d_phycfg.c |   13 -
 include/rtw_led.h     |    2 +-
 7 files changed, 9 insertions(+), 1870 deletions(-)
 delete mode 100644 core/rtw_mp_ioctl.c

--- a/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
+++ b/drivers/staging/rtl8192du/core/rtw_ioctl_set.c
@@ -213,101 +213,6 @@ _func_exit_;
 	return ret;
 }
 
-#ifdef PLATFORM_WINDOWS
-u8 rtw_pnp_set_power_wakeup(_adapter* padapter)
-{
-	u8 res=_SUCCESS;
-
-_func_enter_;
-
-	RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_err_,("==>rtw_pnp_set_power_wakeup!!!\n"));
-
-	res = rtw_setstandby_cmd(padapter, 0);
-
-	RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_err_,("<==rtw_pnp_set_power_wakeup!!!\n"));
-
-_func_exit_;
-
-	return res;
-}
-
-u8 rtw_pnp_set_power_sleep(_adapter* padapter)
-{
-	u8 res=_SUCCESS;
-
-_func_enter_;
-
-	RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_err_,("==>rtw_pnp_set_power_sleep!!!\n"));
-	//DbgPrint("+rtw_pnp_set_power_sleep\n");
-
-	res = rtw_setstandby_cmd(padapter, 1);
-
-	RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_err_,("<==rtw_pnp_set_power_sleep!!!\n"));
-
-_func_exit_;
-
-	return res;
-}
-
-u8 rtw_set_802_11_reload_defaults(_adapter * padapter, NDIS_802_11_RELOAD_DEFAULTS reloadDefaults)
-{
-_func_enter_;
-
-	switch( reloadDefaults)
-	{
-		case Ndis802_11ReloadWEPKeys:
-			RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("SetInfo OID_802_11_RELOAD_DEFAULTS : Ndis802_11ReloadWEPKeys\n"));
-			break;
-	}
-
-	// SecClearAllKeys(Adapter);
-	// 8711 CAM was not for En/Decrypt only
-	// so, we can't clear all keys.
-	// should we disable WPAcfg (ox0088) bit 1-2, instead of clear all CAM
-
-	//TO DO...
-
-_func_exit_;
-
-	return _TRUE;
-}
-
-u8 set_802_11_test(_adapter* padapter, NDIS_802_11_TEST *test)
-{
-	u8 ret=_TRUE;
-
-_func_enter_;
-
-	switch(test->Type)
-	{
-		case 1:
-			NdisMIndicateStatus(padapter->hndis_adapter, NDIS_STATUS_MEDIA_SPECIFIC_INDICATION, (PVOID)&test->AuthenticationEvent, test->Length - 8);
-			NdisMIndicateStatusComplete(padapter->hndis_adapter);
-			break;
-
-		case 2:
-			NdisMIndicateStatus(padapter->hndis_adapter, NDIS_STATUS_MEDIA_SPECIFIC_INDICATION, (PVOID)&test->RssiTrigger, sizeof(NDIS_802_11_RSSI));
-			NdisMIndicateStatusComplete(padapter->hndis_adapter);
-			break;
-
-		default:
-			ret=_FALSE;
-			break;
-	}
-
-_func_exit_;
-
-	return ret;
-}
-
-u8	rtw_set_802_11_pmkid(_adapter*	padapter, NDIS_802_11_PMKID *pmkid)
-{
-	u8	ret=_SUCCESS;
-
-	return ret;
-}
-
-#endif
 
 u8 rtw_set_802_11_bssid(_adapter* padapter, u8 *bssid)
 {
@@ -369,7 +274,6 @@ _func_enter_;
 handle_tkip_countermeasure:
 	//should we add something here...?
 
-#ifdef PLATFORM_LINUX
 	if (padapter->securitypriv.btkip_countermeasure == _TRUE) {
 		cur_time = rtw_get_current_time();
 
@@ -384,7 +288,6 @@ handle_tkip_countermeasure:
 			goto release_mlme_lock;
 		}
 	}
-#endif
 
 	_rtw_memcpy(&pmlmepriv->assoc_bssid, bssid, ETH_ALEN);
 	pmlmepriv->assoc_by_bssid=_TRUE;
@@ -500,34 +403,7 @@ _func_enter_;
 	}
 
 handle_tkip_countermeasure:
-#ifdef PLATFORM_WINDOWS
-	if (padapter->securitypriv.btkip_countermeasure==_TRUE)
-	{
-		LARGE_INTEGER	sys_time;
-		u32  diff_time,cur_time ;
-		RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid:padapter->securitypriv.btkip_countermeasure==_TRUE\n"));
-		NdisGetCurrentSystemTime(&sys_time);
-		cur_time=(u32)(sys_time.QuadPart/10);  // In micro-second.
-		RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid:cur_time=0x%x\n",cur_time));
-		RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid:psecuritypriv->last_mic_err_time=0x%x\n",padapter->securitypriv.btkip_countermeasure_time));
-		diff_time = cur_time -padapter->securitypriv.btkip_countermeasure_time; // In micro-second.
-		RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid:diff_time=0x%x\n",diff_time));
-
-		if (diff_time > 60000000) {
-			RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid(): countermeasure time >60s.\n"));
-			padapter->securitypriv.btkip_countermeasure=_FALSE;
-			// Update MIC error time.
-			padapter->securitypriv.btkip_countermeasure_time=0;
-		} else {
-			// can't join  in 60 seconds.
-			status = _FAIL;
-			RT_TRACE(_module_rtl871x_ioctl_set_c_,_drv_info_,("rtw_set_802_11_ssid(): countermeasure time <60s.\n"));
-			goto release_mlme_lock;
-		}
-	}
-#endif
 
-#ifdef PLATFORM_LINUX
 	if (padapter->securitypriv.btkip_countermeasure == _TRUE) {
 		cur_time = rtw_get_current_time();
 
@@ -542,7 +418,6 @@ handle_tkip_countermeasure:
 			goto release_mlme_lock;
 		}
 	}
-#endif
 
 	#ifdef CONFIG_VALIDATE_SSID
 	if (rtw_validate_ssid(ssid) == _FALSE) {
--- a/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8192du/core/rtw_mlme_ext.c
@@ -9158,11 +9158,9 @@ void start_clnt_auth(_adapter* padapter)
 	// Because of AP's not receiving deauth before
 	// AP may: 1)not response auth or 2)deauth us after link is complete
 	// issue deauth before issuing auth to deal with the situation
-#ifndef CONFIG_PLATFORM_RTK_DMP
 	//	Commented by Albert 2012/07/21
 	//	For the Win8 P2P connection, it will be hard to have a successful connection if this Wi-Fi doesn't connect to it.
 	issue_deauth(padapter, (&(pmlmeinfo->network))->MacAddress, WLAN_REASON_DEAUTH_LEAVING);
-#endif
 
 	issue_auth(padapter, NULL, 0);
 
@@ -9273,7 +9271,6 @@ static void process_80211d(PADAPTER pada
 		chplan_ap.Len = i;
 
 #ifdef CONFIG_DEBUG_RTL871X
-#ifdef PLATFORM_LINUX
 		i = 0;
 		printk("%s: AP[%s] channel plan {", __func__, bssid->Ssid.Ssid);
 		while ((i < chplan_ap.Len) && (chplan_ap.Channel[i] != 0))
@@ -9283,11 +9280,9 @@ static void process_80211d(PADAPTER pada
 		}
 		printk("}\n");
 #endif
-#endif
 
 		_rtw_memcpy(chplan_sta, pmlmeext->channel_set, sizeof(chplan_sta));
 #ifdef CONFIG_DEBUG_RTL871X
-#ifdef PLATFORM_LINUX
 		i = 0;
 		printk("%s: STA channel plan {", __func__);
 		while ((i < MAX_CHANNEL_NUM) && (chplan_sta[i].ChannelNum != 0))
@@ -9297,7 +9292,6 @@ static void process_80211d(PADAPTER pada
 		}
 		printk("}\n");
 #endif
-#endif
 
 		_rtw_memset(pmlmeext->channel_set, 0, sizeof(pmlmeext->channel_set));
 		chplan_new = pmlmeext->channel_set;
@@ -9449,7 +9443,6 @@ static void process_80211d(PADAPTER pada
 		pmlmeext->update_channel_plan_by_ap_done = 1;
 
 #ifdef CONFIG_DEBUG_RTL871X
-#ifdef PLATFORM_LINUX
 		k = 0;
 		printk("%s: new STA channel plan {", __func__);
 		while ((k < MAX_CHANNEL_NUM) && (chplan_new[k].ChannelNum != 0))
@@ -9459,7 +9452,6 @@ static void process_80211d(PADAPTER pada
 		}
 		printk("}\n");
 #endif
-#endif
 
 	}
 
@@ -10284,26 +10276,6 @@ void survey_timer_hdl(_adapter *padapter
 	struct wifidirect_info *pwdinfo= &(padapter->wdinfo);
 #endif
 
-	//DBG_871X("marc: survey timer\n");
-#ifdef PLATFORM_FREEBSD
-	rtw_mtx_lock(NULL);
-	 if (callout_pending(&padapter->mlmeextpriv.survey_timer.callout)) {
-		 /* callout was reset */
-		 //mtx_unlock(&sc->sc_mtx);
-		 rtw_mtx_unlock(NULL);
-		 return;
-	 }
-	 if (!callout_active(&padapter->mlmeextpriv.survey_timer.callout)) {
-		 /* callout was stopped */
-		 //mtx_unlock(&sc->sc_mtx);
-		 rtw_mtx_unlock(NULL);
-		 return;
-	 }
-	 callout_deactivate(&padapter->mlmeextpriv.survey_timer.callout);
-
-
-#endif
-
 	//issue rtw_sitesurvey_cmd
 	if (pmlmeext->sitesurvey_res.state > SCAN_START)
 	{
@@ -10356,40 +10328,13 @@ void survey_timer_hdl(_adapter *padapter
 
 
 exit_survey_timer_hdl:
-#ifdef PLATFORM_FREEBSD
-		rtw_mtx_unlock(NULL);
-#endif
-
 	return;
 }
 
 void link_timer_hdl(_adapter *padapter)
 {
-	//static unsigned int		rx_pkt = 0;
-	//static u64				tx_cnt = 0;
-	//struct xmit_priv		*pxmitpriv = &(padapter->xmitpriv);
 	struct mlme_ext_priv	*pmlmeext = &padapter->mlmeextpriv;
 	struct mlme_ext_info	*pmlmeinfo = &(pmlmeext->mlmext_info);
-	//struct sta_priv		*pstapriv = &padapter->stapriv;
-
-#ifdef PLATFORM_FREEBSD
-	rtw_mtx_lock(NULL);
-	 if (callout_pending(&padapter->mlmeextpriv.survey_timer.callout)) {
-		 /* callout was reset */
-		 //mtx_unlock(&sc->sc_mtx);
-		 rtw_mtx_unlock(NULL);
-		 return;
-	 }
-	 if (!callout_active(&padapter->mlmeextpriv.survey_timer.callout)) {
-		 /* callout was stopped */
-		 //mtx_unlock(&sc->sc_mtx);
-		 rtw_mtx_unlock(NULL);
-		 return;
-	 }
-	 callout_deactivate(&padapter->mlmeextpriv.survey_timer.callout);
-
-
-#endif
 
 	if (pmlmeinfo->state & WIFI_FW_AUTH_NULL)
 	{
@@ -10400,31 +10345,19 @@ void link_timer_hdl(_adapter *padapter)
 	else if (pmlmeinfo->state & WIFI_FW_AUTH_STATE)
 	{
 		//re-auth timer
-		if (++pmlmeinfo->reauth_count > REAUTH_LIMIT)
-		{
-			//if (pmlmeinfo->auth_algo != dot11AuthAlgrthm_Auto)
-			//{
-				pmlmeinfo->state = 0;
-				report_join_res(padapter, -1);
-				return;
-			//}
-			//else
-			//{
-			//	pmlmeinfo->auth_algo = dot11AuthAlgrthm_Shared;
-			//	pmlmeinfo->reauth_count = 0;
-			//}
+		if (++pmlmeinfo->reauth_count > REAUTH_LIMIT) {
+			pmlmeinfo->state = 0;
+			report_join_res(padapter, -1);
+			return;
 		}
 
 		DBG_871X("link_timer_hdl: auth timeout and try again\n");
 		pmlmeinfo->auth_seq = 1;
 		issue_auth(padapter, NULL, 0);
 		set_link_timer(pmlmeext, REAUTH_TO);
-	}
-	else if (pmlmeinfo->state & WIFI_FW_ASSOC_STATE)
-	{
+	} else if (pmlmeinfo->state & WIFI_FW_ASSOC_STATE) {
 		//re-assoc timer
-		if (++pmlmeinfo->reassoc_count > REASSOC_LIMIT)
-		{
+		if (++pmlmeinfo->reassoc_count > REASSOC_LIMIT) {
 			pmlmeinfo->state = WIFI_FW_NULL_STATE;
 			report_join_res(padapter, -2);
 			return;
--- a/drivers/staging/rtl8192du/core/rtw_mp_ioctl.c
+++ /dev/null
@@ -1,1597 +0,0 @@
-/******************************************************************************
- *
- * Copyright(c) 2007 - 2011 Realtek Corporation. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms of version 2 of the GNU General Public License as
- * published by the Free Software Foundation.
- *
- * This program is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
- * more details.
- *
- * You should have received a copy of the GNU General Public License along with
- * this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA
- *
- *
- ******************************************************************************/
-#define _RTW_MP_IOCTL_C_
-
-#include <drv_conf.h>
-#include <osdep_service.h>
-#include <drv_types.h>
-#include <mlme_osdep.h>
-
-//#include <rtw_mp.h>
-#include <rtw_mp_ioctl.h>
-
-
-//****************  oid_rtl_seg_81_85   section start ****************
-NDIS_STATUS oid_rt_wireless_mode_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->information_buf_len < sizeof(u8))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	if (poid_par_priv->type_of_oid == SET_OID) {
-		Adapter->registrypriv.wireless_mode = *(u8*)poid_par_priv->information_buf;
-	} else if (poid_par_priv->type_of_oid == QUERY_OID) {
-		*(u8*)poid_par_priv->information_buf = Adapter->registrypriv.wireless_mode;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		 RT_TRACE(_module_mp_, _drv_info_, ("-query Wireless Mode=%d\n", Adapter->registrypriv.wireless_mode));
-	} else {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-	}
-
-_func_exit_;
-
-	return status;
-}
-//****************  oid_rtl_seg_81_87_80   section start ****************
-NDIS_STATUS oid_rt_pro_write_bb_reg_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	struct bb_reg_param *pbbreg;
-	u16 offset;
-	u32 value;
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_write_bb_reg_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(struct bb_reg_param))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	pbbreg = (struct bb_reg_param *)(poid_par_priv->information_buf);
-
-	offset = (u16)(pbbreg->offset) & 0xFFF; //0ffset :0x800~0xfff
-	if (offset < BB_REG_BASE_ADDR) offset |= BB_REG_BASE_ADDR;
-
-	value = pbbreg->value;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("oid_rt_pro_write_bb_reg_hdl: offset=0x%03X value=0x%08X\n",
-		  offset, value));
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	write_bbreg(Adapter, offset, 0xFFFFFFFF, value);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read_bb_reg_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	struct bb_reg_param *pbbreg;
-	u16 offset;
-	u32 value;
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_read_bb_reg_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(struct bb_reg_param))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	pbbreg = (struct bb_reg_param *)(poid_par_priv->information_buf);
-
-	offset = (u16)(pbbreg->offset) & 0xFFF; //0ffset :0x800~0xfff
-	if (offset < BB_REG_BASE_ADDR) offset |= BB_REG_BASE_ADDR;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	value = read_bbreg(Adapter, offset, 0xFFFFFFFF);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	pbbreg->value = value;
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("-oid_rt_pro_read_bb_reg_hdl: offset=0x%03X value:0x%08X\n",
-		  offset, value));
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_write_rf_reg_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	struct rf_reg_param *pbbreg;
-	u8 path;
-	u8 offset;
-	u32 value;
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_write_rf_reg_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(struct rf_reg_param))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	pbbreg = (struct rf_reg_param *)(poid_par_priv->information_buf);
-
-	if (pbbreg->path >= MAX_RF_PATH_NUMS)
-		return NDIS_STATUS_NOT_ACCEPTED;
-	if (pbbreg->offset > 0xFF)
-		return NDIS_STATUS_NOT_ACCEPTED;
-	if (pbbreg->value > 0xFFFFF)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	path = (u8)pbbreg->path;
-	offset = (u8)pbbreg->offset;
-	value = pbbreg->value;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("oid_rt_pro_write_rf_reg_hdl: path=%d offset=0x%02X value=0x%05X\n",
-		  path, offset, value));
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	write_rfreg(Adapter, path, offset, value);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read_rf_reg_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	struct rf_reg_param *pbbreg;
-	u8 path;
-	u8 offset;
-	u32 value;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_read_rf_reg_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(struct rf_reg_param))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	pbbreg = (struct rf_reg_param *)(poid_par_priv->information_buf);
-
-	if (pbbreg->path >= MAX_RF_PATH_NUMS)
-		return NDIS_STATUS_NOT_ACCEPTED;
-	if (pbbreg->offset > 0xFF)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	path = (u8)pbbreg->path;
-	offset = (u8)pbbreg->offset;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	value = read_rfreg(Adapter, path, offset);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	pbbreg->value = value;
-
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("-oid_rt_pro_read_rf_reg_hdl: path=%d offset=0x%02X value=0x%05X\n",
-		  path, offset, value));
-
-_func_exit_;
-
-	return status;
-}
-//****************  oid_rtl_seg_81_87_00   section end****************
-//------------------------------------------------------------------------------
-
-//****************  oid_rtl_seg_81_80_00   section start ****************
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_data_rate_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		ratevalue;//4
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("+oid_rt_pro_set_data_rate_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len != sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	ratevalue = *((u32*)poid_par_priv->information_buf);//4
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("oid_rt_pro_set_data_rate_hdl: data rate idx=%d\n", ratevalue));
-	if (ratevalue >= MPT_RATE_LAST)
-		return NDIS_STATUS_INVALID_DATA;
-
-	Adapter->mppriv.rateidx = ratevalue;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetDataRate(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_start_test_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		mode;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_start_test_hdl\n"));
-
-	if (Adapter->registrypriv.mp_mode == 0)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	//IQCalibrateBcut(Adapter);
-
-	mode = *((u32*)poid_par_priv->information_buf);
-	Adapter->mppriv.mode = mode;// 1 for loopback
-
-	if (mp_start_test(Adapter) == _FAIL) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		goto exit;
-	}
-
-exit:
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("-oid_rt_pro_start_test_hdl: mp_mode=%d\n", Adapter->mppriv.mode));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_stop_test_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+Set OID_RT_PRO_STOP_TEST\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	mp_stop_test(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("-Set OID_RT_PRO_STOP_TEST\n"));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_channel_direct_call_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		Channel;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_set_channel_direct_call_hdl\n"));
-
-	if (poid_par_priv->information_buf_len != sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	if (poid_par_priv->type_of_oid == QUERY_OID) {
-		*((u32*)poid_par_priv->information_buf) = Adapter->mppriv.channel;
-		return NDIS_STATUS_SUCCESS;
-	}
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	Channel = *((u32*)poid_par_priv->information_buf);
-	RT_TRACE(_module_mp_, _drv_notice_, ("oid_rt_pro_set_channel_direct_call_hdl: Channel=%d\n", Channel));
-	if (Channel > 14)
-		return NDIS_STATUS_NOT_ACCEPTED;
-	Adapter->mppriv.channel = Channel;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetChannel(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_set_bandwidth_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u16		bandwidth;
-	u16		channel_offset;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("+oid_rt_set_bandwidth_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	bandwidth = *((u32*)poid_par_priv->information_buf);//4
-	channel_offset = HAL_PRIME_CHNL_OFFSET_DONT_CARE;
-
-	if (bandwidth != HT_CHANNEL_WIDTH_40)
-		bandwidth = HT_CHANNEL_WIDTH_20;
-	padapter->mppriv.bandwidth = (u8)bandwidth;
-	padapter->mppriv.prime_channel_offset = (u8)channel_offset;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetBandwidth(padapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("-oid_rt_set_bandwidth_hdl: bandwidth=%d channel_offset=%d\n",
-		  bandwidth, channel_offset));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_antenna_bb_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		antenna;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_set_antenna_bb_hdl\n"));
-
-	if (poid_par_priv->information_buf_len != sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	if (poid_par_priv->type_of_oid == SET_OID)
-	{
-		antenna = *(u32*)poid_par_priv->information_buf;
-
-		Adapter->mppriv.antenna_tx = (u16)((antenna & 0xFFFF0000) >> 16);
-		Adapter->mppriv.antenna_rx = (u16)(antenna & 0x0000FFFF);
-		RT_TRACE(_module_mp_, _drv_notice_,
-			 ("oid_rt_pro_set_antenna_bb_hdl: tx_ant=0x%04x rx_ant=0x%04x\n",
-			  Adapter->mppriv.antenna_tx, Adapter->mppriv.antenna_rx));
-
-		_irqlevel_changed_(&oldirql, LOWER);
-		SetAntenna(Adapter);
-		_irqlevel_changed_(&oldirql, RAISE);
-	} else {
-		antenna = (Adapter->mppriv.antenna_tx << 16)|Adapter->mppriv.antenna_rx;
-		*(u32*)poid_par_priv->information_buf = antenna;
-	}
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_tx_power_control_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		tx_pwr_idx;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_, ("+oid_rt_pro_set_tx_power_control_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len != sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	tx_pwr_idx = *((u32*)poid_par_priv->information_buf);
-	if (tx_pwr_idx > MAX_TX_PWR_INDEX_N_MODE)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	Adapter->mppriv.txpoweridx = (u8)tx_pwr_idx;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("oid_rt_pro_set_tx_power_control_hdl: idx=0x%2x\n",
-		  Adapter->mppriv.txpoweridx));
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetTxPower(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-
-//------------------------------------------------------------------------------
-//****************  oid_rtl_seg_81_80_20   section start ****************
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_query_tx_packet_sent_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid !=QUERY_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if (poid_par_priv->information_buf_len == sizeof(ULONG)) {
-		*(ULONG*)poid_par_priv->information_buf =  Adapter->mppriv.tx_pktcount;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	} else {
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_query_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != QUERY_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	RT_TRACE(_module_mp_, _drv_alert_, ("===> oid_rt_pro_query_rx_packet_received_hdl.\n"));
-	if (poid_par_priv->information_buf_len == sizeof(ULONG)) {
-		*(ULONG*)poid_par_priv->information_buf =  Adapter->mppriv.rx_pktcount;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		RT_TRACE(_module_mp_, _drv_alert_, ("recv_ok:%d \n",Adapter->mppriv.rx_pktcount));
-	} else {
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_query_rx_packet_crc32_error_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != QUERY_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-	RT_TRACE(_module_mp_, _drv_alert_, ("===> oid_rt_pro_query_rx_packet_crc32_error_hdl.\n"));
-	if (poid_par_priv->information_buf_len == sizeof(ULONG)) {
-		*(ULONG*)poid_par_priv->information_buf =  Adapter->mppriv.rx_crcerrpktcount;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		RT_TRACE(_module_mp_, _drv_alert_, ("recv_err:%d \n",Adapter->mppriv.rx_crcerrpktcount));
-	} else {
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-
-NDIS_STATUS oid_rt_pro_reset_tx_packet_sent_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	RT_TRACE(_module_mp_, _drv_alert_, ("===> oid_rt_pro_reset_tx_packet_sent_hdl.\n"));
-	Adapter->mppriv.tx_pktcount = 0;
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_reset_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-	{
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	if (poid_par_priv->information_buf_len == sizeof(ULONG)) {
-		Adapter->mppriv.rx_pktcount = 0;
-		Adapter->mppriv.rx_crcerrpktcount = 0;
-	} else {
-		status = NDIS_STATUS_INVALID_LENGTH;
-	}
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_reset_phy_rx_packet_count_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	ResetPhyRxPktCount(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_phy_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_, ("+oid_rt_get_phy_rx_packet_received_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len != sizeof(ULONG))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	*(ULONG*)poid_par_priv->information_buf = GetPhyRxPktReceived(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("-oid_rt_get_phy_rx_packet_received_hdl: recv_ok=%d\n", *(ULONG*)poid_par_priv->information_buf));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_phy_rx_packet_crc32_error_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_, ("+oid_rt_get_phy_rx_packet_crc32_error_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-
-	if (poid_par_priv->information_buf_len != sizeof(ULONG))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	*(ULONG*)poid_par_priv->information_buf = GetPhyRxPktCRC32Error(Adapter);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	RT_TRACE(_module_mp_, _drv_info_, ("-oid_rt_get_phy_rx_packet_crc32_error_hdl: recv_err=%d\n", *(ULONG*)poid_par_priv->information_buf));
-
-_func_exit_;
-
-	return status;
-}
-//****************  oid_rtl_seg_81_80_20   section end ****************
-NDIS_STATUS oid_rt_pro_set_continuous_tx_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		bStartTest;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_set_continuous_tx_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	bStartTest = *((u32*)poid_par_priv->information_buf);
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetContinuousTx(Adapter,(u8)bStartTest);
-	if (bStartTest) {
-		struct mp_priv *pmp_priv = &Adapter->mppriv;
-		if (pmp_priv->tx.stop == 0) {
-			pmp_priv->tx.stop = 1;
-			DBG_871X("%s: pkt tx is running...\n", __func__);
-			rtw_msleep_os(5);
-		}
-		pmp_priv->tx.stop = 0;
-		pmp_priv->tx.count = 1;
-		SetPacketTx(Adapter);
-	}
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_single_carrier_tx_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		bStartTest;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_alert_, ("+oid_rt_pro_set_single_carrier_tx_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	bStartTest = *((u32*)poid_par_priv->information_buf);
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetSingleCarrierTx(Adapter, (u8)bStartTest);
-	if (bStartTest) {
-		struct mp_priv *pmp_priv = &Adapter->mppriv;
-		if (pmp_priv->tx.stop == 0) {
-			pmp_priv->tx.stop = 1;
-			DBG_871X("%s: pkt tx is running...\n", __func__);
-			rtw_msleep_os(5);
-		}
-		pmp_priv->tx.stop = 0;
-		pmp_priv->tx.count = 1;
-		SetPacketTx(Adapter);
-	}
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_carrier_suppression_tx_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		bStartTest;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_set_carrier_suppression_tx_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	bStartTest = *((u32*)poid_par_priv->information_buf);
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetCarrierSuppressionTx(Adapter, (u8)bStartTest);
-	if (bStartTest) {
-		struct mp_priv *pmp_priv = &Adapter->mppriv;
-		if (pmp_priv->tx.stop == 0) {
-			pmp_priv->tx.stop = 1;
-			DBG_871X("%s: pkt tx is running...\n", __func__);
-			rtw_msleep_os(5);
-		}
-		pmp_priv->tx.stop = 0;
-		pmp_priv->tx.count = 1;
-		SetPacketTx(Adapter);
-	}
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_single_tone_tx_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u32		bStartTest;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_alert_, ("+oid_rt_pro_set_single_tone_tx_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	bStartTest = *((u32*)poid_par_priv->information_buf);
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	SetSingleToneTx(Adapter,(u8)bStartTest);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_modulation_hdl(struct oid_par_priv* poid_par_priv)
-{
-	return 0;
-}
-
-NDIS_STATUS oid_rt_pro_trigger_gpio_hdl(struct oid_par_priv *poid_par_priv)
-{
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	rtw_hal_set_hwreg(Adapter, HW_VAR_TRIGGER_GPIO_0, 0);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//****************  oid_rtl_seg_81_80_00   section end ****************
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro8711_join_bss_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read_register_hdl(struct oid_par_priv *poid_par_priv)
-{
-	pRW_Reg		RegRWStruct;
-	u32		offset, width;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("+oid_rt_pro_read_register_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	RegRWStruct = (pRW_Reg)poid_par_priv->information_buf;
-	offset = RegRWStruct->offset;
-	width = RegRWStruct->width;
-
-	if (offset > 0xFFF)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	switch (width) {
-		case 1:
-			RegRWStruct->value = rtw_read8(Adapter, offset);
-			break;
-		case 2:
-			RegRWStruct->value = rtw_read16(Adapter, offset);
-			break;
-		default:
-			width = 4;
-			RegRWStruct->value = rtw_read32(Adapter, offset);
-			break;
-	}
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("oid_rt_pro_read_register_hdl: offset:0x%04X value:0x%X\n",
-		  offset, RegRWStruct->value));
-
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	*poid_par_priv->bytes_rw = width;
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_write_register_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	pRW_Reg		RegRWStruct;
-	u32		offset, width, value;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("+oid_rt_pro_write_register_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	RegRWStruct = (pRW_Reg)poid_par_priv->information_buf;
-	offset = RegRWStruct->offset;
-	width = RegRWStruct->width;
-	value = RegRWStruct->value;
-
-	if (offset > 0xFFF)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	switch (RegRWStruct->width)
-	{
-		case 1:
-			if (value > 0xFF) {
-				status = NDIS_STATUS_NOT_ACCEPTED;
-				break;
-			}
-			rtw_write8(padapter, offset, (u8)value);
-			break;
-		case 2:
-			if (value > 0xFFFF) {
-				status = NDIS_STATUS_NOT_ACCEPTED;
-				break;
-			}
-			rtw_write16(padapter, offset, (u16)value);
-			break;
-		case 4:
-			rtw_write32(padapter, offset, value);
-			break;
-		default:
-			status = NDIS_STATUS_NOT_ACCEPTED;
-			break;
-	}
-
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("-oid_rt_pro_write_register_hdl: offset=0x%08X width=%d value=0x%X\n",
-		  offset, width, value));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_burst_read_register_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_burst_write_register_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_write_txcmd_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read16_eeprom_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_write16_eeprom_hdl (struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro8711_wi_poll_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro8711_pkt_loss_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_rd_attrib_mem_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_wr_attrib_mem_hdl (struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS  oid_rt_pro_set_rf_intfs_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_poll_rx_status_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_cfg_debug_message_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_data_rate_ex_hdl(struct oid_par_priv *poid_par_priv)
-{
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+OID_RT_PRO_SET_DATA_RATE_EX\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	if (rtw_setdatarate_cmd(Adapter, poid_par_priv->information_buf) !=_SUCCESS)
-		status = NDIS_STATUS_NOT_ACCEPTED;
-
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//-----------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_thermal_meter_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	u8 thermal = 0;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_get_thermal_meter_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	GetThermalMeter(Adapter, &thermal);
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	*(u32*)poid_par_priv->information_buf = (u32)thermal;
-	*poid_par_priv->bytes_rw = sizeof(u32);
-
-_func_exit_;
-
-	return status;
-}
-//-----------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read_tssi_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_power_tracking_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-
-_func_enter_;
-
-	if (poid_par_priv->information_buf_len < sizeof(u8))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	if (poid_par_priv->type_of_oid == SET_OID) {
-		u8 enable;
-
-		enable = *(u8*)poid_par_priv->information_buf;
-		RT_TRACE(_module_mp_, _drv_notice_,
-			 ("+oid_rt_pro_set_power_tracking_hdl: enable=%d\n", enable));
-
-		SetPowerTracking(Adapter, enable);
-	} else {
-		GetPowerTracking(Adapter, (u8*)poid_par_priv->information_buf);
-	}
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//-----------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_basic_rate_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_qry_pwrstate_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_set_pwrstate_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_h2c_set_rate_table_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_h2c_get_rate_table_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-
-//****************  oid_rtl_seg_87_12_00   section start ****************
-NDIS_STATUS oid_rt_pro_encryption_ctrl_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_add_sta_info_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_dele_sta_info_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-
-NDIS_STATUS oid_rt_pro_query_dr_variable_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_rx_packet_type_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return NDIS_STATUS_SUCCESS;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_read_efuse_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	PEFUSE_ACCESS_STRUCT pefuse;
-	u8 *data;
-	u16 addr = 0, cnts = 0, max_available_size = 0;
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(EFUSE_ACCESS_STRUCT))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	pefuse = (PEFUSE_ACCESS_STRUCT)poid_par_priv->information_buf;
-	addr = pefuse->start_addr;
-	cnts = pefuse->cnts;
-	data = pefuse->data;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		("+oid_rt_pro_read_efuse_hd: buf_len=%ld addr=%d cnts=%d\n",
-		 poid_par_priv->information_buf_len, addr, cnts));
-
-	EFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_AVAILABLE_EFUSE_BYTES_TOTAL, (PVOID)&max_available_size, _FALSE);
-
-	if ((addr + cnts) > max_available_size) {
-		RT_TRACE(_module_mp_, _drv_err_, ("!oid_rt_pro_read_efuse_hdl: parameter error!\n"));
-		return NDIS_STATUS_NOT_ACCEPTED;
-	}
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	if (rtw_efuse_access(Adapter, _FALSE, addr, cnts, data) == _FAIL) {
-		RT_TRACE(_module_mp_, _drv_err_, ("!oid_rt_pro_read_efuse_hdl: rtw_efuse_access FAIL!\n"));
-		status = NDIS_STATUS_FAILURE;
-	} else
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_write_efuse_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL oldirql;
-#endif
-	PEFUSE_ACCESS_STRUCT pefuse;
-	u8 *data;
-	u16 addr = 0, cnts = 0, max_available_size = 0;
-	NDIS_STATUS status = NDIS_STATUS_SUCCESS;
-	PADAPTER Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	pefuse = (PEFUSE_ACCESS_STRUCT)poid_par_priv->information_buf;
-	addr = pefuse->start_addr;
-	cnts = pefuse->cnts;
-	data = pefuse->data;
-
-	RT_TRACE(_module_mp_, _drv_notice_,
-		 ("+oid_rt_pro_write_efuse_hdl: buf_len=%ld addr=0x%04x cnts=%d\n",
-		  poid_par_priv->information_buf_len, addr, cnts));
-
-	EFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_AVAILABLE_EFUSE_BYTES_TOTAL, (PVOID)&max_available_size, _FALSE);
-
-	if ((addr + cnts) > max_available_size) {
-		RT_TRACE(_module_mp_, _drv_err_, ("!oid_rt_pro_write_efuse_hdl: parameter error"));
-		return NDIS_STATUS_NOT_ACCEPTED;
-	}
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	if (rtw_efuse_access(Adapter, _TRUE, addr, cnts, data) == _FAIL)
-		status = NDIS_STATUS_FAILURE;
-	_irqlevel_changed_(&oldirql, RAISE);
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_rw_efuse_pgpkt_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	PPGPKT_STRUCT	ppgpkt;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-//	RT_TRACE(_module_mp_, _drv_info_, ("+oid_rt_pro_rw_efuse_pgpkt_hdl\n"));
-
-	*poid_par_priv->bytes_rw = 0;
-
-	if (poid_par_priv->information_buf_len < sizeof(PGPKT_STRUCT))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	ppgpkt = (PPGPKT_STRUCT)poid_par_priv->information_buf;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	if (poid_par_priv->type_of_oid == QUERY_OID)
-	{
-		RT_TRACE(_module_mp_, _drv_notice_,
-			("oid_rt_pro_rw_efuse_pgpkt_hdl: Read offset=0x%x\n",\
-			ppgpkt->offset));
-
-		Efuse_PowerSwitch(Adapter, _FALSE, _TRUE);
-		if (Efuse_PgPacketRead(Adapter, ppgpkt->offset, ppgpkt->data, _FALSE) == _TRUE)
-			*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		else
-			status = NDIS_STATUS_FAILURE;
-		Efuse_PowerSwitch(Adapter, _FALSE, _FALSE);
-	} else {
-		RT_TRACE(_module_mp_, _drv_notice_,
-			("oid_rt_pro_rw_efuse_pgpkt_hdl: Write offset=0x%x word_en=0x%x\n",\
-			ppgpkt->offset, ppgpkt->word_en));
-
-		Efuse_PowerSwitch(Adapter, _TRUE, _TRUE);
-		if (Efuse_PgPacketWrite(Adapter, ppgpkt->offset, ppgpkt->word_en, ppgpkt->data, _FALSE) == _TRUE)
-			*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-		else
-			status = NDIS_STATUS_FAILURE;
-		Efuse_PowerSwitch(Adapter, _TRUE, _FALSE);
-	}
-
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("-oid_rt_pro_rw_efuse_pgpkt_hdl: status=0x%08X\n", status));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_efuse_current_size_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u16 size;
-	u8 ret;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len <sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-	ret = efuse_GetCurrentSize(Adapter, &size);
-	_irqlevel_changed_(&oldirql, RAISE);
-	if (ret == _SUCCESS) {
-		*(u32*)poid_par_priv->information_buf = size;
-		*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-	} else
-		status = NDIS_STATUS_FAILURE;
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_efuse_max_size_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != QUERY_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(u32))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	*(u32*)poid_par_priv->information_buf = efuse_GetMaxSize(Adapter);
-	*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("-oid_rt_get_efuse_max_size_hdl: size=%d status=0x%08X\n",
-		  *(int*)poid_par_priv->information_buf, status));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_efuse_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status;
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_info_, ("+oid_rt_pro_efuse_hdl\n"));
-
-	if (poid_par_priv->type_of_oid == QUERY_OID)
-		status = oid_rt_pro_read_efuse_hdl(poid_par_priv);
-	else
-		status = oid_rt_pro_write_efuse_hdl(poid_par_priv);
-
-	RT_TRACE(_module_mp_, _drv_info_, ("-oid_rt_pro_efuse_hdl: status=0x%08X\n", status));
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_pro_efuse_map_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u8		*data;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	PADAPTER	Adapter = (PADAPTER)(poid_par_priv->adapter_context);
-	u16	mapLen=0;
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_pro_efuse_map_hdl\n"));
-
-	EFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_EFUSE_MAP_LEN, (PVOID)&mapLen, _FALSE);
-
-	*poid_par_priv->bytes_rw = 0;
-
-	if (poid_par_priv->information_buf_len < mapLen)
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	data = (u8*)poid_par_priv->information_buf;
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	if (poid_par_priv->type_of_oid == QUERY_OID)
-	{
-		RT_TRACE(_module_mp_, _drv_info_,
-			("oid_rt_pro_efuse_map_hdl: READ\n"));
-
-		if (rtw_efuse_map_read(Adapter, 0, mapLen, data) == _SUCCESS)
-			*poid_par_priv->bytes_rw = mapLen;
-		else {
-			RT_TRACE(_module_mp_, _drv_err_,
-				("oid_rt_pro_efuse_map_hdl: READ fail\n"));
-			status = NDIS_STATUS_FAILURE;
-		}
-	} else {
-		// SET_OID
-		RT_TRACE(_module_mp_, _drv_info_,
-			("oid_rt_pro_efuse_map_hdl: WRITE\n"));
-
-		if (rtw_efuse_map_write(Adapter, 0, mapLen, data) == _SUCCESS)
-			*poid_par_priv->bytes_rw = mapLen;
-		else {
-			RT_TRACE(_module_mp_, _drv_err_,
-				("oid_rt_pro_efuse_map_hdl: WRITE fail\n"));
-			status = NDIS_STATUS_FAILURE;
-		}
-	}
-
-	_irqlevel_changed_(&oldirql, RAISE);
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("-oid_rt_pro_efuse_map_hdl: status=0x%08X\n", status));
-
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_set_crystal_cap_hdl(struct oid_par_priv *poid_par_priv)
-{
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-	return status;
-}
-
-NDIS_STATUS oid_rt_set_rx_packet_type_hdl(struct oid_par_priv *poid_par_priv)
-{
-#ifdef PLATFORM_OS_XP
-	_irqL		oldirql;
-#endif
-	u8		rx_pkt_type;
-//	u32		rcr_val32;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-//	PADAPTER	padapter = (PADAPTER)(poid_par_priv->adapter_context);
-
-_func_enter_;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+oid_rt_set_rx_packet_type_hdl\n"));
-
-	if (poid_par_priv->type_of_oid != SET_OID)
-		return NDIS_STATUS_NOT_ACCEPTED;
-
-	if (poid_par_priv->information_buf_len < sizeof(u8))
-		return NDIS_STATUS_INVALID_LENGTH;
-
-	rx_pkt_type = *((u8*)poid_par_priv->information_buf);//4
-
-	RT_TRACE(_module_mp_, _drv_info_, ("rx_pkt_type: %x\n",rx_pkt_type ));
-_func_exit_;
-
-	return status;
-}
-
-NDIS_STATUS oid_rt_pro_set_tx_agc_offset_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-
-NDIS_STATUS oid_rt_pro_set_pkt_test_mode_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
-
-unsigned int mp_ioctl_xmit_packet_hdl(struct oid_par_priv *poid_par_priv)
-{
-	PMP_XMIT_PARM pparm;
-	PADAPTER padapter;
-	struct mp_priv *pmp_priv;
-	struct pkt_attrib *pattrib;
-
-	RT_TRACE(_module_mp_, _drv_notice_, ("+%s\n", __func__));
-
-	pparm = (PMP_XMIT_PARM)poid_par_priv->information_buf;
-	padapter = (PADAPTER)poid_par_priv->adapter_context;
-	pmp_priv = &padapter->mppriv;
-
-	if (poid_par_priv->type_of_oid == QUERY_OID) {
-		pparm->enable = !pmp_priv->tx.stop;
-		pparm->count = pmp_priv->tx.sended;
-	} else {
-		if (pparm->enable == 0) {
-			pmp_priv->tx.stop = 1;
-		} else if (pmp_priv->tx.stop == 1) {
-			pmp_priv->tx.stop = 0;
-			pmp_priv->tx.count = pparm->count;
-			pmp_priv->tx.payload = pparm->payload_type;
-			pattrib = &pmp_priv->tx.attrib;
-			pattrib->pktlen = pparm->length;
-			_rtw_memcpy(pattrib->dst, pparm->da, ETH_ALEN);
-			SetPacketTx(padapter);
-		} else
-			return NDIS_STATUS_FAILURE;
-	}
-
-	return NDIS_STATUS_SUCCESS;
-}
-
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_set_power_down_hdl(struct oid_par_priv *poid_par_priv)
-{
-	u8		bpwrup;
-	NDIS_STATUS	status = NDIS_STATUS_SUCCESS;
-
-_func_enter_;
-
-	if (poid_par_priv->type_of_oid != SET_OID) {
-		status = NDIS_STATUS_NOT_ACCEPTED;
-		return status;
-	}
-
-	RT_TRACE(_module_mp_, _drv_info_,
-		 ("\n ===> Setoid_rt_set_power_down_hdl.\n"));
-
-	_irqlevel_changed_(&oldirql, LOWER);
-
-	bpwrup = *(u8 *)poid_par_priv->information_buf;
-	_irqlevel_changed_(&oldirql, RAISE);
-
-
-_func_exit_;
-
-	return status;
-}
-//------------------------------------------------------------------------------
-NDIS_STATUS oid_rt_get_power_mode_hdl(struct oid_par_priv *poid_par_priv)
-{
-	return 0;
-}
--- a/drivers/staging/rtl8192du/core/rtw_security.c
+++ b/drivers/staging/rtl8192du/core/rtw_security.c
@@ -918,13 +918,11 @@ static void next_key(u8 *key, sint round
 static void byte_sub(u8 *in, u8 *out);
 static void shift_row(u8 *in, u8 *out);
 static void mix_column(u8 *in, u8 *out);
-#ifndef PLATFORM_FREEBSD
 static void add_round_key( u8 *shiftrow_in,
                     u8 *mcol_in,
                     u8 *block_in,
                     sint round,
                     u8 *out);
-#endif //PLATFORM_FREEBSD
 static void aes128k128d(u8 *key, u8 *data, u8 *ciphertext);
 
 
@@ -1938,7 +1936,7 @@ _func_exit_;
 exit:
 	return res;
 }
-#ifndef PLATFORM_FREEBSD
+
 /* compress 512-bits */
 static int sha256_compress(struct sha256_state *md, unsigned char *buf)
 {
@@ -2204,7 +2202,7 @@ static void hmac_sha256_vector(u8 *key,
 	_len[1] = 32;
 	sha256_vector(2, _addr, _len, mac);
 }
-#endif //PLATFORM_FREEBSD
+
 /**
  * sha256_prf - SHA256-based Pseudo-Random Function (IEEE 802.11r, 8.5.1.5.2)
  * @key: Key for PRF
@@ -2218,7 +2216,6 @@ static void hmac_sha256_vector(u8 *key,
  * This function is used to derive new, cryptographically separate keys from a
  * given key.
  */
-#ifndef PLATFORM_FREEBSD //Baron
 static void sha256_prf(u8 *key, size_t key_len, char *label,
 		u8 *data, size_t data_len, u8 *buf, size_t buf_len)
 {
@@ -2255,7 +2252,6 @@ static void sha256_prf(u8 *key, size_t k
 		counter++;
 	}
 }
-#endif //PLATFORM_FREEBSD Baron
 
 /* AES tables*/
 const u32 Te0[256] = {
@@ -2434,7 +2430,6 @@ const u8 rcons[] = {
  *
  * @return	the number of rounds for the given cipher key size.
  */
-#ifndef PLATFORM_FREEBSD //Baron
 static void rijndaelKeySetupEnc(u32 rk[/*44*/], const u8 cipherKey[])
 {
 	int i;
@@ -2650,7 +2645,6 @@ static int omac1_aes_128(u8 *key, u8 *da
 {
 	return omac1_aes_128_vector(key, 1, &data, &data_len, mac);
 }
-#endif //PLATFORM_FREEBSD Baron
 
 #ifdef CONFIG_TDLS
 void wpa_tdls_generate_tpk(_adapter *padapter, struct sta_info *psta)
@@ -2822,20 +2816,7 @@ int tdls_verify_mic(u8 *kck, u8 trans_se
 }
 #endif //CONFIG_TDLS
 
-#ifdef PLATFORM_WINDOWS
-void rtw_use_tkipkey_handler (
-	IN	PVOID					SystemSpecific1,
-	IN	PVOID					FunctionContext,
-	IN	PVOID					SystemSpecific2,
-	IN	PVOID					SystemSpecific3
-	)
-#endif
-#ifdef PLATFORM_LINUX
-void rtw_use_tkipkey_handler(void *FunctionContext)
-#endif
-#ifdef PLATFORM_FREEBSD
 void rtw_use_tkipkey_handler(void *FunctionContext)
-#endif
 {
         _adapter *padapter = (_adapter *)FunctionContext;
 
@@ -2844,14 +2825,6 @@ _func_enter_;
 
 	RT_TRACE(_module_rtl871x_security_c_,_drv_err_,("^^^rtw_use_tkipkey_handler ^^^\n"));
 
-/*
-	if(padapter->bDriverStopped ||padapter->bSurpriseRemoved){
-			RT_TRACE(_module_rtl871x_security_c_,_drv_err_,("^^^rtw_use_tkipkey_handler (padapter->bDriverStopped %d)(padapter->bSurpriseRemoved %d)^^^\n",padapter->bDriverStopped,padapter->bSurpriseRemoved));
-
-		return;
-	}
-	*/
-
 	padapter->securitypriv.busetkipkey=_TRUE;
 
 	RT_TRACE(_module_rtl871x_security_c_,_drv_err_,("^^^rtw_use_tkipkey_handler padapter->securitypriv.busetkipkey=%d^^^\n",padapter->securitypriv.busetkipkey));
--- a/drivers/staging/rtl8192du/core/rtw_xmit.c
+++ b/drivers/staging/rtl8192du/core/rtw_xmit.c
@@ -28,17 +28,7 @@
 #include <circ_buf.h>
 #include <ip.h>
 
-#if defined (PLATFORM_LINUX) && defined (PLATFORM_WINDOWS)
-#error "Shall be Linux or Windows, but not both!\n"
-#endif
-
-#ifdef PLATFORM_WINDOWS
-#include <if_ether.h>
-#endif
-
-#ifdef CONFIG_USB_HCI
 #include <usb_ops.h>
-#endif
 
 
 static u8 P802_1H_OUI[P80211_OUI_LEN] = { 0x00, 0x00, 0xf8 };
@@ -2087,9 +2077,7 @@ struct xmit_frame *rtw_alloc_xmitframe(s
 	struct xmit_frame *pxframe = NULL;
 	_list *plist, *phead;
 	_queue *pfree_xmit_queue = &pxmitpriv->free_xmit_queue;
-#ifdef PLATFORM_LINUX
 	_adapter *padapter = pxmitpriv->adapter;
-#endif //PLATFORM_LINUX
 
 _func_enter_;
 
@@ -2137,7 +2125,6 @@ _func_enter_;
 		pxframe->agg_num = 1;
 #endif
 
-#ifdef PLATFORM_LINUX
 #if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,35))
 		if(pxmitpriv->free_xmitframe_cnt==1)
 		{
@@ -2145,7 +2132,6 @@ _func_enter_;
 				rtw_netif_stop_queue(padapter->pnetdev);
 		}
 #endif
-#endif
 
 #ifdef CONFIG_XMIT_ACK
 		pxframe->ack_report = 0;
@@ -2256,18 +2242,6 @@ static struct xmit_frame *dequeue_one_xm
 
 		xmitframe_plist = get_next(xmitframe_plist);
 
-/*#ifdef RTK_DMP_PLATFORM
-#ifdef CONFIG_USB_TX_AGGREGATION
-		if((ptxservq->qcnt>0) && (ptxservq->qcnt<=2))
-		{
-			pxmitframe = NULL;
-
-			tasklet_schedule(&pxmitpriv->xmit_tasklet);
-
-			break;
-		}
-#endif
-#endif*/
 		rtw_list_delete(&pxmitframe->list);
 
 		ptxservq->qcnt--;
@@ -3513,9 +3487,7 @@ void rtw_sctx_init(struct submit_ctx *sc
 {
 	sctx->timeout_ms = timeout_ms;
 	sctx->submit_time= rtw_get_current_time();
-#ifdef PLATFORM_LINUX /* TODO: add condition wating interface for other os */
 	init_completion(&sctx->done);
-#endif
 	sctx->status = RTW_SCTX_SUBMITTED;
 }
 
@@ -3525,7 +3497,6 @@ int rtw_sctx_wait(struct submit_ctx *sct
 	unsigned long expire;
 	int status = 0;
 
-#ifdef PLATFORM_LINUX
 	expire= sctx->timeout_ms ? msecs_to_jiffies(sctx->timeout_ms) : MAX_SCHEDULE_TIMEOUT;
 	if (!wait_for_completion_timeout(&sctx->done, expire)) {
 		/* timeout, do something?? */
@@ -3534,7 +3505,6 @@ int rtw_sctx_wait(struct submit_ctx *sct
 	} else {
 		status = sctx->status;
 	}
-#endif
 
 	if (status == RTW_SCTX_DONE_SUCCESS) {
 		ret = _SUCCESS;
@@ -3564,9 +3534,7 @@ void rtw_sctx_done_err(struct submit_ctx
 		if (rtw_sctx_chk_waring_status(status))
 			DBG_871X("%s status:%d\n", __func__, status);
 		(*sctx)->status = status;
-		#ifdef PLATFORM_LINUX
 		complete(&((*sctx)->done));
-		#endif
 		*sctx = NULL;
 	}
 }
--- a/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
@@ -378,7 +378,6 @@ rtl8192d_PHY_SetBBReg(
  *	01/21/2008	MHC		Create Version 0.
  *
  *---------------------------------------------------------------------------*/
-#ifndef PLATFORM_FREEBSD   //amy, temp remove
 static	u32
 phy_FwRFSerialRead(
 	IN	PADAPTER			Adapter,
@@ -415,9 +414,7 @@ phy_FwRFSerialWrite(
 	IN	u32				Offset,
 	IN	u32				Data	)
 {
-	//RT_ASSERT(FALSE,("deprecate!\n"));
 }
-#endif //PLATFORM_FREEBSD amy, temp remove
 
 /**
 * Function:	phy_RFSerialRead
@@ -3670,7 +3667,6 @@ PHY_SwChnl8192D(	// Call after initializ
 	}
 }
 
-#ifndef PLATFORM_FREEBSD //amy, temp remove
 static	BOOLEAN
 phy_SwChnlStepByStep(
 	IN	PADAPTER	Adapter,
@@ -3698,17 +3694,9 @@ phy_SetSwChnlCmdArray(
 	SwChnlCmd* pCmd;
 
 	if(CmdTable == NULL)
-	{
-		//RT_ASSERT(FALSE, ("phy_SetSwChnlCmdArray(): CmdTable cannot be NULL.\n"));
 		return _FALSE;
-	}
 	if(CmdTableIdx >= CmdTableSz)
-	{
-		//RT_ASSERT(FALSE,
-		//		("phy_SetSwChnlCmdArray(): Access invalid index, please check size of the table, CmdTableIdx:%ld, CmdTableSz:%ld\n",
-		//		CmdTableIdx, CmdTableSz));
 		return _FALSE;
-	}
 
 	pCmd = CmdTable + CmdTableIdx;
 	pCmd->CmdID = CmdID;
@@ -3718,7 +3706,6 @@ phy_SetSwChnlCmdArray(
 
 	return _TRUE;
 }
-#endif  //amy, temp remove
 
 static	void
 phy_FinishSwChnlNow(	// We should not call this function directly
--- a/drivers/staging/rtl8192du/include/rtw_led.h
+++ b/drivers/staging/rtl8192du/include/rtw_led.h
@@ -97,7 +97,7 @@ typedef struct _LED_871x{
 	LED_STATE_871x		BlinkingLedState; // Next state for blinking, either RTW_LED_ON or RTW_LED_OFF are.
 
 	_timer				BlinkTimer; // Timer object for led blinking.
-#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)|| defined PLATFORM_FREEBSD
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
 	_workitem			BlinkWorkItem; // Workitem used by BlinkTimer to manipulate H/W to blink LED.
 #endif
 } LED_871x, *PLED_871x;
