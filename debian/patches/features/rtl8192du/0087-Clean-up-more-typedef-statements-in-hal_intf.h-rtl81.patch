From b6e410117fe4d6d67c917308b3ffa6697f2cb84b Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Sun, 28 Apr 2013 18:16:17 -0500
Subject: [PATCH 087/210] Clean up more typedef statements in hal_intf.h,
 rtl8192d_dm.h, and rtw_iol.h

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 core/rtw_efuse.c      | 14 +++++++-------
 hal/rtl8192d_dm.c     | 11 ++++-------
 hal/rtl8192d_phycfg.c |  2 +-
 hal/usb_halinit.c     |  6 ++----
 include/hal_intf.h    | 26 +++++++++++++++-----------
 include/rtl8192d_dm.h | 16 +++++++---------
 include/rtw_iol.h     | 16 +++-------------
 7 files changed, 39 insertions(+), 52 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_efuse.c
+++ b/drivers/staging/rtl8192du/core/rtw_efuse.c
@@ -829,7 +829,7 @@ efuse_ShadowRead1Byte(
 	u16		Offset,
 	u8		*Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	*Value = pEEPROM->efuse_eeprom_data[Offset];
 
@@ -842,7 +842,7 @@ efuse_ShadowRead2Byte(
 	u16		Offset,
 	u16		*Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	*Value = pEEPROM->efuse_eeprom_data[Offset];
 	*Value |= pEEPROM->efuse_eeprom_data[Offset+1]<<8;
@@ -856,7 +856,7 @@ efuse_ShadowRead4Byte(
 	u16		Offset,
 	u32		*Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	*Value = pEEPROM->efuse_eeprom_data[Offset];
 	*Value |= pEEPROM->efuse_eeprom_data[Offset+1]<<8;
@@ -890,7 +890,7 @@ efuse_ShadowWrite1Byte(
 	u16		Offset,
 	u8		Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	pEEPROM->efuse_eeprom_data[Offset] = Value;
 
@@ -903,7 +903,7 @@ efuse_ShadowWrite2Byte(
 	u16		Offset,
 	u16		Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	pEEPROM->efuse_eeprom_data[Offset] = Value&0x00FF;
 	pEEPROM->efuse_eeprom_data[Offset+1] = Value>>8;
@@ -917,7 +917,7 @@ efuse_ShadowWrite4Byte(
 	u16		Offset,
 	u32		Value)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 
 	pEEPROM->efuse_eeprom_data[Offset] = (u8)(Value&0x000000FF);
 	pEEPROM->efuse_eeprom_data[Offset+1] = (u8)((Value>>8)&0x0000FF);
@@ -947,7 +947,7 @@ void EFUSE_ShadowMapUpdate(
 	u8		efuseType,
 	bool	bPseudoTest)
 {
-	EEPROM_EFUSE_PRIV *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(pAdapter);
 	u16	mapLen=0;
 
 	EFUSE_GetEfuseDefinition(pAdapter, efuseType, TYPE_EFUSE_MAP_LEN, (void *)&mapLen, bPseudoTest);
--- a/drivers/staging/rtl8192du/hal/rtl8192d_dm.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_dm.c
@@ -2335,17 +2335,14 @@ static void	dm_CheckPbcGPIO(PADAPTER pad
 	}
 }
 
-static void
-dm_InitRateAdaptiveMask(
-	PADAPTER	Adapter
-	)
+static void dm_InitRateAdaptiveMask(PADAPTER	Adapter)
 {
 	HAL_DATA_TYPE	*pHalData = GET_HAL_DATA(Adapter);
 	struct dm_priv	*pdmpriv = &pHalData->dmpriv;
-	PRATE_ADAPTIVE	pRA = (PRATE_ADAPTIVE)&pdmpriv->RateAdaptive;
+	struct rate_adaptive *ra = (struct rate_adaptive *)&pdmpriv->RateAdaptive;
 
-	pRA->RATRState = DM_RATR_STA_INIT;
-	pRA->PreRATRState = DM_RATR_STA_INIT;
+	ra->RATRState = DM_RATR_STA_INIT;
+	ra->PreRATRState = DM_RATR_STA_INIT;
 
 	if (pdmpriv->DM_Type == DM_Type_ByDriver)
 		pdmpriv->bUseRAMask = true;
--- a/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
+++ b/drivers/staging/rtl8192du/hal/rtl8192d_phycfg.c
@@ -1392,7 +1392,7 @@ phy_BB8192D_Config_ParaFile(
 	)
 {
 #if MP_DRIVER != 1
-	EEPROM_EFUSE_PRIV	*pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
 #endif
 	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(Adapter);
 	int		rtStatus = _SUCCESS;
--- a/drivers/staging/rtl8192du/hal/usb_halinit.c
+++ b/drivers/staging/rtl8192du/hal/usb_halinit.c
@@ -3149,7 +3149,7 @@ _ReadMACAddress(
 	)
 {
 	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(Adapter);
-	EEPROM_EFUSE_PRIV	*pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
 
 	// Dual MAC should assign diffrent MAC address ,or, it is wil cause hang in single phy mode  zhiyuan 04/07/2010
 	//Temply random assigh mac address for  efuse mac address not ready now
@@ -3383,12 +3383,10 @@ static void _ReadPROMContent(
 	PADAPTER		Adapter
 	)
 {
-	EEPROM_EFUSE_PRIV	*pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
-//	HAL_DATA_TYPE		*pHalData = GET_HAL_DATA(Adapter);
+	struct eeprom_priv *pEEPROM = GET_EEPROM_EFUSE_PRIV(Adapter);
 	u8			PROMContent[HWSET_MAX_SIZE]={0};
 	u8			eeValue;
 	u32			i;
-//	u16			value16;
 
 	eeValue = rtw_read8(Adapter, REG_9346CR);
 	// To check system boot selection.
--- a/drivers/staging/rtl8192du/include/hal_intf.h
+++ b/drivers/staging/rtl8192du/include/hal_intf.h
@@ -227,11 +227,11 @@ struct hal_ops {
 	c2h_id_filter c2h_id_filter_ccx;
 };
 
-typedef	enum _RT_EEPROM_TYPE{
+enum RT_EEPROM_TYPE {
 	EEPROM_93C46,
 	EEPROM_93C56,
 	EEPROM_BOOT_EFUSE,
-}RT_EEPROM_TYPE,*PRT_EEPROM_TYPE;
+};
 
 #define USB_HIGH_SPEED_BULK_SIZE	512
 #define USB_FULL_SPEED_BULK_SIZE	64
@@ -268,12 +268,14 @@ enum HARDWARE_TYPE {
 //
 // RTL8192D Series
 //
-#define IS_HARDWARE_TYPE_8192DE(_Adapter)	(((PADAPTER)_Adapter)->HardwareType==HARDWARE_TYPE_RTL8192DE)
-#define IS_HARDWARE_TYPE_8192DU(_Adapter)	(((PADAPTER)_Adapter)->HardwareType==HARDWARE_TYPE_RTL8192DU)
+#define IS_HARDWARE_TYPE_8192DE(_Adapter)			\
+		(((PADAPTER)_Adapter)->HardwareType==HARDWARE_TYPE_RTL8192DE)
+#define IS_HARDWARE_TYPE_8192DU(_Adapter)			\
+		(((PADAPTER)_Adapter)->HardwareType==HARDWARE_TYPE_RTL8192DU)
 #define	IS_HARDWARE_TYPE_8192D(_Adapter)			\
-(IS_HARDWARE_TYPE_8192DE(_Adapter) || IS_HARDWARE_TYPE_8192DU(_Adapter))
+		(IS_HARDWARE_TYPE_8192DE(_Adapter) ||		\
+		 IS_HARDWARE_TYPE_8192DU(_Adapter))
 
-typedef struct eeprom_priv EEPROM_EFUSE_PRIV, *PEEPROM_EFUSE_PRIV;
 #define GET_EEPROM_EFUSE_PRIV(priv)	(&priv->eeprompriv)
 
 #ifdef CONFIG_WOWLAN
@@ -299,13 +301,13 @@ struct wowlan_ioctl_param{
 	unsigned char pattern[0];
 };
 
-#define Rx_Pairwisekey			BIT(0)
+#define Rx_Pairwisekey				BIT(0)
 #define Rx_GTK					BIT(1)
 #define Rx_DisAssoc				BIT(2)
 #define Rx_DeAuth				BIT(3)
-#define FWDecisionDisconnect	BIT(4)
+#define FWDecisionDisconnect			BIT(4)
 #define Rx_MagicPkt				BIT(5)
-#define FinishBtFwPatch			BIT(7)
+#define FinishBtFwPatch				BIT(7)
 
 #endif // CONFIG_WOWLAN
 
@@ -328,8 +330,10 @@ void rtw_hal_chip_configure(_adapter *pa
 void rtw_hal_read_chip_info(_adapter *padapter);
 void rtw_hal_read_chip_version(_adapter *padapter);
 
-u8 rtw_hal_set_def_var(_adapter *padapter, enum HAL_DEF_VARIABLE eVariable, void * pValue);
-u8 rtw_hal_get_def_var(_adapter *padapter, enum HAL_DEF_VARIABLE eVariable, void * pValue);
+u8 rtw_hal_set_def_var(_adapter *padapter, enum HAL_DEF_VARIABLE eVariable,
+		       void *pValue);
+u8 rtw_hal_get_def_var(_adapter *padapter, enum HAL_DEF_VARIABLE eVariable,
+		       void *pValue);
 
 void rtw_hal_enable_interrupt(_adapter *padapter);
 void rtw_hal_disable_interrupt(_adapter *padapter);
--- a/drivers/staging/rtl8192du/include/rtl8192d_dm.h
+++ b/drivers/staging/rtl8192du/include/rtl8192d_dm.h
@@ -196,8 +196,7 @@ enum DM_DIG_CONNECT_E {
 #define		DM_Type_ByFW			0
 #define		DM_Type_ByDriver		1
 
-typedef struct _RATE_ADAPTIVE
-{
+struct rate_adaptive {
 	u8				RateAdaptiveDisabled;
 	u8				RATRState;
 	u16				reserve;
@@ -218,8 +217,7 @@ typedef struct _RATE_ADAPTIVE
 	u32				PingRSSIThreshForRA;//cosa add for Netcore long range ping issue
 	u32				LastRATR;
 	u8				PreRATRState;
-
-} RATE_ADAPTIVE, *PRATE_ADAPTIVE;
+};
 
 enum DM_SWAS_E {
 	Antenna_B = 1,
@@ -244,8 +242,7 @@ enum DM_SWAS_E {
 //Neil Chen---2011--06--15--
 //==============================
 //3 PathDiv
-typedef struct _SW_Antenna_Switch_
-{
+struct sw_antenna_switch {
 	u8		try_flag;
 	s32		PreRSSI;
 	u8		CurAntenna;
@@ -258,7 +255,8 @@ typedef struct _SW_Antenna_Switch_
 	// Before link Antenna Switch check
 	u8		SWAS_NoLink_State;
 	u32		SWAS_NoLink_BK_Reg860;
-}SWAT_T, *pSWAT_T;
+};
+
 //========================================
 
 struct	dm_priv
@@ -277,7 +275,7 @@ struct	dm_priv
 
 	//for rate adaptive, in fact,  88c/92c fw will handle this
 	u8	bUseRAMask;
-	RATE_ADAPTIVE	RateAdaptive;
+	struct rate_adaptive RateAdaptive;
 
 	//* Upper and Lower Signal threshold for Rate Adaptive*/
 	int	UndecoratedSmoothedPWDB;
@@ -352,7 +350,7 @@ struct	dm_priv
 	//u8 Record_CCK_40Mindex;
 	char	OFDM_index[2];
 
-	SWAT_T DM_SWAT_Table;
+	struct sw_antenna_switch DM_SWAT_Table;
 
 	//for TxPwrTracking
 	int	RegE94;
--- a/drivers/staging/rtl8192du/include/rtw_iol.h
+++ b/drivers/staging/rtl8192du/include/rtw_iol.h
@@ -24,23 +24,13 @@
 #include <osdep_service.h>
 #include <drv_types.h>
 
-typedef struct _io_offload_cmd {
-	u8 rsvd0;
-	u8 cmd;
-	u16 address;
-	u32 value;
-} IO_OFFLOAD_CMD, IOL_CMD;
-
-#define IOL_CMD_LLT			0x00
-//#define IOL_CMD_R_EFUSE	0x01
+#define IOL_CMD_LLT		0x00
 #define IOL_CMD_WB_REG		0x02
-#define IOL_CMD_WW_REG	0x03
+#define IOL_CMD_WW_REG		0x03
 #define IOL_CMD_WD_REG		0x04
-//#define IOL_CMD_W_RF		0x05
 #define IOL_CMD_DELAY_US	0x80
 #define IOL_CMD_DELAY_MS	0x81
-//#define IOL_CMD_DELAY_S	0x82
-#define IOL_CMD_END			0x83
+#define IOL_CMD_END		0x83
 
 /*****************************************************
 CMD					Address			Value
