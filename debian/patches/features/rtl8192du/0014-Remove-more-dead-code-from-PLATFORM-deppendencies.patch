From fea5620a4048fa875e7235d5453a2aa5811c74fc Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 17 Apr 2013 14:29:02 -0500
Subject: [PATCH 014/210] Remove more dead code from PLATFORM deppendencies

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
---
 include/ieee80211_ext.h | 133 ----------------------
 include/rtw_debug.h     |  67 +-----------
 include/rtw_security.h  |  17 ---
 include/swabb.h         |   2 -
 include/wlan_bssdef.h   | 286 +-----------------------------------------------
 5 files changed, 3 insertions(+), 502 deletions(-)

--- a/drivers/staging/rtl8192du/include/ieee80211_ext.h
+++ b/drivers/staging/rtl8192du/include/ieee80211_ext.h
@@ -44,11 +44,8 @@
 #define WPA_CAPABILITY_MGMT_FRAME_PROTECTION BIT(6)
 #define WPA_CAPABILITY_PEERKEY_ENABLED BIT(9)
 
-
 #define PMKID_LEN 16
 
-
-#ifdef PLATFORM_LINUX
 struct wpa_ie_hdr {
 	u8 elem_id;
 	u8 len;
@@ -103,29 +100,6 @@ struct wme_parameter_element {
 
 } __attribute__ ((packed));
 
-#endif
-
-#ifdef PLATFORM_WINDOWS
-
-#pragma pack(1)
-
-struct wpa_ie_hdr {
-	u8 elem_id;
-	u8 len;
-	u8 oui[4]; /* 24-bit OUI followed by 8-bit OUI type */
-	u8 version[2]; /* little endian */
-};
-
-struct rsn_ie_hdr {
-	u8 elem_id; /* WLAN_EID_RSN */
-	u8 len;
-	u8 version[2]; /* little endian */
-};
-
-#pragma pack()
-
-#endif
-
 #define WPA_PUT_LE16(a, val)			\
 	do {					\
 		(a)[1] = ((u16) (val)) >> 8;	\
@@ -149,7 +123,6 @@ struct rsn_ie_hdr {
 	} while (0)
 
 #define RSN_SELECTOR_PUT(a, val) WPA_PUT_BE32((u8 *) (a), (val))
-//#define RSN_SELECTOR_PUT(a, val) WPA_PUT_LE32((u8 *) (a), (val))
 
 
 
@@ -200,8 +173,6 @@ enum ieee80211_back_parties {
 	WLAN_BACK_TIMER = 2,
 };
 
-#ifdef PLATFORM_LINUX
-
 struct ieee80211_mgmt {
 	u16 frame_control;
 	u16 duration;
@@ -313,111 +284,7 @@ struct ieee80211_mgmt {
 	} __attribute__ ((packed)) u;
 }__attribute__ ((packed));
 
-#endif
-
-
-#ifdef PLATFORM_WINDOWS
-
-#pragma pack(1)
-
-struct ieee80211_mgmt {
-	u16 frame_control;
-	u16 duration;
-	u8 da[6];
-	u8 sa[6];
-	u8 bssid[6];
-	u16 seq_ctrl;
-	union {
-		struct {
-			u16 auth_alg;
-			u16 auth_transaction;
-			u16 status_code;
-			/* possibly followed by Challenge text */
-			u8 variable[0];
-		}  auth;
-		struct {
-			u16 reason_code;
-		}  deauth;
-		struct {
-			u16 capab_info;
-			u16 listen_interval;
-			/* followed by SSID and Supported rates */
-			u8 variable[0];
-		}  assoc_req;
-		struct {
-			u16 capab_info;
-			u16 status_code;
-			u16 aid;
-			/* followed by Supported rates */
-			u8 variable[0];
-		}  assoc_resp, reassoc_resp;
-		struct {
-			u16 capab_info;
-			u16 listen_interval;
-			u8 current_ap[6];
-			/* followed by SSID and Supported rates */
-			u8 variable[0];
-		}  reassoc_req;
-		struct {
-			u16 reason_code;
-		}  disassoc;
-		struct {
-			u8 category;
-			union {
-				struct {
-					u8 action_code;
-					u8 dialog_token;
-					u8 status_code;
-					u8 variable[0];
-				}  wme_action;
-				struct{
-					u8 action_code;
-					u8 dialog_token;
-					u16 capab;
-					u16 timeout;
-					u16 start_seq_num;
-				}  addba_req;
-				struct{
-					u8 action_code;
-					u8 dialog_token;
-					u16 status;
-					u16 capab;
-					u16 timeout;
-				}  addba_resp;
-				struct{
-					u8 action_code;
-					u16 params;
-					u16 reason_code;
-				}  delba;
-				struct{
-					u8 action_code;
-					/* capab_info for open and confirm,
-					 * reason for close
-					 */
-					u16 aux;
-					/* Followed in plink_confirm by status
-					 * code, AID and supported rates,
-					 * and directly by supported rates in
-					 * plink_open and plink_close
-					 */
-					u8 variable[0];
-				}  plink_action;
-				struct{
-					u8 action_code;
-					u8 variable[0];
-				}  mesh_action;
-			} u;
-		}  action;
-	} u;
-} ;
-
-#pragma pack()
-
-#endif
-
 /* mgmt header + 1 byte category code */
 #define IEEE80211_MIN_ACTION_SIZE FIELD_OFFSET(struct ieee80211_mgmt, u.action.u)
 
-
-
 #endif
--- a/drivers/staging/rtl8192du/include/rtw_debug.h
+++ b/drivers/staging/rtl8192du/include/rtw_debug.h
@@ -151,10 +151,6 @@
 	#define	_MODULE_DEFINE_	_module_efuse_
 #endif
 
-#ifdef PLATFORM_OS_CE
-extern void rtl871x_cedbg(const char *fmt, ...);
-#endif
-
 #define RT_TRACE(_Comp, _Level, Fmt) do{}while(0)
 #define _func_enter_ do{}while(0)
 #define _func_exit_ do{}while(0)
@@ -169,27 +165,7 @@ extern void rtl871x_cedbg(const char *fm
 	extern u64 GlobalDebugComponents;
 #endif
 
-#ifdef PLATFORM_WINDOWS
-
-	#ifdef PLATFORM_OS_XP
-
-	#define _dbgdump	DbgPrint
-
-	#elif defined PLATFORM_OS_CE
-
-	#define _dbgdump	rtl871x_cedbg
-
-	#endif
-
-#elif defined PLATFORM_LINUX
-
-	#define _dbgdump	printk
-
-#elif defined PLATFORM_FREEBSD
-
-	#define _dbgdump	printf
-
-#endif
+#define _dbgdump	printk
 
 #endif /* CONFIG_DEBUG_RTL871X */
 
@@ -250,55 +226,16 @@ extern void rtl871x_cedbg(const char *fm
 
 #undef	_dbgdump
 
-#ifdef PLATFORM_WINDOWS
-
-	#ifdef PLATFORM_OS_XP
-
-	#define _dbgdump	DbgPrint
-
-	#elif defined PLATFORM_OS_CE
-
-	#define _dbgdump	rtl871x_cedbg
-
-	#endif
-
-#elif defined PLATFORM_LINUX
-
-	#define _dbgdump	printk
-
-#elif defined PLATFORM_FREEBSD
-
-	#define _dbgdump	printf
-
-#endif
+#define _dbgdump	printk
 
 #endif /* CONFIG_DEBUG_RTL819X */
 
 
-#ifdef PLATFORM_WINDOWS
-	#define DBG_871X do {} while(0)
-	#define MSG_8192C do {} while(0)
-	#define DBG_8192C do {} while(0)
-	#define WRN_8192C do {} while(0)
-	#define ERR_8192C do {} while(0)
-#endif
-
-#ifdef PLATFORM_LINUX
 	#define DBG_871X(x, ...) do {} while(0)
 	#define MSG_8192C(x, ...) do {} while(0)
 	#define DBG_8192C(x,...) do {} while(0)
 	#define WRN_8192C(x,...) do {} while(0)
 	#define ERR_8192C(x,...) do {} while(0)
-#endif
-
-#ifdef PLATFORM_FREEBSD
-	#define _dbgdump	printf
-	#define DBG_871X(x, ...) do {} while(0)
-	#define MSG_8192C(x, ...) do {} while(0)
-	#define DBG_8192C(x,...) do {} while(0)
-	#define WRN_8192C(x,...) do {} while(0)
-	#define ERR_8192C(x,...) do {} while(0)
-#endif
 
 extern u32 GlobalDebugLevel;
 #define LOG_LEVEL(level, ...)\
--- a/drivers/staging/rtl8192du/include/rtw_security.h
+++ b/drivers/staging/rtl8192du/include/rtw_security.h
@@ -154,10 +154,6 @@ struct security_priv
 	WLAN_BSSID_EX sec_bss;  //for joinbss (h2c buffer) usage
 
 	NDIS_802_11_WEP ndiswep;
-#ifdef PLATFORM_WINDOWS
-	u8 KeyMaterial[16];// variable length depending on above field.
-#endif
-
 	u8 assoc_info[600];
 	u8 szofcapability[256]; //for wpa2 usage
 	u8 oidassociation[512]; //for wpa/wpa2 usage
@@ -409,19 +405,6 @@ int tdls_verify_mic(u8 *kck, u8 trans_se
 						u8 *lnkid, u8 *rsnie, u8 *timeoutie, u8 *ftie);
 #endif //CONFIG_TDLS
 
-#ifdef PLATFORM_WINDOWS
-void rtw_use_tkipkey_handler (
-	IN	PVOID					SystemSpecific1,
-	IN	PVOID					FunctionContext,
-	IN	PVOID					SystemSpecific2,
-	IN	PVOID					SystemSpecific3
-	);
-#endif
-#ifdef PLATFORM_LINUX
 void rtw_use_tkipkey_handler(void* FunctionContext);
-#endif
 
-#ifdef PLATFORM_FREEBSD
-void rtw_use_tkipkey_handler(void* FunctionContext);
-#endif //PLATFORM_FREEBSD
 #endif	//__RTL871X_SECURITY_H_
--- a/drivers/staging/rtl8192du/include/swabb.h
+++ b/drivers/staging/rtl8192du/include/swabb.h
@@ -144,13 +144,11 @@ __inline static__ void __swahb32s(__u32
  */
 #endif /* __BYTEORDER_HAS_U64__ */
 
-#if defined(PLATFORM_LINUX)
 #define swahw32 __swahw32
 #define swahb32 __swahb32
 #define swahw32p __swahw32p
 #define swahb32p __swahb32p
 #define swahw32s __swahw32s
 #define swahb32s __swahb32s
-#endif
 
 #endif /* _LINUX_BYTEORDER_SWABB_H */
--- a/drivers/staging/rtl8192du/include/wlan_bssdef.h
+++ b/drivers/staging/rtl8192du/include/wlan_bssdef.h
@@ -23,255 +23,6 @@
 
 #define MAX_IE_SZ	768
 
-
-#ifdef PLATFORM_LINUX
-
-#define NDIS_802_11_LENGTH_SSID         32
-#define NDIS_802_11_LENGTH_RATES        8
-#define NDIS_802_11_LENGTH_RATES_EX     16
-
-typedef unsigned char   NDIS_802_11_MAC_ADDRESS[6];
-typedef long			NDIS_802_11_RSSI;           // in dBm
-typedef unsigned char   NDIS_802_11_RATES[NDIS_802_11_LENGTH_RATES];        // Set of 8 data rates
-typedef unsigned char   NDIS_802_11_RATES_EX[NDIS_802_11_LENGTH_RATES_EX];  // Set of 16 data rates
-
-
-typedef  ULONG  NDIS_802_11_KEY_INDEX;
-typedef unsigned long long NDIS_802_11_KEY_RSC;
-
-
-typedef struct _NDIS_802_11_SSID
-{
-  ULONG  SsidLength;
-  UCHAR  Ssid[32];
-} NDIS_802_11_SSID, *PNDIS_802_11_SSID;
-
-typedef enum _NDIS_802_11_NETWORK_TYPE
-{
-    Ndis802_11FH,
-    Ndis802_11DS,
-    Ndis802_11OFDM5,
-    Ndis802_11OFDM24,
-    Ndis802_11NetworkTypeMax    // not a real type, defined as an upper bound
-} NDIS_802_11_NETWORK_TYPE, *PNDIS_802_11_NETWORK_TYPE;
-
-typedef struct _NDIS_802_11_CONFIGURATION_FH
-{
-    ULONG           Length;             // Length of structure
-    ULONG           HopPattern;         // As defined by 802.11, MSB set
-    ULONG           HopSet;             // to one if non-802.11
-    ULONG           DwellTime;          // units are Kusec
-} NDIS_802_11_CONFIGURATION_FH, *PNDIS_802_11_CONFIGURATION_FH;
-
-
-/*
-	FW will only save the channel number in DSConfig.
-	ODI Handler will convert the channel number to freq. number.
-*/
-typedef struct _NDIS_802_11_CONFIGURATION
-{
-    ULONG           Length;             // Length of structure
-    ULONG           BeaconPeriod;       // units are Kusec
-    ULONG           ATIMWindow;         // units are Kusec
-    ULONG           DSConfig;           // Frequency, units are kHz
-    NDIS_802_11_CONFIGURATION_FH    FHConfig;
-} NDIS_802_11_CONFIGURATION, *PNDIS_802_11_CONFIGURATION;
-
-
-
-typedef enum _NDIS_802_11_NETWORK_INFRASTRUCTURE
-{
-    Ndis802_11IBSS,
-    Ndis802_11Infrastructure,
-    Ndis802_11AutoUnknown,
-    Ndis802_11InfrastructureMax,     // Not a real value, defined as upper bound
-    Ndis802_11APMode
-} NDIS_802_11_NETWORK_INFRASTRUCTURE, *PNDIS_802_11_NETWORK_INFRASTRUCTURE;
-
-
-
-
-
-typedef struct _NDIS_802_11_FIXED_IEs
-{
-  UCHAR  Timestamp[8];
-  USHORT  BeaconInterval;
-  USHORT  Capabilities;
-} NDIS_802_11_FIXED_IEs, *PNDIS_802_11_FIXED_IEs;
-
-
-
-typedef struct _NDIS_802_11_VARIABLE_IEs
-{
-  UCHAR  ElementID;
-  UCHAR  Length;
-  UCHAR  data[1];
-} NDIS_802_11_VARIABLE_IEs, *PNDIS_802_11_VARIABLE_IEs;
-
-
-
-/*
-
-
-
-Length is the 4 bytes multiples of the sume of
-	sizeof (NDIS_802_11_MAC_ADDRESS) + 2 + sizeof (NDIS_802_11_SSID) + sizeof (ULONG)
-+   sizeof (NDIS_802_11_RSSI) + sizeof (NDIS_802_11_NETWORK_TYPE) + sizeof (NDIS_802_11_CONFIGURATION)
-+   sizeof (NDIS_802_11_RATES_EX) + IELength
-
-Except the IELength, all other fields are fixed length. Therefore, we can define a marco to present the
-partial sum.
-
-*/
-
-typedef enum _NDIS_802_11_AUTHENTICATION_MODE
-{
-    Ndis802_11AuthModeOpen,
-    Ndis802_11AuthModeShared,
-    Ndis802_11AuthModeAutoSwitch,
-    Ndis802_11AuthModeWPA,
-    Ndis802_11AuthModeWPAPSK,
-    Ndis802_11AuthModeWPANone,
-    Ndis802_11AuthModeMax               // Not a real mode, defined as upper bound
-} NDIS_802_11_AUTHENTICATION_MODE, *PNDIS_802_11_AUTHENTICATION_MODE;
-
-typedef enum _NDIS_802_11_WEP_STATUS
-{
-    Ndis802_11WEPEnabled,
-    Ndis802_11Encryption1Enabled = Ndis802_11WEPEnabled,
-    Ndis802_11WEPDisabled,
-    Ndis802_11EncryptionDisabled = Ndis802_11WEPDisabled,
-    Ndis802_11WEPKeyAbsent,
-    Ndis802_11Encryption1KeyAbsent = Ndis802_11WEPKeyAbsent,
-    Ndis802_11WEPNotSupported,
-    Ndis802_11EncryptionNotSupported = Ndis802_11WEPNotSupported,
-    Ndis802_11Encryption2Enabled,
-    Ndis802_11Encryption2KeyAbsent,
-    Ndis802_11Encryption3Enabled,
-    Ndis802_11Encryption3KeyAbsent
-} NDIS_802_11_WEP_STATUS, *PNDIS_802_11_WEP_STATUS,
-  NDIS_802_11_ENCRYPTION_STATUS, *PNDIS_802_11_ENCRYPTION_STATUS;
-
-
-#define NDIS_802_11_AI_REQFI_CAPABILITIES      1
-#define NDIS_802_11_AI_REQFI_LISTENINTERVAL    2
-#define NDIS_802_11_AI_REQFI_CURRENTAPADDRESS  4
-
-#define NDIS_802_11_AI_RESFI_CAPABILITIES      1
-#define NDIS_802_11_AI_RESFI_STATUSCODE        2
-#define NDIS_802_11_AI_RESFI_ASSOCIATIONID     4
-
-typedef struct _NDIS_802_11_AI_REQFI
-{
-    USHORT Capabilities;
-    USHORT ListenInterval;
-    NDIS_802_11_MAC_ADDRESS  CurrentAPAddress;
-} NDIS_802_11_AI_REQFI, *PNDIS_802_11_AI_REQFI;
-
-typedef struct _NDIS_802_11_AI_RESFI
-{
-    USHORT Capabilities;
-    USHORT StatusCode;
-    USHORT AssociationId;
-} NDIS_802_11_AI_RESFI, *PNDIS_802_11_AI_RESFI;
-
-typedef struct _NDIS_802_11_ASSOCIATION_INFORMATION
-{
-    ULONG                   Length;
-    USHORT                  AvailableRequestFixedIEs;
-    NDIS_802_11_AI_REQFI    RequestFixedIEs;
-    ULONG                   RequestIELength;
-    ULONG                   OffsetRequestIEs;
-    USHORT                  AvailableResponseFixedIEs;
-    NDIS_802_11_AI_RESFI    ResponseFixedIEs;
-    ULONG                   ResponseIELength;
-    ULONG                   OffsetResponseIEs;
-} NDIS_802_11_ASSOCIATION_INFORMATION, *PNDIS_802_11_ASSOCIATION_INFORMATION;
-
-typedef enum _NDIS_802_11_RELOAD_DEFAULTS
-{
-   Ndis802_11ReloadWEPKeys
-} NDIS_802_11_RELOAD_DEFAULTS, *PNDIS_802_11_RELOAD_DEFAULTS;
-
-
-// Key mapping keys require a BSSID
-typedef struct _NDIS_802_11_KEY
-{
-    ULONG           Length;             // Length of this structure
-    ULONG           KeyIndex;
-    ULONG           KeyLength;          // length of key in bytes
-    NDIS_802_11_MAC_ADDRESS BSSID;
-    NDIS_802_11_KEY_RSC KeyRSC;
-    UCHAR           KeyMaterial[32];     // variable length depending on above field
-} NDIS_802_11_KEY, *PNDIS_802_11_KEY;
-
-typedef struct _NDIS_802_11_REMOVE_KEY
-{
-    ULONG                   Length;        // Length of this structure
-    ULONG                   KeyIndex;
-    NDIS_802_11_MAC_ADDRESS BSSID;
-} NDIS_802_11_REMOVE_KEY, *PNDIS_802_11_REMOVE_KEY;
-
-typedef struct _NDIS_802_11_WEP
-{
-    ULONG     Length;        // Length of this structure
-    ULONG     KeyIndex;      // 0 is the per-client key, 1-N are the global keys
-    ULONG     KeyLength;     // length of key in bytes
-    UCHAR     KeyMaterial[16];// variable length depending on above field
-} NDIS_802_11_WEP, *PNDIS_802_11_WEP;
-
-typedef struct _NDIS_802_11_AUTHENTICATION_REQUEST
-{
-    ULONG Length;            // Length of structure
-    NDIS_802_11_MAC_ADDRESS Bssid;
-    ULONG Flags;
-} NDIS_802_11_AUTHENTICATION_REQUEST, *PNDIS_802_11_AUTHENTICATION_REQUEST;
-
-typedef enum _NDIS_802_11_STATUS_TYPE
-{
-	Ndis802_11StatusType_Authentication,
-	Ndis802_11StatusType_MediaStreamMode,
-	Ndis802_11StatusType_PMKID_CandidateList,
-	Ndis802_11StatusTypeMax    // not a real type, defined as an upper bound
-} NDIS_802_11_STATUS_TYPE, *PNDIS_802_11_STATUS_TYPE;
-
-typedef struct _NDIS_802_11_STATUS_INDICATION
-{
-    NDIS_802_11_STATUS_TYPE StatusType;
-} NDIS_802_11_STATUS_INDICATION, *PNDIS_802_11_STATUS_INDICATION;
-
-// mask for authentication/integrity fields
-#define NDIS_802_11_AUTH_REQUEST_AUTH_FIELDS        0x0f
-#define NDIS_802_11_AUTH_REQUEST_REAUTH			0x01
-#define NDIS_802_11_AUTH_REQUEST_KEYUPDATE		0x02
-#define NDIS_802_11_AUTH_REQUEST_PAIRWISE_ERROR		0x06
-#define NDIS_802_11_AUTH_REQUEST_GROUP_ERROR		0x0E
-
-// MIC check time, 60 seconds.
-#define MIC_CHECK_TIME	60000000
-
-typedef struct _NDIS_802_11_AUTHENTICATION_EVENT
-{
-    NDIS_802_11_STATUS_INDICATION       Status;
-    NDIS_802_11_AUTHENTICATION_REQUEST  Request[1];
-} NDIS_802_11_AUTHENTICATION_EVENT, *PNDIS_802_11_AUTHENTICATION_EVENT;
-
-typedef struct _NDIS_802_11_TEST
-{
-    ULONG Length;
-    ULONG Type;
-    union
-    {
-        NDIS_802_11_AUTHENTICATION_EVENT AuthenticationEvent;
-        NDIS_802_11_RSSI RssiTrigger;
-    }tt;
-} NDIS_802_11_TEST, *PNDIS_802_11_TEST;
-
-
-#endif //end of #ifdef PLATFORM_LINUX
-
-#ifdef PLATFORM_FREEBSD
-
 #define NDIS_802_11_LENGTH_SSID         32
 #define NDIS_802_11_LENGTH_RATES        8
 #define NDIS_802_11_LENGTH_RATES_EX     16
@@ -334,10 +85,6 @@ typedef enum _NDIS_802_11_NETWORK_INFRAS
     Ndis802_11APMode
 } NDIS_802_11_NETWORK_INFRASTRUCTURE, *PNDIS_802_11_NETWORK_INFRASTRUCTURE;
 
-
-
-
-
 typedef struct _NDIS_802_11_FIXED_IEs
 {
   UCHAR  Timestamp[8];
@@ -345,8 +92,6 @@ typedef struct _NDIS_802_11_FIXED_IEs
   USHORT  Capabilities;
 } NDIS_802_11_FIXED_IEs, *PNDIS_802_11_FIXED_IEs;
 
-
-
 typedef struct _NDIS_802_11_VARIABLE_IEs
 {
   UCHAR  ElementID;
@@ -354,12 +99,7 @@ typedef struct _NDIS_802_11_VARIABLE_IEs
   UCHAR  data[1];
 } NDIS_802_11_VARIABLE_IEs, *PNDIS_802_11_VARIABLE_IEs;
 
-
-
 /*
-
-
-
 Length is the 4 bytes multiples of the sume of
 	sizeof (NDIS_802_11_MAC_ADDRESS) + 2 + sizeof (NDIS_802_11_SSID) + sizeof (ULONG)
 +   sizeof (NDIS_802_11_RSSI) + sizeof (NDIS_802_11_NETWORK_TYPE) + sizeof (NDIS_802_11_CONFIGURATION)
@@ -367,7 +107,6 @@ Length is the 4 bytes multiples of the s
 
 Except the IELength, all other fields are fixed length. Therefore, we can define a marco to present the
 partial sum.
-
 */
 
 typedef enum _NDIS_802_11_AUTHENTICATION_MODE
@@ -398,7 +137,6 @@ typedef enum _NDIS_802_11_WEP_STATUS
 } NDIS_802_11_WEP_STATUS, *PNDIS_802_11_WEP_STATUS,
   NDIS_802_11_ENCRYPTION_STATUS, *PNDIS_802_11_ENCRYPTION_STATUS;
 
-
 #define NDIS_802_11_AI_REQFI_CAPABILITIES      1
 #define NDIS_802_11_AI_REQFI_LISTENINTERVAL    2
 #define NDIS_802_11_AI_REQFI_CURRENTAPADDRESS  4
@@ -513,8 +251,6 @@ typedef struct _NDIS_802_11_TEST
     }tt;
 } NDIS_802_11_TEST, *PNDIS_802_11_TEST;
 
-
-#endif //PLATFORM_FREEBSD
 #ifndef Ndis802_11APMode
 #define Ndis802_11APMode (Ndis802_11InfrastructureMax+1)
 #endif
@@ -527,13 +263,6 @@ typedef struct _WLAN_PHY_INFO
 	u8	Reserved_0;
 }WLAN_PHY_INFO,*PWLAN_PHY_INFO;
 
-/* temporally add #pragma pack for structure alignment issue of
-*   WLAN_BSSID_EX and get_WLAN_BSSID_EX_sz()
-*/
-#ifdef PLATFORM_WINDOWS
-#pragma pack(push)
-#pragma pack(1)
-#endif
 typedef struct _WLAN_BSSID_EX
 {
   ULONG  Length;
@@ -549,14 +278,7 @@ typedef struct _WLAN_BSSID_EX
   WLAN_PHY_INFO	PhyInfo;
   ULONG  IELength;
   UCHAR  IEs[MAX_IE_SZ];	//(timestamp, beacon interval, and capability information)
-}
-#ifndef PLATFORM_WINDOWS
-__attribute__((packed))
-#endif
-WLAN_BSSID_EX, *PWLAN_BSSID_EX;
-#ifdef PLATFORM_WINDOWS
-#pragma pack(pop)
-#endif
+} __attribute__((packed)) WLAN_BSSID_EX, *PWLAN_BSSID_EX;
 
 __inline  static uint get_WLAN_BSSID_EX_sz(WLAN_BSSID_EX *bss)
 {
@@ -571,10 +293,6 @@ struct	wlan_network {
 	int	aid;			//will only be valid when a BSS is joinned.
 	int	join_res;
 	WLAN_BSSID_EX	network; //must be the last item
-#ifdef PLATFORM_WINDOWS
-	unsigned char  iebuf[MAX_IE_SZ];
-#endif
-
 };
 
 enum VRTL_CARRIER_SENSE
@@ -618,7 +336,6 @@ enum UAPSD_MAX_SP
 *	WPA2
 */
 
-#ifndef PLATFORM_OS_CE
 typedef struct _PMKID_CANDIDATE {
     NDIS_802_11_MAC_ADDRESS BSSID;
     ULONG Flags;
@@ -648,7 +365,6 @@ typedef struct _NDIS_802_11_CAPABILITY
 	NDIS_802_11_AUTHENTICATION_ENCRYPTION AuthenticationEncryptionSupported[1];
 
 } NDIS_802_11_CAPABILITY, *PNDIS_802_11_CAPABILITY;
-#endif
 
 
 #endif //#ifndef WLAN_BSSDEF_H_
