From 0b20144277b6cfaa313b316707818cfcf30f4871 Mon Sep 17 00:00:00 2001
From: Stefan Lippers-Hollmann <s.l-h@gmx.de>
Date: Sat, 22 Mar 2014 03:03:26 +0100
Subject: [PATCH 428/456] rtl8192du: replace custom _rtw_up_sema() with up()

Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
---
 core/rtw_cmd.c          | 6 +++---
 include/osdep_service.h | 1 -
 include/rtw_pwrctrl.h   | 2 +-
 os_dep/os_intfs.c       | 2 +-
 os_dep/osdep_service.c  | 5 -----
 5 files changed, 5 insertions(+), 11 deletions(-)

--- a/drivers/staging/rtl8192du/core/rtw_cmd.c
+++ b/drivers/staging/rtl8192du/core/rtw_cmd.c
@@ -208,7 +208,7 @@ u32 rtw_enqueue_cmd(struct cmd_priv *pcm
 	res = _rtw_enqueue_cmd(&pcmdpriv->cmd_queue, cmd_obj);
 
 	if (res == _SUCCESS)
-		_rtw_up_sema(&pcmdpriv->cmd_queue_sema);
+		up(&pcmdpriv->cmd_queue_sema);
 
 exit:
 	return res;
@@ -262,7 +262,7 @@ int rtw_cmd_thread(void *context)
 	pcmdbuf = pcmdpriv->cmd_buf;
 
 	pcmdpriv->cmdthd_running = true;
-	_rtw_up_sema(&pcmdpriv->terminate_cmdthread_sema);
+	up(&pcmdpriv->terminate_cmdthread_sema);
 
 	RT_TRACE(_module_rtl871x_cmd_c_, _drv_info_,
 		 ("start r871x rtw_cmd_thread !!!!\n"));
@@ -350,7 +350,7 @@ post_process:
 		rtw_free_cmd_obj(pcmd);
 	} while (1);
 
-	_rtw_up_sema(&pcmdpriv->terminate_cmdthread_sema);
+	up(&pcmdpriv->terminate_cmdthread_sema);
 
 	thread_exit();
 }
--- a/drivers/staging/rtl8192du/include/osdep_service.h
+++ b/drivers/staging/rtl8192du/include/osdep_service.h
@@ -178,7 +178,6 @@ enum {
 
 #define rtw_update_mem_stat(flag, sz) do {} while (0)
 
-void	_rtw_up_sema(struct  semaphore *sema);
 u32	_rtw_down_sema(struct  semaphore *sema);
 void	_rtw_mutex_init(_mutex *pmutex);
 void	_rtw_mutex_free(_mutex *pmutex);
--- a/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
+++ b/drivers/staging/rtl8192du/include/rtw_pwrctrl.h
@@ -119,7 +119,7 @@ static inline void _enter_pwrlock(struct
 
 static inline void _exit_pwrlock(struct  semaphore *plock)
 {
-	_rtw_up_sema(plock);
+	up(plock);
 }
 
 #define LPS_DELAY_TIME	1*HZ /*  1 sec */
--- a/drivers/staging/rtl8192du/os_dep/os_intfs.c
+++ b/drivers/staging/rtl8192du/os_dep/os_intfs.c
@@ -458,7 +458,7 @@ void rtw_stop_drv_threads (struct rtw_ad
 #endif /* CONFIG_CONCURRENT_MODE */
 	{
 		/* Below is to terminate rtw_cmd_thread & event_thread... */
-		_rtw_up_sema(&padapter->cmdpriv.cmd_queue_sema);
+		up(&padapter->cmdpriv.cmd_queue_sema);
 		if (padapter->cmdThread)
 			_rtw_down_sema(&padapter->cmdpriv.terminate_cmdthread_sema);
 	}
--- a/drivers/staging/rtl8192du/os_dep/osdep_service.c
+++ b/drivers/staging/rtl8192du/os_dep/osdep_service.c
@@ -36,11 +36,6 @@ inline int RTW_STATUS_CODE(int error_cod
 	}
 }
 
-void _rtw_up_sema(struct  semaphore *sema)
-{
-	up(sema);
-}
-
 u32 _rtw_down_sema(struct  semaphore *sema)
 {
 	if (down_interruptible(sema))
