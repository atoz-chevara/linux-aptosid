From 6d4af7affcc447fd7aebdaa037c4f2a4d381b578 Mon Sep 17 00:00:00 2001
From: Stefan Lippers-Hollmann <s.l-h@gmx.de>
Date: Thu, 22 Sep 2011 04:24:37 +0200
Subject: [PATCH 8/9] Revert "rt2800pci: Fix compiler error on PowerPC"

This reverts commit 1560a03db718b1de593cdcc891db512dc0b695e8.
---
 drivers/net/wireless/rt2x00/rt2800lib.c |   30 +++++++++++++-----------------
 1 files changed, 13 insertions(+), 17 deletions(-)

--- a/drivers/net/wireless/rt2x00/rt2800lib.c
+++ b/drivers/net/wireless/rt2x00/rt2800lib.c
@@ -3678,23 +3678,19 @@ int rt2800_init_eeprom(struct rt2x00_dev
 		return -ENODEV;
 	}
 
-	switch (rt2x00dev->chip.rf) {
-	case RF2820:
-	case RF2850:
-	case RF2720:
-	case RF2750:
-	case RF3020:
-	case RF2020:
-	case RF3021:
-	case RF3022:
-	case RF3052:
-	case RF3320:
-	case RF5370:
-	case RF5390:
-		break;
-	default:
-		ERROR(rt2x00dev, "Invalid RF chipset 0x%x detected.\n",
-		      rt2x00dev->chip.rf);
+	if (!rt2x00_rf(rt2x00dev, RF2820) &&
+	    !rt2x00_rf(rt2x00dev, RF2850) &&
+	    !rt2x00_rf(rt2x00dev, RF2720) &&
+	    !rt2x00_rf(rt2x00dev, RF2750) &&
+	    !rt2x00_rf(rt2x00dev, RF3020) &&
+	    !rt2x00_rf(rt2x00dev, RF2020) &&
+	    !rt2x00_rf(rt2x00dev, RF3021) &&
+	    !rt2x00_rf(rt2x00dev, RF3022) &&
+	    !rt2x00_rf(rt2x00dev, RF3052) &&
+	    !rt2x00_rf(rt2x00dev, RF3320) &&
+	    !rt2x00_rf(rt2x00dev, RF5370) &&
+	    !rt2x00_rf(rt2x00dev, RF5390)) {
+		ERROR(rt2x00dev, "Invalid RF chipset detected.\n");
 		return -ENODEV;
 	}
 
